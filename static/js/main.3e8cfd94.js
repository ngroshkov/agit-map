/*! For license information please see main.3e8cfd94.js.LICENSE.txt */
(()=>{var e={6366:(e,t,n)=>{"use strict";var r=n(8313),o=n(49),i="value",s="\n  ",a={};function l(e){var t=Array.isArray(e);return function(n){var r,o=u(a.plainArray,n);if(o)return o;if(t&&n.length!==e.length)return"an array with "+e.length+" items";for(var i=0;i<n.length;i++)if(o=u((r=i,t?e[r]:e),n[i]))return[i].concat(o)}}function u(e,t){if(null!=t||e.hasOwnProperty("__required")){var n=e(t);return n?Array.isArray(n)?n:[n]:void 0}}function c(e,t){var n=e.length,r=e[n-1],s=e.slice(0,n-1);return 0===s.length&&(s=[i]),t=o(t,{path:s}),"function"===typeof r?r(t):f(t,function(e){return"must be "+function(e){if(/^an? /.test(e))return e;if(/^[aeiou]/i.test(e))return"an "+e;if(/^[a-z]/i.test(e))return"a "+e;return e}(e)+"."}(r))}function f(e,t){return(d(e.path)?"Item at position ":"")+(e.path.join(".")+" "+t)}function d(e){return"number"==typeof e[e.length-1]||"number"==typeof e[0]}a.assert=function(e,t){return t=t||{},function(n){var r=u(e,n);if(r){var o=c(r,t);throw t.apiName&&(o=t.apiName+": "+o),new Error(o)}}},a.shape=function(e){var t,n=(t=e,Object.keys(t||{}).map((function(e){return{key:e,value:t[e]}})));return function(e){var t,r=u(a.plainObject,e);if(r)return r;for(var o=[],l=0;l<n.length;l++)t=n[l].key,(r=u(n[l].value,e[t]))&&o.push([t].concat(r));return o.length<2?o[0]:function(e){o=o.map((function(t){return"- "+t[0]+": "+c(t,e).split("\n").join(s)}));var t=e.path.join(".");return"The following properties"+(t===i?"":" of "+t)+" have invalid values:"+s+o.join(s)}}},a.strictShape=function(e){var t=a.shape(e);return function(n){var r=t(n);if(r)return r;var o=Object.keys(n).reduce((function(t,n){return void 0===e[n]&&t.push(n),t}),[]);return 0!==o.length?function(){return"The following keys are invalid: "+o.join(", ")}:void 0}},a.arrayOf=function(e){return l(e)},a.tuple=function(){return l(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments))},a.required=function(e){function t(t){return null==t?function(e){return f(e,d(e.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},a.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(t){var n=e.map((function(e){return u(e,t)})).filter(Boolean);if(n.length===e.length)return n.every((function(e){return 1===e.length&&"string"===typeof e[0]}))?function(e){if(e.length<2)return e[0];if(2===e.length)return e.join(" or ");return e.slice(0,-1).join(", ")+", or "+e.slice(-1)}(n.map((function(e){return e[0]}))):n.reduce((function(e,t){return t.length>e.length?t:e}))}},a.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},a.oneOf=function(){var e=(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments)).map((function(e){return a.equal(e)}));return a.oneOfType.apply(this,e)},a.range=function(e){var t=e[0],n=e[1];return function(e){if(u(a.number,e)||e<t||e>n)return"number between "+t+" & "+n+" (inclusive)"}},a.any=function(){},a.boolean=function(e){if("boolean"!==typeof e)return"boolean"},a.number=function(e){if("number"!==typeof e)return"number"},a.plainArray=function(e){if(!Array.isArray(e))return"array"},a.plainObject=function(e){if(!r(e))return"object"},a.string=function(e){if("string"!==typeof e)return"string"},a.func=function(e){if("function"!==typeof e)return"function"},a.validate=u,a.processMessage=c,e.exports=a},7050:(e,t,n)=>{"use strict";var r=n(6537);e.exports=r},6537:(e,t,n)=>{"use strict";var r=n(3465),o=n(4690);function i(e){o.call(this,e)}i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.sendRequest=r.browserSend,i.prototype.abortRequest=r.browserAbort,e.exports=function(e){return new i(e)}},3465:(e,t,n)=>{"use strict";var r=n(6238),o=n(7227),i=n(3487),s=n(3104),a={};function l(e){var t=e.total,n=e.loaded;return{total:t,transferred:n,percent:100*n/t}}function u(e,t){return new Promise((function(n,r){t.onprogress=function(t){e.emitter.emit(i.EVENT_PROGRESS_DOWNLOAD,l(t))};var s=e.file;s&&(t.upload.onprogress=function(t){e.emitter.emit(i.EVENT_PROGRESS_UPLOAD,l(t))}),t.onerror=function(e){r(e)},t.onabort=function(){var t=new o({request:e,type:i.ERROR_REQUEST_ABORTED});r(t)},t.onload=function(){if(delete a[e.id],t.status<200||t.status>=400){var i=new o({request:e,body:t.response,statusCode:t.status});r(i)}else n(t)};var u=e.body;"string"===typeof u?t.send(u):u?t.send(JSON.stringify(u)):s?t.send(s):t.send(),a[e.id]=t})).then((function(t){return function(e,t){return new r(e,{body:t.response,headers:s(t.getAllResponseHeaders()),statusCode:t.status})}(e,t)}))}function c(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach((function(t){r.setRequestHeader(t,e.headers[t])})),r}e.exports={browserAbort:function(e){var t=a[e.id];t&&(t.abort(),delete a[e.id])},sendRequestXhr:u,browserSend:function(e){return Promise.resolve().then((function(){var t=c(e,e.client.accessToken);return u(e,t)}))},createRequestXhr:c}},4690:(e,t,n)=>{"use strict";var r=n(9229),o=n(3868),i=n(3487);function s(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");r(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||i.API_ORIGIN}s.prototype.createRequest=function(e){return new o(this,e)},e.exports=s},7227:(e,t,n)=>{"use strict";var r=n(3487);e.exports=function(e){var t,n=e.type||r.ERROR_HTTP;if(e.body)try{t=JSON.parse(e.body)}catch(i){t=e.body}else t=null;var o=e.message||null;o||("string"===typeof t?o=t:t&&"string"===typeof t.message?o=t.message:n===r.ERROR_REQUEST_ABORTED&&(o="Request aborted")),this.message=o,this.type=n,this.statusCode=e.statusCode||null,this.request=e.request,this.body=t}},3868:(e,t,n)=>{"use strict";var r=n(9229),o=n(49),i=n(9097),s=n(5141),a=n(3487),l=1;function u(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=o(n,t.headers),s=Object.keys(r).reduce((function(e,t){return e[t.toLowerCase()]=r[t],e}),{});this.id=l++,this._options=t,this.emitter=new i,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=s}u.prototype.url=function(e){var t=s.prependOrigin(this.path,this.origin);t=s.appendQueryObject(t,this.query);var n=this.params,i=null==e?this.client.accessToken:e;if(i){t=s.appendQueryParam(t,"access_token",i);var a=r(i).user;n=o({ownerId:a},n)}return t=s.interpolateRouteParams(t,n),t},u.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then((function(t){return e.response=t,e.emitter.emit(a.EVENT_RESPONSE,t),t}),(function(t){throw e.error=t,e.emitter.emit(a.EVENT_ERROR,t),t}))},u.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},u.prototype.eachPage=function(e){var t=this;function n(n){e(null,n,(function(){delete t._nextPageRequest;var e=n.nextPage();e&&(t._nextPageRequest=e,o(e))}))}function r(t){e(t,null,(function(){}))}function o(e){e.send().then(n,r)}o(this)},u.prototype.clone=function(){return this._extend()},u.prototype._extend=function(e){var t=o(this._options,e);return new u(this.client,t)},e.exports=u},6238:(e,t,n)=>{"use strict";var r=n(7484);function o(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch(n){this.body=t.body}this.links=r(this.headers.link)}o.prototype.hasNextPage=function(){return!!this.links.next},o.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},e.exports=o},3487:e=>{"use strict";e.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},3104:e=>{"use strict";e.exports=function(e){var t={};return e?(e.trim().split(/[\r|\n]+/).forEach((function(e){var n=function(e){var t=e.indexOf(":");return{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()}}(e);t[n.name]=n.value})),t):t}},7484:e=>{"use strict";e.exports=function(e){return e?e.split(/,\s*</).reduce((function(e,t){var n=function(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),o=null,i=r.reduce((function(e,t){var n=function(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}(t);return n?"rel"===n.key?(o||(o=n.value),e):(e[n.key]=n.value,e):e}),{});return o?{url:n,rel:o,params:i}:null}(t);return n?(n.rel.split(/\s+/).forEach((function(t){e[t]||(e[t]={url:n.url,params:n.params})})),e):e}),{}):{}}},5141:e=>{"use strict";function t(e){return Array.isArray(e)?e.map(encodeURIComponent).join(","):encodeURIComponent(String(e))}function n(e,n,r){if(!1===r||null===r)return e;var o=/\?/.test(e)?"&":"?",i=encodeURIComponent(n);return void 0!==r&&""!==r&&!0!==r&&(i+="="+t(r)),""+e+o+i}e.exports={appendQueryObject:function(e,t){if(!t)return e;var r=e;return Object.keys(t).forEach((function(e){var o=t[e];void 0!==o&&(Array.isArray(o)&&(o=o.filter((function(e){return null!==e&&void 0!==e})).join(",")),r=n(r,e,o))})),r},appendQueryParam:n,prependOrigin:function(e,t){if(!t)return e;if("http"===e.slice(0,4))return e;var n="/"===e[0]?"":"/";return""+t.replace(/\/$/,"")+n+e},interpolateRouteParams:function(e,n){return n?e.replace(/\/:([a-zA-Z0-9]+)/g,(function(e,r){var o=n[r];if(void 0===o)throw new Error("Unspecified route parameter "+r);return"/"+t(o)})):e}}},9097:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,u,c=this._events[a],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,i),!0;case 6:return c.fn.call(c.context,t,r,o,i,s),!0}for(u=1,l=new Array(f-1);u<f;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),f){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,o);break;default:if(!l)for(d=1,l=new Array(f-1);d<f;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==t||o&&!a[l].once||r&&a[l].context!==r)&&u.push(a[l]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},7786:(e,t,n)=>{"use strict";var r=n(5217),o=n(7594),i=n(682),s={listDatasets:function(e){return r.assertShape({sortby:r.oneOf("created","modified")})(e),this.client.createRequest({method:"GET",path:"/datasets/v1/:ownerId",query:e?o(e,["sortby"]):{}})},createDataset:function(e){return r.assertShape({name:r.string,description:r.string})(e),this.client.createRequest({method:"POST",path:"/datasets/v1/:ownerId",body:e})},getMetadata:function(e){return r.assertShape({datasetId:r.required(r.string),description:r.string})(e),this.client.createRequest({method:"GET",path:"/datasets/v1/:ownerId/:datasetId",params:e})},updateMetadata:function(e){return r.assertShape({datasetId:r.required(r.string),name:r.string,description:r.string})(e),this.client.createRequest({method:"PATCH",path:"/datasets/v1/:ownerId/:datasetId",params:o(e,["datasetId"]),body:o(e,["name","description"])})},deleteDataset:function(e){return r.assertShape({datasetId:r.required(r.string)})(e),this.client.createRequest({method:"DELETE",path:"/datasets/v1/:ownerId/:datasetId",params:e})},listFeatures:function(e){return r.assertShape({datasetId:r.required(r.string),limit:r.number,start:r.string})(e),this.client.createRequest({method:"GET",path:"/datasets/v1/:ownerId/:datasetId/features",params:o(e,["datasetId"]),query:o(e,["limit","start"])})},putFeature:function(e){if(r.assertShape({datasetId:r.required(r.string),featureId:r.required(r.string),feature:r.required(r.plainObject)})(e),void 0!==e.feature.id&&e.feature.id!==e.featureId)throw new Error("featureId must match the id property of the feature");return this.client.createRequest({method:"PUT",path:"/datasets/v1/:ownerId/:datasetId/features/:featureId",params:o(e,["datasetId","featureId"]),body:e.feature})},getFeature:function(e){return r.assertShape({datasetId:r.required(r.string),featureId:r.required(r.string)})(e),this.client.createRequest({method:"GET",path:"/datasets/v1/:ownerId/:datasetId/features/:featureId",params:e})},deleteFeature:function(e){return r.assertShape({datasetId:r.required(r.string),featureId:r.required(r.string)})(e),this.client.createRequest({method:"DELETE",path:"/datasets/v1/:ownerId/:datasetId/features/:featureId",params:e})}};e.exports=i(s)},682:(e,t,n)=>{"use strict";var r=n(4690),o=n(6537);e.exports=function(e){return function(t){var n;n=r.prototype.isPrototypeOf(t)?t:o(t);var i=Object.create(e);return i.client=n,i}}},7594:e=>{"use strict";e.exports=function(e,t){var n=function(e,n){return-1!==t.indexOf(e)&&void 0!==n};return"function"===typeof t&&(n=t),Object.keys(e).filter((function(t){return n(t,e[t])})).reduce((function(t,n){return t[n]=e[n],t}),{})}},5217:(e,t,n)=>{"use strict";var r=n(49),o=n(6366);e.exports=r(o,{file:function(e){if("undefined"!==typeof window){if(e instanceof n.g.Blob||e instanceof n.g.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!==typeof e&&void 0===e.pipe)return"Filename or Readable stream"},date:function(e){var t="date";if("boolean"===typeof e)return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch(r){return t}},coordinates:function(e){return o.tuple(o.number,o.number)(e)},assertShape:function(e,t){return o.assert(o.strictShape(e),t)}})},9229:(e,t,n)=>{"use strict";var r=n(2511),o={};function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){if(o[e])return o[e];var t=e.split("."),n=t[0],s=t[1];if(!s)throw new Error("Invalid token");var a=function(e){try{return JSON.parse(r.decode(e))}catch(t){throw new Error("Invalid token")}}(s),l={usage:n,user:a.u};return i(a,"a")&&(l.authorization=a.a),i(a,"exp")&&(l.expires=1e3*a.exp),i(a,"iat")&&(l.created=1e3*a.iat),i(a,"scopes")&&(l.scopes=a.scopes),i(a,"client")&&(l.client=a.client),i(a,"ll")&&(l.lastLogin=a.ll),i(a,"iu")&&(l.impersonator=a.iu),o[e]=l,l}},8434:(e,t,n)=>{"use strict";var r=n(3678),o=n(2028),i=n(2488),s=n(2),a=n(7991),l=n(9269),u=n(2702),c=n(8317),f=n(1141),d=n(257),h=n(3913),p=n(3290),g=n(8887),m=n(2678),y=n(728),v=n(4696),b=n(8004),_=n(8358),w=o("SharedArrayBuffer.prototype.byteLength",!0),x=o("Date.prototype.getTime"),k=Object.getPrototypeOf,E=o("Object.prototype.toString"),S=s("%Set%",!0),T=o("Map.prototype.has",!0),P=o("Map.prototype.get",!0),A=o("Map.prototype.size",!0),O=o("Set.prototype.add",!0),C=o("Set.prototype.delete",!0),M=o("Set.prototype.has",!0),R=o("Set.prototype.size",!0);function j(e,t,n,r){for(var o,i=a(e);(o=i.next())&&!o.done;)if(U(t,o.value,n,r))return C(e,o.value),!0;return!1}function I(e){return"undefined"===typeof e?null:"object"!==typeof e?"symbol"!==typeof e&&("string"!==typeof e&&"number"!==typeof e||+e===+e):void 0}function L(e,t,n,o,i,s){var a=I(n);if(null!=a)return a;var l=P(t,a),u=r({},i,{strict:!1});return!("undefined"===typeof l&&!T(t,a)||!U(o,l,u,s))&&(!T(e,a)&&U(o,l,u,s))}function N(e,t,n){var r=I(n);return null!=r?r:M(t,r)&&!M(e,r)}function F(e,t,n,r,o,i){for(var s,l,u=a(e);(s=u.next())&&!s.done;)if(U(n,l=s.value,o,i)&&U(r,P(t,l),o,i))return C(e,l),!0;return!1}function U(e,t,n,o){var s=n||{};if(s.strict?u(e,t):e===t)return!0;if(y(e)!==y(t))return!1;if(!e||!t||"object"!==typeof e&&"object"!==typeof t)return s.strict?u(e,t):e==t;var l,C=o.has(e),I=o.has(t);if(C&&I){if(o.get(e)===o.get(t))return!0}else l={};return C||o.set(e,l),I||o.set(t,l),function(e,t,n,o){var s,l;if(typeof e!==typeof t)return!1;if(null==e||null==t)return!1;if(E(e)!==E(t))return!1;if(c(e)!==c(t))return!1;var u=f(e),y=f(t);if(u!==y)return!1;var C=e instanceof Error,I=t instanceof Error;if(C!==I)return!1;if((C||I)&&(e.name!==t.name||e.message!==t.message))return!1;var z=p(e),B=p(t);if(z!==B)return!1;if((z||B)&&(e.source!==t.source||i(e)!==i(t)))return!1;var W=h(e),q=h(t);if(W!==q)return!1;if((W||q)&&x(e)!==x(t))return!1;if(n.strict&&k&&k(e)!==k(t))return!1;var V=b(e),G=b(t);if(V!==G)return!1;if(V||G){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}var H=D(e),$=D(t);if(H!==$)return!1;if(H||$){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}var K=d(e),Y=d(t);if(K!==Y)return!1;if(K||Y)return _(e)===_(t)&&("function"===typeof Uint8Array&&U(new Uint8Array(e),new Uint8Array(t),n,o));var Q=g(e),Z=g(t);if(Q!==Z)return!1;if(Q||Z)return w(e)===w(t)&&("function"===typeof Uint8Array&&U(new Uint8Array(e),new Uint8Array(t),n,o));if(typeof e!==typeof t)return!1;var J=m(e),X=m(t);if(J.length!==X.length)return!1;for(J.sort(),X.sort(),s=J.length-1;s>=0;s--)if(J[s]!=X[s])return!1;for(s=J.length-1;s>=0;s--)if(!U(e[l=J[s]],t[l],n,o))return!1;var ee=v(e),te=v(t);if(ee!==te)return!1;if("Set"===ee||"Set"===te)return function(e,t,n,r){if(R(e)!==R(t))return!1;var o,i,s,l=a(e),u=a(t);for(;(o=l.next())&&!o.done;)if(o.value&&"object"===typeof o.value)s||(s=new S),O(s,o.value);else if(!M(t,o.value)){if(n.strict)return!1;if(!N(e,t,o.value))return!1;s||(s=new S),O(s,o.value)}if(s){for(;(i=u.next())&&!i.done;)if(i.value&&"object"===typeof i.value){if(!j(s,i.value,n.strict,r))return!1}else if(!n.strict&&!M(e,i.value)&&!j(s,i.value,n.strict,r))return!1;return 0===R(s)}return!0}(e,t,n,o);if("Map"===ee)return function(e,t,n,o){if(A(e)!==A(t))return!1;var i,s,l,u,c,f,d=a(e),h=a(t);for(;(i=d.next())&&!i.done;)if(u=i.value[0],c=i.value[1],u&&"object"===typeof u)l||(l=new S),O(l,u);else if("undefined"===typeof(f=P(t,u))&&!T(t,u)||!U(c,f,n,o)){if(n.strict)return!1;if(!L(e,t,u,c,n,o))return!1;l||(l=new S),O(l,u)}if(l){for(;(s=h.next())&&!s.done;)if(u=s.value[0],f=s.value[1],u&&"object"===typeof u){if(!F(l,e,u,f,n,o))return!1}else if(!n.strict&&(!e.has(u)||!U(P(e,u),f,n,o))&&!F(l,e,u,f,r({},n,{strict:!1}),o))return!1;return 0===R(l)}return!0}(e,t,n,o);return!0}(e,t,s,o)}function D(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&("function"===typeof e.copy&&"function"===typeof e.slice&&(!(e.length>0&&"number"!==typeof e[0])&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))))}e.exports=function(e,t,n){return U(e,t,n,l())}},8358:(e,t,n)=>{"use strict";var r=n(2028)("ArrayBuffer.prototype.byteLength",!0),o=n(257);e.exports=function(e){return o(e)?r?r(e):e.byteLength:NaN}},2511:function(e,t,n){var r;e=n.nmd(e),function(o){var i=t,s=(e&&e.exports,"object"==typeof n.g&&n.g);s.global!==s&&s.window;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new a(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,f={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,o,i=e.length%3,s="",a=-1,c=e.length-i;++a<c;)t=e.charCodeAt(a)<<16,n=e.charCodeAt(++a)<<8,r=e.charCodeAt(++a),s+=u.charAt((o=t+n+r)>>18&63)+u.charAt(o>>12&63)+u.charAt(o>>6&63)+u.charAt(63&o);return 2==i?(t=e.charCodeAt(a)<<8,n=e.charCodeAt(++a),s+=u.charAt((o=t+n)>>10)+u.charAt(o>>4&63)+u.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(a),s+=u.charAt(o>>2)+u.charAt(o<<4&63)+"=="),s},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,i="",s=-1;++s<t;)r=u.indexOf(e.charAt(s)),n=o%4?64*n+r:r,o++%4&&(i+=String.fromCharCode(255&n>>(-2*o&6)));return i},version:"0.1.0"};void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}()},2028:(e,t,n)=>{"use strict";var r=n(2),o=n(1712),i=o(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&i(e,".prototype.")>-1?o(n):n}},1712:(e,t,n)=>{"use strict";var r=n(3864),o=n(2),i=n(5438),s=n(4902),a=o("%Function.prototype.apply%"),l=o("%Function.prototype.call%"),u=o("%Reflect.apply%",!0)||r.call(l,a),c=n(2090),f=o("%Math.max%");e.exports=function(e){if("function"!==typeof e)throw new s("a function is required");var t=u(r,l,arguments);return i(t,1+f(0,e.length-(arguments.length-1)),!0)};var d=function(){return u(r,a,arguments)};c?c(e.exports,"apply",{value:d}):e.exports.apply=d},8301:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},1139:(e,t,n)=>{var r=n(8301),o=n(9849),i=Object.hasOwnProperty,s=Object.create(null);for(var a in r)i.call(r,a)&&(s[r[a]]=a);var l=e.exports={to:{},get:{}};function u(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}l.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=l.get.hsl(e),n="hsl";break;case"hwb":t=l.get.hwb(e),n="hwb";break;default:t=l.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},l.get.rgb=function(e){if(!e)return null;var t,n,o,s=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=t[2],t=t[1],n=0;n<3;n++){var a=2*n;s[n]=parseInt(t.slice(a,a+2),16)}o&&(s[3]=parseInt(o,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(o=(t=t[1])[3],n=0;n<3;n++)s[n]=parseInt(t[n]+t[n],16);o&&(s[3]=parseInt(o+o,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)s[n]=parseInt(t[n+1],0);t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:i.call(r,t[1])?((s=r[t[1]])[3]=1,s):null:null;for(n=0;n<3;n++)s[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}for(n=0;n<3;n++)s[n]=u(s[n],0,255);return s[3]=u(s[3],0,1),s},l.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var e=o(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},l.to.rgb=function(){var e=o(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},l.to.rgb.percent=function(){var e=o(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},l.to.hsl=function(){var e=o(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},l.to.hwb=function(){var e=o(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},l.to.keyword=function(e){return s[e.slice(0,3)]}},2995:(e,t,n)=>{const r=n(1139),o=n(1256),i=["keyword","gray","hex"],s={};for(const h of Object.keys(o))s[[...o[h].labels].sort().join("")]=h;const a={};function l(e,t){if(!(this instanceof l))return new l(e,t);if(t&&t in i&&(t=null),t&&!(t in o))throw new Error("Unknown model: "+t);let n,u;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof l)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"===typeof e){const t=r.get(e);if(null===t)throw new Error("Unable to parse color from string: "+e);this.model=t.model,u=o[this.model].channels,this.color=t.value.slice(0,u),this.valpha="number"===typeof t.value[u]?t.value[u]:1}else if(e.length>0){this.model=t||"rgb",u=o[this.model].channels;const n=Array.prototype.slice.call(e,0,u);this.color=d(n,u),this.valpha="number"===typeof e[u]?e[u]:1}else if("number"===typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;const t=Object.keys(e);"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"===typeof e.alpha?e.alpha:0);const r=t.sort().join("");if(!(r in s))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=s[r];const{labels:i}=o[this.model],a=[];for(n=0;n<i.length;n++)a.push(e[i[n]]);this.color=d(a)}if(a[this.model])for(u=o[this.model].channels,n=0;n<u;n++){const e=a[this.model][n];e&&(this.color[n]=e(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}l.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in r.to?this:this.rgb();t=t.round("number"===typeof e?e:1);const n=1===t.valpha?t.color:[...t.color,this.valpha];return r.to[t.model](n)},percentString(e){const t=this.rgb().round("number"===typeof e?e:1),n=1===t.valpha?t.color:[...t.color,this.valpha];return r.to.rgb.percent(n)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=o[this.model],{labels:n}=o[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new l([...this.color.map(u(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new l([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:c("rgb",0,f(255)),green:c("rgb",1,f(255)),blue:c("rgb",2,f(255)),hue:c(["hsl","hsv","hsl","hwb","hcg"],0,(e=>(e%360+360)%360)),saturationl:c("hsl",1,f(100)),lightness:c("hsl",2,f(100)),saturationv:c("hsv",1,f(100)),value:c("hsv",2,f(100)),chroma:c("hcg",1,f(100)),gray:c("hcg",2,f(100)),white:c("hwb",1,f(100)),wblack:c("hwb",2,f(100)),cyan:c("cmyk",0,f(100)),magenta:c("cmyk",1,f(100)),yellow:c("cmyk",2,f(100)),black:c("cmyk",3,f(100)),x:c("xyz",0,f(95.047)),y:c("xyz",1,f(100)),z:c("xyz",2,f(108.833)),l:c("lab",0,f(100)),a:c("lab",1),b:c("lab",2),keyword(e){return void 0!==e?new l(e):o[this.model].keyword(this.color)},hex(e){return void 0!==e?new l(e):r.to.hex(this.rgb().round().color)},hexa(e){if(void 0!==e)return new l(e);const t=this.rgb().round().color;let n=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===n.length&&(n="0"+n),r.to.hex(t)+n},rgbNumber(){const e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const e=r/255;t[n]=e<=.04045?e/12.92:((e+.055)/1.055)**2.4}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(2126*e[0]+7152*e[1]+722*e[2])/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return l.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),o=void 0===t?.5:t,i=2*o-1,s=n.alpha()-r.alpha(),a=((i*s===-1?i:(i+s)/(1+i*s))+1)/2,u=1-a;return l.rgb(a*n.red()+u*r.red(),a*n.green()+u*r.green(),a*n.blue()+u*r.blue(),n.alpha()*o+r.alpha()*(1-o))}};for(const h of Object.keys(o)){if(i.includes(h))continue;const{channels:e}=o[h];l.prototype[h]=function(){if(this.model===h)return new l(this);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length>0?new l(t,h):new l([...(r=o[this.model][h].raw(this.color),Array.isArray(r)?r:[r]),this.valpha],h);var r},l[h]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=n[0];return"number"===typeof o&&(o=d(n,e)),new l(o,h)}}function u(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}function c(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(a[r]||(a[r]=[]))[t]=n;return e=e[0],function(r){let o;return void 0!==r?(n&&(r=n(r)),o=this[e](),o.color[t]=r,o):(o=this[e]().color[t],n&&(o=n(o)),o)}}function f(e){return function(t){return Math.max(0,Math.min(e,t))}}function d(e,t){for(let n=0;n<t;n++)"number"!==typeof e[n]&&(e[n]=0);return e}e.exports=l},341:(e,t,n)=>{const r=n(458),o={};for(const s of Object.keys(r))o[r[s]]=s;const i={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=i;for(const s of Object.keys(i)){if(!("channels"in i[s]))throw new Error("missing channels property: "+s);if(!("labels"in i[s]))throw new Error("missing channel labels property: "+s);if(i[s].labels.length!==i[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:e,labels:t}=i[s];delete i[s].channels,delete i[s].labels,Object.defineProperty(i[s],"channels",{value:e}),Object.defineProperty(i[s],"labels",{value:t})}i.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=i-o;let a,l;i===o?a=0:t===i?a=(n-r)/s:n===i?a=2+(r-t)/s:r===i&&(a=4+(t-n)/s),a=Math.min(60*a,360),a<0&&(a+=360);const u=(o+i)/2;return l=i===o?0:u<=.5?s/(i+o):s/(2-i-o),[a,100*l,100*u]},i.rgb.hsv=function(e){let t,n,r,o,i;const s=e[0]/255,a=e[1]/255,l=e[2]/255,u=Math.max(s,a,l),c=u-Math.min(s,a,l),f=function(e){return(u-e)/6/c+.5};return 0===c?(o=0,i=0):(i=c/u,t=f(s),n=f(a),r=f(l),s===u?o=r-n:a===u?o=1/3+t-r:l===u&&(o=2/3+n-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*u]},i.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const o=i.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[o,100*s,100*r]},i.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.min(1-t,1-n,1-r);return[100*((1-t-o)/(1-o)||0),100*((1-n-o)/(1-o)||0),100*((1-r-o)/(1-o)||0),100*o]},i.rgb.keyword=function(e){const t=o[e];if(t)return t;let n,i=1/0;for(const o of Object.keys(r)){const t=r[o],l=(a=t,((s=e)[0]-a[0])**2+(s[1]-a[1])**2+(s[2]-a[2])**2);l<i&&(i=l,n=o)}var s,a;return n},i.keyword.rgb=function(e){return r[e]},i.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*t+.3576*n+.1805*r),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},i.rgb.lab=function(e){const t=i.rgb.xyz(e);let n=t[0],r=t[1],o=t[2];n/=95.047,r/=100,o/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*r-16,500*(n-r),200*(r-o)]},i.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let o,i,s;if(0===n)return s=255*r,[s,s,s];o=r<.5?r*(1+n):r+n-r*n;const a=2*r-o,l=[0,0,0];for(let u=0;u<3;u++)i=t+1/3*-(u-1),i<0&&i++,i>1&&i--,s=6*i<1?a+6*(o-a)*i:2*i<1?o:3*i<2?a+(o-a)*(2/3-i)*6:a,l[u]=255*s;return l},i.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,o=n;const i=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,o*=i<=1?i:2-i;return[t,100*(0===r?2*o/(i+o):2*n/(r+n)),100*((r+n)/2)]},i.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const o=Math.floor(t)%6,i=t-Math.floor(t),s=255*r*(1-n),a=255*r*(1-n*i),l=255*r*(1-n*(1-i));switch(r*=255,o){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}},i.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,o=Math.max(r,.01);let i,s;s=(2-n)*r;const a=(2-n)*o;return i=n*o,i/=a<=1?a:2-a,i=i||0,s/=2,[t,100*i,100*s]},i.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const o=n+r;let i;o>1&&(n/=o,r/=o);const s=Math.floor(6*t),a=1-r;i=6*t-s,0!==(1&s)&&(i=1-i);const l=n+i*(a-n);let u,c,f;switch(s){default:case 6:case 0:u=a,c=l,f=n;break;case 1:u=l,c=a,f=n;break;case 2:u=n,c=a,f=l;break;case 3:u=n,c=l,f=a;break;case 4:u=l,c=n,f=a;break;case 5:u=a,c=n,f=l}return[255*u,255*c,255*f]},i.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o))]},i.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let o,i,s;return o=3.2406*t+-1.5372*n+-.4986*r,i=-.9689*t+1.8758*n+.0415*r,s=.0557*t+-.204*n+1.057*r,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),[255*o,255*i,255*s]},i.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(t-n),200*(n-r)]},i.lab.xyz=function(e){let t,n,r;n=(e[0]+16)/116,t=e[1]/500+n,r=n-e[2]/200;const o=n**3,i=t**3,s=r**3;return n=o>.008856?o:(n-16/116)/7.787,t=i>.008856?i:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,t*=95.047,n*=100,r*=108.883,[t,n,r]},i.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let o;o=360*Math.atan2(r,n)/2/Math.PI,o<0&&(o+=360);return[t,Math.sqrt(n*n+r*r),o]},i.lch.lab=function(e){const t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,n*Math.cos(r),n*Math.sin(r)]},i.rgb.ansi16=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[n,r,o]=e;let s=null===t?i.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(o/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return 2===s&&(a+=60),a},i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])},i.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];if(t===n&&n===r)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},i.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},i.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},i.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map((e=>e+e)).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},i.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.max(Math.max(t,n),r),i=Math.min(Math.min(t,n),r),s=o-i;let a,l;return a=s<1?i/(1-s):0,l=s<=0?0:o===t?(n-r)/s%6:o===n?2+(r-t)/s:4+(t-n)/s,l/=6,l%=1,[360*l,100*s,100*a]},i.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let o=0;return r<1&&(o=(n-.5*r)/(1-r)),[e[0],100*r,100*o]},i.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},i.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];const o=[0,0,0],i=t%1*6,s=i%1,a=1-s;let l=0;switch(Math.floor(i)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-n)*r,[255*(n*o[0]+l),255*(n*o[1]+l),255*(n*o[2]+l)]},i.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},i.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},i.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},i.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,r=n-t;let o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},i.gray.hsl=function(e){return[0,0,e[0]]},i.gray.hsv=i.gray.hsl,i.gray.hwb=function(e){return[0,100,e[0]]},i.gray.cmyk=function(e){return[0,0,0,e[0]]},i.gray.lab=function(e){return[e[0],0,0]},i.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},i.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},1256:(e,t,n)=>{const r=n(341),o=n(6729),i={};Object.keys(r).forEach((e=>{i[e]={},Object.defineProperty(i[e],"channels",{value:r[e].channels}),Object.defineProperty(i[e],"labels",{value:r[e].labels});const t=o(e);Object.keys(t).forEach((n=>{const r=t[n];i[e][n]=function(e){const t=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];if(void 0===o||null===o)return o;o.length>1&&(n=o);const i=e(n);if("object"===typeof i)for(let e=i.length,s=0;s<e;s++)i[s]=Math.round(i[s]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}(r),i[e][n].raw=function(e){const t=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];return void 0===o||null===o?o:(o.length>1&&(n=o),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=i},6729:(e,t,n)=>{const r=n(341);function o(e){const t=function(){const e={},t=Object.keys(r);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;){const e=n.pop(),o=Object.keys(r[e]);for(let r=o.length,i=0;i<r;i++){const r=o[i],s=t[r];-1===s.distance&&(s.distance=t[e].distance+1,s.parent=e,n.unshift(r))}}return t}function i(e,t){return function(n){return t(e(n))}}function s(e,t){const n=[t[e].parent,e];let o=r[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),o=i(r[t[s].parent][s],o),s=t[s].parent;return o.conversion=n,o}e.exports=function(e){const t=o(e),n={},r=Object.keys(t);for(let o=r.length,i=0;i<o;i++){const e=r[i];null!==t[e].parent&&(n[e]=s(e,t))}return n}},458:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},4992:(e,t,n)=>{"use strict";var r=n(2090),o=n(2557),i=n(4902),s=n(5558);e.exports=function(e,t,n){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new i("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],f=!!s&&s(e,t);if(r)r(e,t,{configurable:null===u&&f?f.configurable:!u,enumerable:null===a&&f?f.enumerable:!a,value:n,writable:null===l&&f?f.writable:!l});else{if(!c&&(a||l||u))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},1779:(e,t,n)=>{"use strict";var r=n(2678),o="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),i=Object.prototype.toString,s=Array.prototype.concat,a=n(4992),l=n(2101)(),u=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if("function"!==typeof(o=r)||"[object Function]"!==i.call(o)||!r())return;var o;l?a(e,t,n,!0):a(e,t,n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},i=r(t);o&&(i=s.call(i,Object.getOwnPropertySymbols(t)));for(var a=0;a<i.length;a+=1)u(e,i[a],t[i[a]],n[i[a]])};c.supportsDescriptors=!!l,e.exports=c},2090:(e,t,n)=>{"use strict";var r=n(2)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(o){r=!1}e.exports=r},9820:e=>{"use strict";e.exports=EvalError},9304:e=>{"use strict";e.exports=Error},1725:e=>{"use strict";e.exports=RangeError},5077:e=>{"use strict";e.exports=ReferenceError},2557:e=>{"use strict";e.exports=SyntaxError},4902:e=>{"use strict";e.exports=TypeError},3094:e=>{"use strict";e.exports=URIError},1903:(e,t,n)=>{"use strict";var r=n(8799),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=n),"[object Array]"===o.call(e)?function(e,t,n){for(var r=0,o=e.length;r<o;r++)i.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,s):"string"===typeof e?function(e,t,n){for(var r=0,o=e.length;r<o;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,s):function(e,t,n){for(var r in e)i.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,s)}},7724:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var o=0;o<t.length;o+=1)n[o+e.length]=t[o];return n};e.exports=function(e){var o=this;if("function"!==typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,s=function(e,t){for(var n=[],r=t||0,o=0;r<e.length;r+=1,o+=1)n[o]=e[r];return n}(arguments,1),a=n(0,o.length-s.length),l=[],u=0;u<a;u++)l[u]="$"+u;if(i=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,r(s,arguments));return Object(t)===t?t:this}return o.apply(e,r(s,arguments))})),o.prototype){var c=function(){};c.prototype=o.prototype,i.prototype=new c,c.prototype=null}return i}},3864:(e,t,n)=>{"use strict";var r=n(7724);e.exports=Function.prototype.bind||r},7699:e=>{"use strict";var t=function(){return"string"===typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(o){n=null}t.functionsHaveConfigurableNames=function(){if(!t()||!n)return!1;var e=n((function(){}),"name");return!!e&&!!e.configurable};var r=Function.prototype.bind;t.boundFunctionsHaveNames=function(){return t()&&"function"===typeof r&&""!==function(){}.bind().name},e.exports=t},2:(e,t,n)=>{"use strict";var r,o=n(9304),i=n(9820),s=n(1725),a=n(5077),l=n(2557),u=n(4902),c=n(3094),f=Function,d=function(e){try{return f('"use strict"; return ('+e+").constructor;")()}catch(t){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(L){h=null}var p=function(){throw new u},g=h?function(){try{return p}catch(e){try{return h(arguments,"callee").get}catch(t){return p}}}():p,m=n(2108)(),y=n(951)(),v=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),b={},_="undefined"!==typeof Uint8Array&&v?v(Uint8Array):r,w={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":m&&v?v([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":f,"%GeneratorFunction%":b,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&v?v(v([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&m&&v?v((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&m&&v?v((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&v?v(""[Symbol.iterator]()):r,"%Symbol%":m?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":g,"%TypedArray%":_,"%TypeError%":u,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};if(v)try{null.error}catch(L){var x=v(v(L));w["%Error.prototype%"]=x}var k=function e(t){var n;if("%AsyncFunction%"===t)n=d("async function () {}");else if("%GeneratorFunction%"===t)n=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=d("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&v&&(n=v(o.prototype))}return w[t]=n,n},E={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=n(3864),T=n(4384),P=S.call(Function.call,Array.prototype.concat),A=S.call(Function.apply,Array.prototype.splice),O=S.call(Function.call,String.prototype.replace),C=S.call(Function.call,String.prototype.slice),M=S.call(Function.call,RegExp.prototype.exec),R=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j=/\\(\\)?/g,I=function(e,t){var n,r=e;if(T(E,r)&&(r="%"+(n=E[r])[0]+"%"),T(w,r)){var o=w[r];if(o===b&&(o=k(r)),"undefined"===typeof o&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===M(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=C(e,0,1),n=C(e,-1);if("%"===t&&"%"!==n)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var r=[];return O(e,R,(function(e,t,n,o){r[r.length]=n?O(o,j,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",o=I("%"+r+"%",t),i=o.name,s=o.value,a=!1,c=o.alias;c&&(r=c[0],A(n,P([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var p=n[f],g=C(p,0,1),m=C(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==p&&d||(a=!0),T(w,i="%"+(r+="."+p)+"%"))s=w[i];else if(null!=s){if(!(p in s)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(h&&f+1>=n.length){var y=h(s,p);s=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[p]}else d=T(s,p),s=s[p];d&&!a&&(w[i]=s)}}return s}},5558:(e,t,n)=>{"use strict";var r=n(2)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(o){r=null}e.exports=r},1977:e=>{"use strict";var t="undefined"!==typeof BigInt&&BigInt;e.exports=function(){return"function"===typeof t&&"function"===typeof BigInt&&"bigint"===typeof t(42)&&"bigint"===typeof BigInt(42)}},2101:(e,t,n)=>{"use strict";var r=n(2090),o=function(){return!!r};o.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},951:e=>{"use strict";var t={__proto__:null,foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof n)}},2108:(e,t,n)=>{"use strict";var r="undefined"!==typeof Symbol&&Symbol,o=n(9534);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&o())))}},9534:e=>{"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},4635:(e,t,n)=>{"use strict";var r=n(9534);e.exports=function(){return r()&&!!Symbol.toStringTag}},4384:(e,t,n)=>{"use strict";var r=Function.prototype.call,o=Object.prototype.hasOwnProperty,i=n(3864);e.exports=i.call(r,o)},6712:(e,t,n)=>{"use strict";var r=n(4384),o=n(9269)(),i=n(4902),s={assert:function(e,t){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new i("`O` is not an object");if("string"!==typeof t)throw new i("`slot` must be a string");if(o.assert(e),!s.has(e,t))throw new i("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new i("`O` is not an object");if("string"!==typeof t)throw new i("`slot` must be a string");var n=o.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new i("`O` is not an object");if("string"!==typeof t)throw new i("`slot` must be a string");var n=o.get(e);return!!n&&r(n,"$"+t)},set:function(e,t,n){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new i("`O` is not an object");if("string"!==typeof t)throw new i("`slot` must be a string");var r=o.get(e);r||(r={},o.set(e,r)),r["$"+t]=n}};Object.freeze&&Object.freeze(s),e.exports=s},8317:(e,t,n)=>{"use strict";var r=n(4635)(),o=n(2028)("Object.prototype.toString"),i=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},s=function(e){return!!i(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},a=function(){return i(arguments)}();i.isLegacyArguments=s,e.exports=a?i:s},257:(e,t,n)=>{"use strict";var r=n(1712),o=n(2028),i=n(2)("%ArrayBuffer%",!0),s=o("ArrayBuffer.prototype.byteLength",!0),a=o("Object.prototype.toString"),l=!!i&&!s&&new i(0).slice,u=!!l&&r(l);e.exports=s||u?function(e){if(!e||"object"!==typeof e)return!1;try{return s?s(e):u(e,0),!0}catch(t){return!1}}:i?function(e){return"[object ArrayBuffer]"===a(e)}:function(e){return!1}},3008:(e,t,n)=>{"use strict";if(n(1977)()){var r=BigInt.prototype.valueOf;e.exports=function(e){return null!==e&&"undefined"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e&&"number"!==typeof e&&"symbol"!==typeof e&&"function"!==typeof e&&("bigint"===typeof e||function(e){try{return r.call(e),!0}catch(t){}return!1}(e))}}else e.exports=function(e){return!1}},7787:(e,t,n)=>{"use strict";var r=n(2028),o=r("Boolean.prototype.toString"),i=r("Object.prototype.toString"),s=n(4635)();e.exports=function(e){return"boolean"===typeof e||null!==e&&"object"===typeof e&&(s&&Symbol.toStringTag in e?function(e){try{return o(e),!0}catch(t){return!1}}(e):"[object Boolean]"===i(e))}},8799:e=>{"use strict";var t,n,r=Function.prototype.toString,o="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof o&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},o((function(){throw 42}),null,t)}catch(h){h!==n&&(o=null)}else o=null;var i=/^\s*class\b/,s=function(e){try{var t=r.call(e);return i.test(t)}catch(n){return!1}},a=function(e){try{return!s(e)&&(r.call(e),!0)}catch(t){return!1}},l=Object.prototype.toString,u="function"===typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),f=function(){return!1};if("object"===typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(f=function(e){if((c||!e)&&("undefined"===typeof e||"object"===typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(n){}return!1})}e.exports=o?function(e){if(f(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;try{o(e,null,t)}catch(r){if(r!==n)return!1}return!s(e)&&a(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if(u)return a(e);if(s(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&a(e)}},3913:(e,t,n)=>{"use strict";var r=Date.prototype.getDay,o=Object.prototype.toString,i=n(4635)();e.exports=function(e){return"object"===typeof e&&null!==e&&(i?function(e){try{return r.call(e),!0}catch(t){return!1}}(e):"[object Date]"===o.call(e))}},1787:e=>{"use strict";var t,n="function"===typeof Map&&Map.prototype?Map:null,r="function"===typeof Set&&Set.prototype?Set:null;n||(t=function(e){return!1});var o=n?Map.prototype.has:null,i=r?Set.prototype.has:null;t||o||(t=function(e){return!1}),e.exports=t||function(e){if(!e||"object"!==typeof e)return!1;try{if(o.call(e),i)try{i.call(e)}catch(t){return!0}return e instanceof n}catch(t){}return!1}},2042:(e,t,n)=>{"use strict";var r=Number.prototype.toString,o=Object.prototype.toString,i=n(4635)();e.exports=function(e){return"number"===typeof e||"object"===typeof e&&(i?function(e){try{return r.call(e),!0}catch(t){return!1}}(e):"[object Number]"===o.call(e))}},8313:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n;return"[object Object]"===t.call(e)&&(null===(n=Object.getPrototypeOf(e))||n===Object.getPrototypeOf({}))}},3290:(e,t,n)=>{"use strict";var r,o,i,s,a=n(2028),l=n(4635)();if(l){r=a("Object.prototype.hasOwnProperty"),o=a("RegExp.prototype.exec"),i={};var u=function(){throw i};s={toString:u,valueOf:u},"symbol"===typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var c=a("Object.prototype.toString"),f=Object.getOwnPropertyDescriptor;e.exports=l?function(e){if(!e||"object"!==typeof e)return!1;var t=f(e,"lastIndex");if(!(t&&r(t,"value")))return!1;try{o(e,s)}catch(n){return n===i}}:function(e){return!(!e||"object"!==typeof e&&"function"!==typeof e)&&"[object RegExp]"===c(e)}},869:e=>{"use strict";var t,n="function"===typeof Map&&Map.prototype?Map:null,r="function"===typeof Set&&Set.prototype?Set:null;r||(t=function(e){return!1});var o=n?Map.prototype.has:null,i=r?Set.prototype.has:null;t||i||(t=function(e){return!1}),e.exports=t||function(e){if(!e||"object"!==typeof e)return!1;try{if(i.call(e),o)try{o.call(e)}catch(t){return!0}return e instanceof r}catch(t){}return!1}},8887:(e,t,n)=>{"use strict";var r=n(2028)("SharedArrayBuffer.prototype.byteLength",!0);e.exports=r?function(e){if(!e||"object"!==typeof e)return!1;try{return r(e),!0}catch(t){return!1}}:function(e){return!1}},5766:(e,t,n)=>{"use strict";var r=String.prototype.valueOf,o=Object.prototype.toString,i=n(4635)();e.exports=function(e){return"string"===typeof e||"object"===typeof e&&(i?function(e){try{return r.call(e),!0}catch(t){return!1}}(e):"[object String]"===o.call(e))}},4107:(e,t,n)=>{"use strict";var r=Object.prototype.toString;if(n(2108)()){var o=Symbol.prototype.toString,i=/^Symbol\(.*\)$/;e.exports=function(e){if("symbol"===typeof e)return!0;if("[object Symbol]"!==r.call(e))return!1;try{return function(e){return"symbol"===typeof e.valueOf()&&i.test(o.call(e))}(e)}catch(t){return!1}}}else e.exports=function(e){return!1}},2735:e=>{"use strict";var t,n="function"===typeof WeakMap&&WeakMap.prototype?WeakMap:null,r="function"===typeof WeakSet&&WeakSet.prototype?WeakSet:null;n||(t=function(e){return!1});var o=n?n.prototype.has:null,i=r?r.prototype.has:null;t||o||(t=function(e){return!1}),e.exports=t||function(e){if(!e||"object"!==typeof e)return!1;try{if(o.call(e,o),i)try{i.call(e,i)}catch(t){return!0}return e instanceof n}catch(t){}return!1}},6641:(e,t,n)=>{"use strict";var r=n(2),o=n(2028),i=r("%WeakSet%",!0),s=o("WeakSet.prototype.has",!0);if(s){var a=o("WeakMap.prototype.has",!0);e.exports=function(e){if(!e||"object"!==typeof e)return!1;try{if(s(e,s),a)try{a(e,a)}catch(t){return!0}return e instanceof i}catch(t){}return!1}}else e.exports=function(e){return!1}},1141:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},2123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var i,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in i=Object(arguments[l]))n.call(i,u)&&(a[u]=i[u]);if(t){s=t(i);for(var c=0;c<s.length;c++)r.call(i,s[c])&&(a[s[c]]=i[s[c]])}}return a}},8206:(e,t,n)=>{var r="function"===typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&o&&"function"===typeof o.get?o.get:null,s=r&&Map.prototype.forEach,a="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"===typeof l.get?l.get:null,c=a&&Set.prototype.forEach,f="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,g=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,_=String.prototype.toUpperCase,w=String.prototype.toLowerCase,x=RegExp.prototype.test,k=Array.prototype.concat,E=Array.prototype.join,S=Array.prototype.slice,T=Math.floor,P="function"===typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,C="function"===typeof Symbol&&"object"===typeof Symbol.iterator,M="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===C||"symbol")?Symbol.toStringTag:null,R=Object.prototype.propertyIsEnumerable,j=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function I(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var r=e<0?-T(-e):T(e);if(r!==e){var o=String(r),i=v.call(t,o.length+1);return b.call(o,n,"$&_")+"."+b.call(b.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,n,"$&_")}var L=n(2634),N=L.custom,F=W(N)?N:null;function U(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function D(e){return b.call(String(e),/"/g,"&quot;")}function z(e){return"[object Array]"===G(e)&&(!M||!("object"===typeof e&&M in e))}function B(e){return"[object RegExp]"===G(e)&&(!M||!("object"===typeof e&&M in e))}function W(e){if(C)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!O)return!1;try{return O.call(e),!0}catch(t){}return!1}e.exports=function e(t,r,o,a){var l=r||{};if(V(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(l,"maxStringLength")&&("number"===typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=!V(l,"customInspect")||l.customInspect;if("boolean"!==typeof g&&"symbol"!==g)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(l,"numericSeparator")&&"boolean"!==typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var _=l.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return $(t,l);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var x=String(t);return _?I(t,x):x}if("bigint"===typeof t){var T=String(t)+"n";return _?I(t,T):T}var A="undefined"===typeof l.depth?5:l.depth;if("undefined"===typeof o&&(o=0),o>=A&&A>0&&"object"===typeof t)return z(t)?"[Array]":"[Object]";var N=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=E.call(Array(e.indent+1)," ")}return{base:n,prev:E.call(Array(t+1),n)}}(l,o);if("undefined"===typeof a)a=[];else if(H(a,t)>=0)return"[Circular]";function q(t,n,r){if(n&&(a=S.call(a)).push(n),r){var i={depth:l.depth};return V(l,"quoteStyle")&&(i.quoteStyle=l.quoteStyle),e(t,i,o+1,a)}return e(t,l,o+1,a)}if("function"===typeof t&&!B(t)){var K=function(e){if(e.name)return e.name;var t=y.call(m.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=X(t,q);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(ee.length>0?" { "+E.call(ee,", ")+" }":"")}if(W(t)){var te=C?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(t);return"object"!==typeof t||C?te:Y(te)}if(function(e){if(!e||"object"!==typeof e)return!1;if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"===typeof e.nodeName&&"function"===typeof e.getAttribute}(t)){for(var ne="<"+w.call(String(t.nodeName)),re=t.attributes||[],oe=0;oe<re.length;oe++)ne+=" "+re[oe].name+"="+U(D(re[oe].value),"double",l);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+w.call(String(t.nodeName))+">"}if(z(t)){if(0===t.length)return"[]";var ie=X(t,q);return N&&!function(e){for(var t=0;t<e.length;t++)if(H(e[t],"\n")>=0)return!1;return!0}(ie)?"["+J(ie,N)+"]":"[ "+E.call(ie,", ")+" ]"}if(function(e){return"[object Error]"===G(e)&&(!M||!("object"===typeof e&&M in e))}(t)){var se=X(t,q);return"cause"in Error.prototype||!("cause"in t)||R.call(t,"cause")?0===se.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.call(se,", ")+" }":"{ ["+String(t)+"] "+E.call(k.call("[cause]: "+q(t.cause),se),", ")+" }"}if("object"===typeof t&&g){if(F&&"function"===typeof t[F]&&L)return L(t,{depth:A-o});if("symbol"!==g&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!==typeof e)return!1;try{i.call(e);try{u.call(e)}catch(ne){return!0}return e instanceof Map}catch(t){}return!1}(t)){var ae=[];return s&&s.call(t,(function(e,n){ae.push(q(n,t,!0)+" => "+q(e,t))})),Z("Map",i.call(t),ae,N)}if(function(e){if(!u||!e||"object"!==typeof e)return!1;try{u.call(e);try{i.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var le=[];return c&&c.call(t,(function(e){le.push(q(e,t))})),Z("Set",u.call(t),le,N)}if(function(e){if(!f||!e||"object"!==typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(ne){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return Q("WeakMap");if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(ne){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return Q("WeakSet");if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{return h.call(e),!0}catch(t){}return!1}(t))return Q("WeakRef");if(function(e){return"[object Number]"===G(e)&&(!M||!("object"===typeof e&&M in e))}(t))return Y(q(Number(t)));if(function(e){if(!e||"object"!==typeof e||!P)return!1;try{return P.call(e),!0}catch(t){}return!1}(t))return Y(q(P.call(t)));if(function(e){return"[object Boolean]"===G(e)&&(!M||!("object"===typeof e&&M in e))}(t))return Y(p.call(t));if(function(e){return"[object String]"===G(e)&&(!M||!("object"===typeof e&&M in e))}(t))return Y(q(String(t)));if("undefined"!==typeof window&&t===window)return"{ [object Window] }";if("undefined"!==typeof globalThis&&t===globalThis||"undefined"!==typeof n.g&&t===n.g)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===G(e)&&(!M||!("object"===typeof e&&M in e))}(t)&&!B(t)){var ue=X(t,q),ce=j?j(t)===Object.prototype:t instanceof Object||t.constructor===Object,fe=t instanceof Object?"":"null prototype",de=!ce&&M&&Object(t)===t&&M in t?v.call(G(t),8,-1):fe?"Object":"",he=(ce||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(de||fe?"["+E.call(k.call([],de||[],fe||[]),": ")+"] ":"");return 0===ue.length?he+"{}":N?he+"{"+J(ue,N)+"}":he+"{ "+E.call(ue,", ")+" }"}return String(t)};var q=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return q.call(e,t)}function G(e){return g.call(e)}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function $(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return $(v.call(e,0,t.maxStringLength),t)+r}return U(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+_.call(t.toString(16))}function Y(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function Z(e,t,n,r){return e+" ("+t+") {"+(r?J(n,r):E.call(n,", "))+"}"}function J(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+E.call(e,","+n)+"\n"+t.prev}function X(e,t){var n=z(e),r=[];if(n){r.length=e.length;for(var o=0;o<e.length;o++)r[o]=V(e,o)?t(e[o],e):""}var i,s="function"===typeof A?A(e):[];if(C){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var l in e)V(e,l)&&(n&&String(Number(l))===l&&l<e.length||C&&i["$"+l]instanceof Symbol||(x.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"===typeof A)for(var u=0;u<s.length;u++)R.call(e,s[u])&&r.push("["+t(s[u])+"]: "+t(e[s[u]],e));return r}},7974:e=>{"use strict";var t=function(e){return e!==e};e.exports=function(e,n){return 0===e&&0===n?1/e===1/n:e===n||!(!t(e)||!t(n))}},2702:(e,t,n)=>{"use strict";var r=n(1779),o=n(1712),i=n(7974),s=n(3799),a=n(5289),l=o(s(),Object);r(l,{getPolyfill:s,implementation:i,shim:a}),e.exports=l},3799:(e,t,n)=>{"use strict";var r=n(7974);e.exports=function(){return"function"===typeof Object.is?Object.is:r}},5289:(e,t,n)=>{"use strict";var r=n(3799),o=n(1779);e.exports=function(){var e=r();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},1038:(e,t,n)=>{"use strict";var r;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=n(234),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{f(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(e){var t=null!==e&&"object"===typeof e,n="[object Function]"===i.call(e),r=s(e),a=t&&"[object String]"===i.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=u&&n;if(a&&e.length>0&&!o.call(e,0))for(var g=0;g<e.length;++g)d.push(String(g));if(r&&e.length>0)for(var m=0;m<e.length;++m)d.push(String(m));else for(var y in e)p&&"prototype"===y||!o.call(e,y)||d.push(String(y));if(l)for(var v=function(e){if("undefined"===typeof window||!h)return f(e);try{return f(e)}catch(t){return!1}}(e),b=0;b<c.length;++b)v&&"constructor"===c[b]||!o.call(e,c[b])||d.push(c[b]);return d}}e.exports=r},2678:(e,t,n)=>{"use strict";var r=Array.prototype.slice,o=n(234),i=Object.keys,s=i?function(e){return i(e)}:n(1038),a=Object.keys;s.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?a(r.call(e)):a(e)})}else Object.keys=s;return Object.keys||s},e.exports=s},234:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},5590:(e,t,n)=>{"use strict";var r=n(2678),o=n(9534)(),i=n(2028),s=Object,a=i("Array.prototype.push"),l=i("Object.prototype.propertyIsEnumerable"),u=o?Object.getOwnPropertySymbols:null;e.exports=function(e,t){if(null==e)throw new TypeError("target must be an object");var n=s(e);if(1===arguments.length)return n;for(var i=1;i<arguments.length;++i){var c=s(arguments[i]),f=r(c),d=o&&(Object.getOwnPropertySymbols||u);if(d)for(var h=d(c),p=0;p<h.length;++p){var g=h[p];l(c,g)&&a(f,g)}for(var m=0;m<f.length;++m){var y=f[m];if(l(c,y)){var v=c[y];n[y]=v}}}return n}},3678:(e,t,n)=>{"use strict";var r=n(1779),o=n(1712),i=n(5590),s=n(7095),a=n(7161),l=o.apply(s()),u=function(e,t){return l(Object,arguments)};r(u,{getPolyfill:s,implementation:i,shim:a}),e.exports=u},7095:(e,t,n)=>{"use strict";var r=n(5590);e.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var o=Object.assign({},n),i="";for(var s in o)i+=s;return e!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?r:Object.assign:r}},7161:(e,t,n)=>{"use strict";var r=n(1779),o=n(7095);e.exports=function(){var e=o();return r(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e}},6929:function(e){e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=function(){function e(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return e}();function o(e,t){return e>t?1:e<t?-1:0}function i(e,t,n){for(var o=new r(null,null),i=o,s=o;;){var a=n(e,t.key);if(a<0){if(null===t.left)break;if(n(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,null===(t=l).left)break}s.left=t,s=t,t=t.left}else{if(!(a>0))break;if(null===t.right)break;if(n(e,t.right.key)>0&&(l=t.right,t.right=l.left,l.left=t,null===(t=l).right))break;i.right=t,i=t,t=t.right}}return i.right=t.left,s.left=t.right,t.left=o.right,t.right=o.left,t}function s(e,t,n,o){var s=new r(e,t);if(null===n)return s.left=s.right=null,s;var a=o(e,(n=i(e,n,o)).key);return a<0?(s.left=n.left,s.right=n,n.left=null):a>=0&&(s.right=n.right,s.left=n,n.right=null),s}function a(e,t,n){var r=null,o=null;if(t){var s=n((t=i(e,t,n)).key,e);0===s?(r=t.left,o=t.right):s<0?(o=t.right,t.right=null,r=t):(r=t.left,t.left=null,o=t)}return{left:r,right:o}}function l(e,t,n){return null===t?e:(null===e||((t=i(e.key,t,n)).left=e),t)}function u(e,t,n,r,o){if(e){r(t+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+o(e)+"\n");var i=t+(n?"    ":"\u2502   ");e.left&&u(e.left,i,!1,r,o),e.right&&u(e.right,i,!0,r,o)}}var c=function(){function e(e){void 0===e&&(e=o),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=s(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var n=new r(e,t);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var o=this._comparator,s=i(e,this._root,o),a=o(e,s.key);return 0===a?this._root=s:(a<0?(n.left=s.left,n.right=s,s.left=null):a>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,n){var r;return null===t?null:0===n(e,(t=i(e,t,n)).key)?(null===t.left?r=t.right:(r=i(e,t.left,n)).right=t.right,this._size--,r):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=i(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return t;t=r<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=i(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var n=this._root,r=[],o=!1;!o;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),e.call(t,n),n=n.right):o=!0;return this},e.prototype.range=function(e,t,n,r){for(var o=[],i=this._comparator,s=this._root;0!==o.length||s;)if(s)o.push(s),s=s.left;else{if(i((s=o.pop()).key,t)>0)break;if(i(s.key,e)>=0&&n.call(r,s))return this;s=s.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var n=t.key;return e.push(n)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var n=t.data;return e.push(n)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,n=!1,r=0,o=[];!n;)if(t)o.push(t),t=t.left;else if(o.length>0){if(t=o.pop(),r===e)return t;r++,t=t.right}else n=!0;return null},e.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(0===o)break;o<0?(n=t,t=t.left):t=t.right}return n},e.prototype.prev=function(e){var t=this._root,n=null;if(null!==e.left){for(n=e.left;n.right;)n=n.right;return n}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(0===o)break;o<0?t=t.left:(n=t,t=t.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return h(this._root)},e.prototype.load=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=e.length,o=this._comparator;if(n&&m(e,t,0,r-1,o),null===this._root)this._root=f(e,t,0,r),this._size=r;else{var i=g(this.toList(),d(e,t),o);r=this._size+r,this._root=p({head:i},0,r)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return u(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,n){var r=this._comparator,o=a(e,this._root,r),i=o.left,u=o.right;r(e,t)<0?u=s(t,n,u,r):i=s(t,n,i,r),this._root=l(i,u,r)},e.prototype.split=function(e){return a(e,this._root,this._comparator)},e}();function f(e,t,n,o){var i=o-n;if(i>0){var s=n+Math.floor(i/2),a=e[s],l=t[s],u=new r(a,l);return u.left=f(e,t,n,s),u.right=f(e,t,s+1,o),u}return null}function d(e,t){for(var n=new r(null,null),o=n,i=0;i<e.length;i++)o=o.next=new r(e[i],t[i]);return o.next=null,n.next}function h(e){for(var t=e,n=[],o=!1,i=new r(null,null),s=i;!o;)t?(n.push(t),t=t.left):n.length>0?t=(t=s=s.next=n.pop()).right:o=!0;return s.next=null,i.next}function p(e,t,n){var r=n-t;if(r>0){var o=t+Math.floor(r/2),i=p(e,t,o),s=e.head;return s.left=i,e.head=e.head.next,s.right=p(e,o+1,n),s}return null}function g(e,t,n){for(var o=new r(null,null),i=o,s=e,a=t;null!==s&&null!==a;)n(s.key,a.key)<0?(i.next=s,s=s.next):(i.next=a,a=a.next),i=i.next;return null!==s?i.next=s:null!==a&&(i.next=a),o.next}function m(e,t,n,r,o){if(!(n>=r)){for(var i=e[n+r>>1],s=n-1,a=r+1;;){do{s++}while(o(e[s],i)<0);do{a--}while(o(e[a],i)>0);if(s>=a)break;var l=e[s];e[s]=e[a],e[a]=l,l=t[s],t[s]=t[a],t[a]=l}m(e,t,n,a,o),m(e,t,a+1,r,o)}}var y=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},v=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:n,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:r,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}},b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var _=b*b,w=function(e,t){if(-b<e&&e<b&&-b<t&&t<b)return 0;var n=e-t;return n*n<_*e*t?0:e<t?-1:1},x=function(){function t(){e(this,t),this.reset()}return n(t,[{key:"reset",value:function(){this.xRounder=new k,this.yRounder=new k}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),k=function(){function t(){e(this,t),this.tree=new c,this.round(0)}return n(t,[{key:"round",value:function(e){var t=this.tree.add(e),n=this.tree.prev(t);if(null!==n&&0===w(t.key,n.key))return this.tree.remove(e),n.key;var r=this.tree.next(t);return null!==r&&0===w(t.key,r.key)?(this.tree.remove(e),r.key):e}}]),t}(),E=new x,S=function(e,t){return e.x*t.y-e.y*t.x},T=function(e,t){return e.x*t.x+e.y*t.y},P=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y},i=S(r,o);return w(i,0)},A=function(e){return Math.sqrt(T(e,e))},O=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return S(o,r)/A(o)/A(r)},C=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return T(o,r)/A(o)/A(r)},M=function(e,t,n){return 0===t.y?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},R=function(e,t,n){return 0===t.x?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},j=function(e,t,n,r){if(0===t.x)return R(n,r,e.x);if(0===r.x)return R(e,t,n.x);if(0===t.y)return M(n,r,e.y);if(0===r.y)return M(e,t,n.y);var o=S(t,r);if(0==o)return null;var i={x:n.x-e.x,y:n.y-e.y},s=S(i,t)/o,a=S(i,r)/o;return{x:(e.x+a*t.x+(n.x+s*r.x))/2,y:(e.y+a*t.y+(n.y+s*r.y))/2}},I=function(){function t(n,r){e(this,t),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:N.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),n(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,r=t.length;n<r;n++){var o=t[n];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(void 0===n.segment.consumedBy)for(var r=t+1;r<e;r++){var o=this.point.events[r];void 0===o.consumedBy&&n.otherSE.point.events===o.otherSE.point.events&&n.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,n=new Map,r=function(r){var o=r.otherSE;n.set(r,{sine:O(t.point,e.point,o.point),cosine:C(t.point,e.point,o.point)})};return function(e,t){n.has(e)||r(e),n.has(t)||r(t);var o=n.get(e),i=o.sine,s=o.cosine,a=n.get(t),l=a.sine,u=a.cosine;return i>=0&&l>=0?s<u?1:s>u?-1:0:i<0&&l<0?s<u?-1:s>u?1:0:l<i?-1:l>i?1:0}}}]),t}(),L=0,N=function(){function t(n,r,o,i){e(this,t),this.id=++L,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=o,this.windings=i}return n(t,null,[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,r=t.leftSE.point.x,o=e.rightSE.point.x,i=t.rightSE.point.x;if(i<n)return 1;if(o<r)return-1;var s=e.leftSE.point.y,a=t.leftSE.point.y,l=e.rightSE.point.y,u=t.rightSE.point.y;if(n<r){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;var c=e.comparePoint(t.leftSE.point);if(c<0)return 1;if(c>0)return-1;var f=t.comparePoint(e.rightSE.point);return 0!==f?f:-1}if(n>r){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;var d=t.comparePoint(e.leftSE.point);if(0!==d)return d;var h=e.comparePoint(t.rightSE.point);return h<0?1:h>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(o<i){var p=t.comparePoint(e.rightSE.point);if(0!==p)return p}if(o>i){var g=e.comparePoint(t.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(o!==i){var m=l-s,y=o-n,v=u-a,b=i-r;if(m>y&&v<b)return 1;if(m<y&&v>b)return-1}return o>i?1:o<i||l<u?-1:l>u?1:e.id<t.id?-1:e.id>t.id?1:0}}]),n(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;var o=(e.y-t.y)/r.y,i=t.x+o*r.x;if(e.x===i)return 0;var s=(e.x-t.x)/r.x,a=t.y+s*r.y;return e.y===a?0:e.y<a?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),r=v(t,n);if(null===r)return null;var o=this.leftSE.point,i=this.rightSE.point,s=e.leftSE.point,a=e.rightSE.point,l=y(t,s)&&0===this.comparePoint(s),u=y(n,o)&&0===e.comparePoint(o),c=y(t,a)&&0===this.comparePoint(a),f=y(n,i)&&0===e.comparePoint(i);if(u&&l)return f&&!c?i:!f&&c?a:null;if(u)return c&&o.x===a.x&&o.y===a.y?null:o;if(l)return f&&i.x===s.x&&i.y===s.y?null:s;if(f&&c)return null;if(f)return i;if(c)return a;var d=j(o,this.vector(),s,e.vector());return null===d?null:y(r,d)?E.round(d.x,d.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,o=new I(e,!0),i=new I(e,!1),s=this.rightSE;this.replaceRightSE(i),n.push(i),n.push(o);var a=new t(o,s,this.rings.slice(),this.windings.slice());return I.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),I.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(o.checkForConsuming(),i.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var o=t.compare(n,r);if(0!==o){if(o>0){var i=n;n=r,r=i}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,l=r.rings.length;a<l;a++){var u=r.rings[a],c=r.windings[a],f=n.rings.indexOf(u);-1===f?(n.rings.push(u),n.windings.push(c)):n.windings[f]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,o=0,i=this.rings.length;o<i;o++){var s=this.rings[o],a=this.windings[o],l=t.indexOf(s);-1===l?(t.push(s),n.push(a)):n[l]+=a}for(var u=[],c=[],f=0,d=t.length;f<d;f++)if(0!==n[f]){var h=t[f],p=h.poly;if(-1===c.indexOf(p))if(h.isExterior)u.push(p);else{-1===c.indexOf(p)&&c.push(p);var g=u.indexOf(h.poly);-1!==g&&u.splice(g,1)}}for(var m=0,y=u.length;m<y;m++){var v=u[m].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(H.type){case"union":var n=0===e.length,r=0===t.length;this._isInResult=n!==r;break;case"intersection":var o,i;e.length<t.length?(o=e.length,i=t.length):(o=t.length,i=e.length),this._isInResult=i===H.numMultiPolys&&o<i;break;case"xor":var s=Math.abs(e.length-t.length);this._isInResult=s%2===1;break;case"difference":var a=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=a(e)!==a(t);break;default:throw new Error("Unrecognized operation type found ".concat(H.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var o,i,s,a=I.comparePoints(e,n);if(a<0)o=e,i=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));o=n,i=e,s=-1}return new t(new I(o,!0),new I(i,!1),[r],[s])}}]),t}(),F=function(){function t(n,r,o){if(e(this,t),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=o,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=E.round(n[0][0],n[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var s=i,a=1,l=n.length;a<l;a++){if("number"!==typeof n[a][0]||"number"!==typeof n[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=E.round(n[a][0],n[a][1]);u.x===s.x&&u.y===s.y||(this.segments.push(N.fromRing(s,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),s=u)}i.x===s.x&&i.y===s.y||this.segments.push(N.fromRing(s,i,this))}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}}]),t}(),U=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var o=1,i=n.length;o<i;o++){var s=new F(n[o],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=r}return n(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var r=this.interiorRings[t].getSweepEvents(),o=0,i=r.length;o<i;o++)e.push(r[o]);return e}}]),t}(),D=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(a){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var o=0,i=n.length;o<i;o++){var s=new U(n[o],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=r}return n(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var r=this.polys[t].getSweepEvents(),o=0,i=r.length;o<i;o++)e.push(r[o]);return e}}]),t}(),z=function(){function t(n){e(this,t),this.events=n;for(var r=0,o=n.length;r<o;r++)n[r].segment.ringOut=this;this.poly=null}return n(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];if(i.isInResult()&&!i.ringOut){for(var s=null,a=i.leftSE,l=i.rightSE,u=[a],c=a.point,f=[];s=a,a=l,u.push(a),a.point!==c;)for(;;){var d=a.getAvailableLinkedEvents();if(0===d.length){var h=u[0].point,p=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(p.x,", ").concat(p.y,"]."))}if(1===d.length){l=d[0].otherSE;break}for(var g=null,m=0,y=f.length;m<y;m++)if(f[m].point===a.point){g=m;break}if(null===g){f.push({index:u.length,point:a.point});var v=a.getLeftmostComparator(s);l=d.sort(v)[0].otherSE;break}var b=f.splice(g)[0],_=u.splice(b.index);_.unshift(_[0].otherSE),n.push(new t(_.reverse()))}n.push(new t(u))}}return n}}]),n(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,r=this.events.length-1;n<r;n++){var o=this.events[n].point,i=this.events[n+1].point;0!==P(o,e,i)&&(t.push(o),e=o)}if(1===t.length)return null;var s=t[0],a=t[1];0===P(s,e,a)&&t.shift(),t.push(t[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:t.length-1,c=this.isExteriorRing()?t.length:-1,f=[],d=u;d!=c;d+=l)f.push([t[d].x,t[d].y]);return f}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var r=this.events[t];I.compare(e,r)>0&&(e=r)}for(var o=e.segment.prevInResult(),i=o?o.prevInResult():null;;){if(!o)return null;if(!i)return o.ringOut;if(i.ringOut!==o.ringOut)return i.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=i.prevInResult(),i=o?o.prevInResult():null}}}]),t}(),B=function(){function t(n){e(this,t),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,n=this.interiorRings.length;t<n;t++){var r=this.interiorRings[t].getGeom();null!==r&&e.push(r)}return e}}]),t}(),W=function(){function t(n){e(this,t),this.rings=n,this.polys=this._composePolys(n)}return n(t,[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var r=this.polys[t].getGeom();null!==r&&e.push(r)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];if(!o.poly)if(o.isExteriorRing())t.push(new B(o));else{var i=o.enclosingRing();i.poly||t.push(new B(i)),i.poly.addInterior(o)}}return t}}]),t}(),q=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.compare;e(this,t),this.queue=n,this.tree=new c(r),this.segments=[]}return n(t,[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;var r=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!r)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=r,i=r,s=void 0,a=void 0;void 0===s;)null===(o=this.tree.prev(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);for(;void 0===a;)null===(i=this.tree.next(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);if(e.isLeft){var l=null;if(s){var u=s.getIntersection(t);if(null!==u&&(t.isAnEndpoint(u)||(l=u),!s.isAnEndpoint(u)))for(var c=this._splitSafely(s,u),f=0,d=c.length;f<d;f++)n.push(c[f])}var h=null;if(a){var p=a.getIntersection(t);if(null!==p&&(t.isAnEndpoint(p)||(h=p),!a.isAnEndpoint(p)))for(var g=this._splitSafely(a,p),m=0,y=g.length;m<y;m++)n.push(g[m])}if(null!==l||null!==h){var v=null;v=null===l?h:null===h||I.comparePoints(l,h)<=0?l:h,this.queue.remove(t.rightSE),n.push(t.rightSE);for(var b=t.split(v),_=0,w=b.length;_<w;_++)n.push(b[_])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=s)}else{if(s&&a){var x=s.getIntersection(a);if(null!==x){if(!s.isAnEndpoint(x))for(var k=this._splitSafely(s,x),E=0,S=k.length;E<S;E++)n.push(k[E]);if(!a.isAnEndpoint(x))for(var T=this._splitSafely(a,x),P=0,A=T.length;P<A;P++)n.push(T[P])}}this.tree.remove(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var r=e.split(t);return r.push(n),void 0===e.consumedBy&&this.tree.insert(e),r}}]),t}(),V="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/golyanovo2024-agit-map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,G="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/golyanovo2024-agit-map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,H=new(function(){function t(){e(this,t)}return n(t,[{key:"run",value:function(e,t,n){H.type=e,E.reset();for(var r=[new D(t,!0)],o=0,i=n.length;o<i;o++)r.push(new D(n[o],!1));if(H.numMultiPolys=r.length,"difference"===H.type)for(var s=r[0],a=1;a<r.length;)null!==v(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===H.type)for(var l=0,u=r.length;l<u;l++)for(var f=r[l],d=l+1,h=r.length;d<h;d++)if(null===v(f.bbox,r[d].bbox))return[];for(var p=new c(I.compare),g=0,m=r.length;g<m;g++)for(var y=r[g].getSweepEvents(),b=0,_=y.length;b<_;b++)if(p.insert(y[b]),p.size>V)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new q(p),x=p.size,k=p.pop();k;){var S=k.key;if(p.size===x){var T=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(T.id," ")+"[".concat(T.leftSE.point.x,", ").concat(T.leftSE.point.y,"] -> ")+"[".concat(T.rightSE.point.x,", ").concat(T.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>V)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>G)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var P=w.process(S),A=0,O=P.length;A<O;A++){var C=P[A];void 0===C.consumedBy&&p.insert(C)}x=p.size,k=p.pop()}E.reset();var M=z.factory(w.segments);return new W(M).getGeom()}}]),t}()),$=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H.run("union",e,n)},K=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H.run("intersection",e,n)},Y=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H.run("xor",e,n)},Q=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H.run("difference",e,n)};return{union:$,intersection:K,xor:Y,difference:Q}}()},7163:e=>{"use strict";e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},2730:(e,t,n)=>{"use strict";var r=n(5043),o=n(2123),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(e,t,n,r,o,i,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var l=!1,u=null,c=!1,f=null,d={onError:function(e){l=!0,u=e}};function h(e,t,n,r,o,i,s,c,f){l=!1,u=null,a.apply(d,arguments)}var p=null,g=null,m=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=m(n),function(e,t,n,r,o,i,a,d,p){if(h.apply(this,arguments),l){if(!l)throw Error(s(198));var g=u;l=!1,u=null,c||(c=!0,f=g)}}(r,t,void 0,e),e.currentTarget=null}var v=null,b={};function _(){if(v)for(var e in b){var t=b[e],n=v.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!x[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in x[n]=t,n=t.eventTypes){var o=void 0,i=n[r],a=t,l=r;if(k.hasOwnProperty(l))throw Error(s(99,l));k[l]=i;var u=i.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&w(u[o],a,l);o=!0}else i.registrationName?(w(i.registrationName,a,l),o=!0):o=!1;if(!o)throw Error(s(98,r,e))}}}}function w(e,t,n){if(E[e])throw Error(s(100,e));E[e]=t,S[e]=t.eventTypes[n].dependencies}var x=[],k={},E={},S={};function T(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(s(102,t));b[t]=r,n=!0}}n&&_()}var P=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=null,O=null,C=null;function M(e){if(e=g(e)){if("function"!==typeof A)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),A(e.stateNode,e.type,t))}}function R(e){O?C?C.push(e):C=[e]:O=e}function j(){if(O){var e=O,t=C;if(C=O=null,M(e),t)for(e=0;e<t.length;e++)M(t[e])}}function I(e,t){return e(t)}function L(e,t,n,r,o){return e(t,n,r,o)}function N(){}var F=I,U=!1,D=!1;function z(){null===O&&null===C||(N(),j())}function B(e,t,n){if(D)return e(t,n);D=!0;try{return F(e,t,n)}finally{D=!1,z()}}var W=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,V={},G={};function H(e,t,n,r,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){$[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){$[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){$[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var K=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(K,Y);$[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(K,Y);$[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(K,Y);$[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),$.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Z(e,t,n,r){var o=$.hasOwnProperty(t)?$[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!q.call(G,e)||!q.call(V,e)&&(W.test(e)?G[e]=!0:(V[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Q.hasOwnProperty("ReactCurrentDispatcher")||(Q.ReactCurrentDispatcher={current:null}),Q.hasOwnProperty("ReactCurrentBatchConfig")||(Q.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,X="function"===typeof Symbol&&Symbol.for,ee=X?Symbol.for("react.element"):60103,te=X?Symbol.for("react.portal"):60106,ne=X?Symbol.for("react.fragment"):60107,re=X?Symbol.for("react.strict_mode"):60108,oe=X?Symbol.for("react.profiler"):60114,ie=X?Symbol.for("react.provider"):60109,se=X?Symbol.for("react.context"):60110,ae=X?Symbol.for("react.concurrent_mode"):60111,le=X?Symbol.for("react.forward_ref"):60112,ue=X?Symbol.for("react.suspense"):60113,ce=X?Symbol.for("react.suspense_list"):60120,fe=X?Symbol.for("react.memo"):60115,de=X?Symbol.for("react.lazy"):60116,he=X?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ge(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case oe:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case ie:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return me(e.type);case he:return me(e.render);case de:if(e=1===e._status?e._result:null)return me(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,o=e._debugSource,i=me(e.type);n=null,r&&(n=me(r.type)),r=i,i="",o?i=" (at "+o.fileName.replace(J,"")+":"+o.lineNumber+")":n&&(i=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+i}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function _e(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function xe(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ke(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ee(e,t){null!=(t=t.checked)&&Z(e,"checked",t,!1)}function Se(e,t){Ee(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Pe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pe(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Pe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ae(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Oe(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Ce(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Re(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function je(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ie="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Ne(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ne(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,De,ze=(De=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return De(e,t)}))}:De);function Be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function We(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Ve={},Ge={};function He(e){if(Ve[e])return Ve[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ve[e]=n[t];return e}P&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var $e=He("animationend"),Ke=He("animationiteration"),Ye=He("animationstart"),Qe=He("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Xe(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(s(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return nt(o),e;if(i===r)return nt(o),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function ot(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var st=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(st=ot(st,e)),e=st,st=null,e){if(it(e,at),st)throw Error(s(95));if(c)throw e=f,c=!1,f=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!P)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ft=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ft.length&&ft.push(e)}function ht(e,t,n,r){if(ft.length){var o=ft.pop();return o.topLevelType=e,o.eventSystemFlags=r,o.nativeEvent=t,o.targetInst=n,o}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=jn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var o=ut(e.nativeEvent);r=e.topLevelType;var i=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var a=null,l=0;l<x.length;l++){var u=x[l];u&&(u=u.extractEvents(r,t,i,o,s))&&(a=ot(a,u))}lt(a)}}function gt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Kt(e,t)}n.set(e,null)}}var mt,yt,vt,bt=!1,_t=[],wt=null,xt=null,kt=null,Et=new Map,St=new Map,Tt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),At="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ot(e,t,n,r,o){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:o,container:r}}function Ct(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Mt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e=Ot(t,n,r,o,i),null!==t&&(null!==(t=In(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Rt(e){var t=jn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void i.unstable_runWithPriority(e.priority,(function(){vt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=In(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function It(e,t,n){jt(e)&&n.delete(t)}function Lt(){for(bt=!1;0<_t.length;){var e=_t[0];if(null!==e.blockedOn){null!==(e=In(e.blockedOn))&&mt(e);break}var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:_t.shift()}null!==wt&&jt(wt)&&(wt=null),null!==xt&&jt(xt)&&(xt=null),null!==kt&&jt(kt)&&(kt=null),Et.forEach(It),St.forEach(It)}function Nt(e,t){e.blockedOn===t&&(e.blockedOn=null,bt||(bt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Nt(t,e)}if(0<_t.length){Nt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==wt&&Nt(wt,e),null!==xt&&Nt(xt,e),null!==kt&&Nt(kt,e),Et.forEach(t),St.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Tt.shift()}var Ut={},Dt=new Map,zt=new Map,Bt=["abort","abort",$e,"animationEnd",Ke,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Qe,"transitionEnd","waiting","waiting"];function Wt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1],i="on"+(o[0].toUpperCase()+o.slice(1));i={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[r],eventPriority:t},zt.set(r,t),Dt.set(r,i),Ut[o]=i}}Wt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Wt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Wt(Bt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Vt=0;Vt<qt.length;Vt++)zt.set(qt[Vt],0);var Gt=i.unstable_UserBlockingPriority,Ht=i.unstable_runWithPriority,$t=!0;function Kt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=zt.get(t);switch(void 0===r?2:r){case 0:r=Qt.bind(null,t,1,e);break;case 1:r=Zt.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Qt(e,t,n,r){U||N();var o=Jt,i=U;U=!0;try{L(o,e,t,n,r)}finally{(U=i)||z()}}function Zt(e,t,n,r){Ht(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if($t)if(0<_t.length&&-1<Pt.indexOf(e))e=Ot(null,e,t,n,r),_t.push(e);else{var o=Xt(e,t,n,r);if(null===o)Ct(e,r);else if(-1<Pt.indexOf(e))e=Ot(o,e,t,n,r),_t.push(e);else if(!function(e,t,n,r,o){switch(t){case"focus":return wt=Mt(wt,e,t,n,r,o),!0;case"dragenter":return xt=Mt(xt,e,t,n,r,o),!0;case"mouseover":return kt=Mt(kt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Et.set(i,Mt(Et.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,St.set(i,Mt(St.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r)){Ct(e,r),e=ht(e,r,null,t);try{B(pt,e)}finally{dt(e)}}}}function Xt(e,t,n,r){if(null!==(n=jn(n=ut(r)))){var o=et(n);if(null===o)n=null;else{var i=o.tag;if(13===i){if(null!==(n=tt(o)))return n;n=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}e=ht(e,r,n,t);try{B(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var on=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(e,t){if(t){if(on[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=Ie;function un(e,t){var n=Xe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)gt(t[r],e,n)}function cn(){}function fn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gn(){for(var e=window,t=fn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=fn((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$",vn="/$",bn="$?",_n="$!",wn=null,xn=null;function kn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function En(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"===typeof setTimeout?setTimeout:void 0,Tn="function"===typeof clearTimeout?clearTimeout:void 0;function Pn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function An(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn||n===_n||n===bn){if(0===t)return e;t--}else n===vn&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+On,Mn="__reactEventHandlers$"+On,Rn="__reactContainere$"+On;function jn(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[Cn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=An(e);null!==e;){if(n=e[Cn])return n;e=An(e)}return t}n=(e=n).parentNode}return null}function In(e){return!(e=e[Cn]||e[Rn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Nn(e){return e[Mn]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Un(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function Dn(e,t,n){(t=Un(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=ot(n._dispatchListeners,t),n._dispatchInstances=ot(n._dispatchInstances,e))}function zn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)Dn(n[t],"captured",e);for(t=0;t<n.length;t++)Dn(n[t],"bubbled",e)}}function Bn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Un(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ot(n._dispatchListeners,t),n._dispatchInstances=ot(n._dispatchInstances,e))}function Wn(e){e&&e.dispatchConfig.registrationName&&Bn(e._targetInst,null,e)}function qn(e){it(e,zn)}var Vn=null,Gn=null,Hn=null;function $n(){if(Hn)return Hn;var e,t,n=Gn,r=n.length,o="value"in Vn?Vn.value:Vn.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[i-t];t++);return Hn=o.slice(e,1<t?1-t:void 0)}function Kn(){return!0}function Yn(){return!1}function Qn(e,t,n,r){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Kn:Yn,this.isPropagationStopped=Yn,this}function Zn(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Xn(e){e.eventPool=[],e.getPooled=Zn,e.release=Jn}o(Qn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){this.isPersistent=Kn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),Qn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Qn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return o(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=o({},r.Interface,e),n.extend=r.extend,Xn(n),n},Xn(Qn);var er=Qn.extend({data:null}),tr=Qn.extend({data:null}),nr=[9,13,27,32],rr=P&&"CompositionEvent"in window,or=null;P&&"documentMode"in document&&(or=document.documentMode);var ir=P&&"TextEvent"in window&&!or,sr=P&&(!rr||or&&8<or&&11>=or),ar=String.fromCharCode(32),lr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function cr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var hr={eventTypes:lr,extractEvents:function(e,t,n,r){var o;if(rr)e:{switch(e){case"compositionstart":var i=lr.compositionStart;break e;case"compositionend":i=lr.compositionEnd;break e;case"compositionupdate":i=lr.compositionUpdate;break e}i=void 0}else dr?cr(e,n)&&(i=lr.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=lr.compositionStart);return i?(sr&&"ko"!==n.locale&&(dr||i!==lr.compositionStart?i===lr.compositionEnd&&dr&&(o=$n()):(Gn="value"in(Vn=r)?Vn.value:Vn.textContent,dr=!0)),i=er.getPooled(i,t,n,r),o?i.data=o:null!==(o=fr(n))&&(i.data=o),qn(i),o=i):o=null,(e=ir?function(e,t){switch(e){case"compositionend":return fr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&cr(e,t)?(e=$n(),Hn=Gn=Vn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sr&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(lr.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===o?t:null===t?o:[o,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var mr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function yr(e,t,n){return(e=Qn.getPooled(mr.change,e,t,n)).type="change",R(n),qn(e),e}var vr=null,br=null;function _r(e){lt(e)}function wr(e){if(we(Ln(e)))return e}function xr(e,t){if("change"===e)return t}var kr=!1;function Er(){vr&&(vr.detachEvent("onpropertychange",Sr),br=vr=null)}function Sr(e){if("value"===e.propertyName&&wr(br))if(e=yr(br,e,ut(e)),U)lt(e);else{U=!0;try{I(_r,e)}finally{U=!1,z()}}}function Tr(e,t,n){"focus"===e?(Er(),br=n,(vr=t).attachEvent("onpropertychange",Sr)):"blur"===e&&Er()}function Pr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return wr(br)}function Ar(e,t){if("click"===e)return wr(t)}function Or(e,t){if("input"===e||"change"===e)return wr(t)}P&&(kr=ct("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:mr,_isInputEventSupported:kr,extractEvents:function(e,t,n,r){var o=t?Ln(t):window,i=o.nodeName&&o.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===o.type)var s=xr;else if(gr(o))if(kr)s=Or;else{s=Pr;var a=Tr}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(s=Ar);if(s&&(s=s(e,t)))return yr(s,n,r);a&&a(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&Pe(o,"number",o.value)}},Mr=Qn.extend({view:null,detail:null}),Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rr[e])&&!!t[e]}function Ir(){return jr}var Lr=0,Nr=0,Fr=!1,Ur=!1,Dr=Mr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ir,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Nr;return Nr=e.screenY,Ur?"mousemove"===e.type?e.screenY-t:0:(Ur=!0,0)}}),zr=Dr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Br={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Wr={eventTypes:Br,extractEvents:function(e,t,n,r,o){var i="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(i&&0===(32&o)&&(n.relatedTarget||n.fromElement)||!s&&!i)return null;(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?jn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Dr,l=Br.mouseLeave,u=Br.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=zr,l=Br.pointerLeave,u=Br.pointerEnter,c="pointer");if(e=null==s?i:Ln(s),i=null==t?i:Ln(t),(l=a.getPooled(l,s,n,r)).type=c+"leave",l.target=e,l.relatedTarget=i,(n=a.getPooled(u,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=e,c=t,(r=s)&&c)e:{for(u=c,s=0,e=a=r;e;e=Fn(e))s++;for(e=0,t=u;t;t=Fn(t))e++;for(;0<s-e;)a=Fn(a),s--;for(;0<e-s;)u=Fn(u),e--;for(;s--;){if(a===u||a===u.alternate)break e;a=Fn(a),u=Fn(u)}a=null}else a=null;for(u=a,a=[];r&&r!==u&&(null===(s=r.alternate)||s!==u);)a.push(r),r=Fn(r);for(r=[];c&&c!==u&&(null===(s=c.alternate)||s!==u);)r.push(c),c=Fn(c);for(c=0;c<a.length;c++)Bn(a[c],"bubbled",l);for(c=r.length;0<c--;)Bn(r[c],"captured",n);return 0===(64&o)?[l]:[l,n]}};var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Vr=Object.prototype.hasOwnProperty;function Gr(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Vr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Hr=P&&"documentMode"in document&&11>=document.documentMode,$r={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Kr=null,Yr=null,Qr=null,Zr=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Zr||null==Kr||Kr!==fn(n)?null:("selectionStart"in(n=Kr)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Qr&&Gr(Qr,n)?null:(Qr=n,(e=Qn.getPooled($r.select,Yr,e,t)).type="select",e.target=Kr,qn(e),e))}var Xr={eventTypes:$r,extractEvents:function(e,t,n,r,o,i){if(!(i=!(o=i||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{o=Xe(o),i=S.onSelect;for(var s=0;s<i.length;s++)if(!o.has(i[s])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?Ln(t):window,e){case"focus":(gr(o)||"true"===o.contentEditable)&&(Kr=o,Yr=t,Qr=null);break;case"blur":Qr=Yr=Kr=null;break;case"mousedown":Zr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Zr=!1,Jr(n,r);case"selectionchange":if(Hr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},eo=Qn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),to=Qn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),no=Mr.extend({relatedTarget:null});function ro(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},io={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},so=Mr.extend({key:function(e){if(e.key){var t=oo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ro(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?io[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ir,charCode:function(e){return"keypress"===e.type?ro(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ro(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ao=Dr.extend({dataTransfer:null}),lo=Mr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ir}),uo=Qn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),co=Dr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),fo={eventTypes:Ut,extractEvents:function(e,t,n,r){var o=Dt.get(e);if(!o)return null;switch(e){case"keypress":if(0===ro(n))return null;case"keydown":case"keyup":e=so;break;case"blur":case"focus":e=no;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ao;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=lo;break;case $e:case Ke:case Ye:e=eo;break;case Qe:e=uo;break;case"scroll":e=Mr;break;case"wheel":e=co;break;case"copy":case"cut":case"paste":e=to;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=zr;break;default:e=Qn}return qn(t=e.getPooled(o,t,n,r)),t}};if(v)throw Error(s(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),p=Nn,g=In,m=Ln,T({SimpleEventPlugin:fo,EnterLeaveEventPlugin:Wr,ChangeEventPlugin:Cr,SelectEventPlugin:Xr,BeforeInputEventPlugin:hr});var ho=[],po=-1;function go(e){0>po||(e.current=ho[po],ho[po]=null,po--)}function mo(e,t){po++,ho[po]=e.current,e.current=t}var yo={},vo={current:yo},bo={current:!1},_o=yo;function wo(e,t){var n=e.type.contextTypes;if(!n)return yo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function xo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ko(){go(bo),go(vo)}function Eo(e,t,n){if(vo.current!==yo)throw Error(s(168));mo(vo,t),mo(bo,n)}function So(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,me(t)||"Unknown",i));return o({},n,{},r)}function To(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yo,_o=vo.current,mo(vo,e),mo(bo,bo.current),!0}function Po(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=So(e,t,_o),r.__reactInternalMemoizedMergedChildContext=e,go(bo),go(vo),mo(vo,e)):go(bo),mo(bo,n)}var Ao=i.unstable_runWithPriority,Oo=i.unstable_scheduleCallback,Co=i.unstable_cancelCallback,Mo=i.unstable_requestPaint,Ro=i.unstable_now,jo=i.unstable_getCurrentPriorityLevel,Io=i.unstable_ImmediatePriority,Lo=i.unstable_UserBlockingPriority,No=i.unstable_NormalPriority,Fo=i.unstable_LowPriority,Uo=i.unstable_IdlePriority,Do={},zo=i.unstable_shouldYield,Bo=void 0!==Mo?Mo:function(){},Wo=null,qo=null,Vo=!1,Go=Ro(),Ho=1e4>Go?Ro:function(){return Ro()-Go};function $o(){switch(jo()){case Io:return 99;case Lo:return 98;case No:return 97;case Fo:return 96;case Uo:return 95;default:throw Error(s(332))}}function Ko(e){switch(e){case 99:return Io;case 98:return Lo;case 97:return No;case 96:return Fo;case 95:return Uo;default:throw Error(s(332))}}function Yo(e,t){return e=Ko(e),Ao(e,t)}function Qo(e,t,n){return e=Ko(e),Oo(e,t,n)}function Zo(e){return null===Wo?(Wo=[e],qo=Oo(Io,Xo)):Wo.push(e),Do}function Jo(){if(null!==qo){var e=qo;qo=null,Co(e)}Xo()}function Xo(){if(!Vo&&null!==Wo){Vo=!0;var e=0;try{var t=Wo;Yo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Wo=null}catch(n){throw null!==Wo&&(Wo=Wo.slice(e+1)),Oo(Io,Jo),n}finally{Vo=!1}}}function ei(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function ti(e,t){if(e&&e.defaultProps)for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ni={current:null},ri=null,oi=null,ii=null;function si(){ii=oi=ri=null}function ai(e){var t=ni.current;go(ni),e.type._context._currentValue=t}function li(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ui(e,t){ri=e,ii=oi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ns=!0),e.firstContext=null)}function ci(e,t){if(ii!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ii=e,t=1073741823),t={context:e,observedBits:t,next:null},null===oi){if(null===ri)throw Error(s(308));oi=t,ri.dependencies={expirationTime:0,firstContext:t,responders:null}}else oi=oi.next=t;return e._currentValue}var fi=!1;function di(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function hi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function pi(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function gi(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function mi(e,t){var n=e.alternate;null!==n&&hi(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function yi(e,t,n,r){var i=e.updateQueue;fi=!1;var s=i.baseQueue,a=i.shared.pending;if(null!==a){if(null!==s){var l=s.next;s.next=a.next,a.next=l}s=a,i.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=a))}if(null!==s){l=s.next;var u=i.baseState,c=0,f=null,d=null,h=null;if(null!==l)for(var p=l;;){if((a=p.expirationTime)<r){var g={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===h?(d=h=g,f=u):h=h.next=g,a>c&&(c=a)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),xl(a,p.suspenseConfig);e:{var m=e,y=p;switch(a=t,g=n,y.tag){case 1:if("function"===typeof(m=y.payload)){u=m.call(g,u,a);break e}u=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(a="function"===typeof(m=y.payload)?m.call(g,u,a):m)||void 0===a)break e;u=o({},u,a);break e;case 2:fi=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=i.effects)?i.effects=[p]:a.push(p))}if(null===(p=p.next)||p===l){if(null===(a=i.shared.pending))break;p=s.next=a.next,a.next=l,i.baseQueue=s=a,i.shared.pending=null}}null===h?f=u:h.next=d,i.baseState=f,i.baseQueue=h,kl(c),e.expirationTime=c,e.memoizedState=u}}function vi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=o,o=n,"function"!==typeof r)throw Error(s(191,r));r.call(o)}}}var bi=Q.ReactCurrentBatchConfig,_i=(new r.Component).refs;function wi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var xi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),o=bi.suspense;(o=pi(r=cl(r,e,o),o)).payload=t,void 0!==n&&null!==n&&(o.callback=n),gi(e,o),fl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),o=bi.suspense;(o=pi(r=cl(r,e,o),o)).tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),gi(e,o),fl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ul(),r=bi.suspense;(r=pi(n=cl(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),gi(e,r),fl(e,n)}};function ki(e,t,n,r,o,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Gr(n,r)||!Gr(o,i))}function Ei(e,t,n){var r=!1,o=yo,i=t.contextType;return"object"===typeof i&&null!==i?i=ci(i):(o=xo(t)?_o:vo.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?wo(e,o):yo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=xi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Si(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xi.enqueueReplaceState(t,t.state,null)}function Ti(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=_i,di(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=ci(i):(i=xo(t)?_o:vo.current,o.context=wo(e,i)),yi(e,n,o,r),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(wi(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&xi.enqueueReplaceState(o,o.state,null),yi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.effectTag|=4)}var Pi=Array.isArray;function Ai(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===_i&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Oi(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ci(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hl(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=Ai(e,t,n),r.return=e,r):((r=Vl(n.type,n.key,n.props,null,e.mode,r)).ref=Ai(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$l(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Gl(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Hl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Vl(t.type,t.key,t.props,null,e.mode,n)).ref=Ai(e,null,t),n.return=e,n;case te:return(t=$l(t,e.mode,n)).return=e,t}if(Pi(t)||ge(t))return(t=Gl(t,e.mode,n,null)).return=e,t;Oi(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===o?n.type===ne?f(e,t,n.props.children,r,o):u(e,t,n,r):null;case te:return n.key===o?c(e,t,n,r):null}if(Pi(n)||ge(n))return null!==o?null:f(e,t,n,r,null);Oi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,o,r.key):u(t,e,r,o);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(Pi(r)||ge(r))return f(t,e=e.get(n)||null,r,o,null);Oi(t,r)}return null}function g(o,s,a,l){for(var u=null,c=null,f=s,g=s=0,m=null;null!==f&&g<a.length;g++){f.index>g?(m=f,f=null):m=f.sibling;var y=h(o,f,a[g],l);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(o,f),s=i(y,s,g),null===c?u=y:c.sibling=y,c=y,f=m}if(g===a.length)return n(o,f),u;if(null===f){for(;g<a.length;g++)null!==(f=d(o,a[g],l))&&(s=i(f,s,g),null===c?u=f:c.sibling=f,c=f);return u}for(f=r(o,f);g<a.length;g++)null!==(m=p(f,o,g,a[g],l))&&(e&&null!==m.alternate&&f.delete(null===m.key?g:m.key),s=i(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(o,e)})),u}function m(o,a,l,u){var c=ge(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var f=c=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=h(o,g,v.value,u);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(o,g),a=i(b,a,m),null===f?c=b:f.sibling=b,f=b,g=y}if(v.done)return n(o,g),c;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(o,v.value,u))&&(a=i(v,a,m),null===f?c=v:f.sibling=v,f=v);return c}for(g=r(o,g);!v.done;m++,v=l.next())null!==(v=p(g,o,m,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=i(v,a,m),null===f?c=v:f.sibling=v,f=v);return e&&g.forEach((function(e){return t(o,e)})),c}return function(e,r,i,l){var u="object"===typeof i&&null!==i&&i.type===ne&&null===i.key;u&&(i=i.props.children);var c="object"===typeof i&&null!==i;if(c)switch(i.$$typeof){case ee:e:{for(c=i.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(i.type===ne){n(e,u.sibling),(r=o(u,i.props.children)).return=e,e=r;break e}}else if(u.elementType===i.type){n(e,u.sibling),(r=o(u,i.props)).ref=Ai(e,u,i),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}i.type===ne?((r=Gl(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=Vl(i.type,i.key,i.props,null,e.mode,l)).ref=Ai(e,r,i),l.return=e,e=l)}return a(e);case te:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=o(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$l(i,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,i)).return=e,e=r):(n(e,r),(r=Hl(i,e.mode,l)).return=e,e=r),a(e);if(Pi(i))return g(e,r,i,l);if(ge(i))return m(e,r,i,l);if(c&&Oi(e,i),"undefined"===typeof i&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Mi=Ci(!0),Ri=Ci(!1),ji={},Ii={current:ji},Li={current:ji},Ni={current:ji};function Fi(e){if(e===ji)throw Error(s(174));return e}function Ui(e,t){switch(mo(Ni,t),mo(Li,e),mo(Ii,ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}go(Ii),mo(Ii,t)}function Di(){go(Ii),go(Li),go(Ni)}function zi(e){Fi(Ni.current);var t=Fi(Ii.current),n=Fe(t,e.type);t!==n&&(mo(Li,e),mo(Ii,n))}function Bi(e){Li.current===e&&(go(Ii),go(Li))}var Wi={current:0};function qi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===bn||n.data===_n))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Vi(e,t){return{responder:e,props:t}}var Gi=Q.ReactCurrentDispatcher,Hi=Q.ReactCurrentBatchConfig,$i=0,Ki=null,Yi=null,Qi=null,Zi=!1;function Ji(){throw Error(s(321))}function Xi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function es(e,t,n,r,o,i){if($i=i,Ki=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Gi.current=null===e||null===e.memoizedState?ks:Es,e=n(r,o),t.expirationTime===$i){i=0;do{if(t.expirationTime=0,!(25>i))throw Error(s(301));i+=1,Qi=Yi=null,t.updateQueue=null,Gi.current=Ss,e=n(r,o)}while(t.expirationTime===$i)}if(Gi.current=xs,t=null!==Yi&&null!==Yi.next,$i=0,Qi=Yi=Ki=null,Zi=!1,t)throw Error(s(300));return e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qi?Ki.memoizedState=Qi=e:Qi=Qi.next=e,Qi}function ns(){if(null===Yi){var e=Ki.alternate;e=null!==e?e.memoizedState:null}else e=Yi.next;var t=null===Qi?Ki.memoizedState:Qi.next;if(null!==t)Qi=t,Yi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Yi=e).memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},null===Qi?Ki.memoizedState=Qi=e:Qi=Qi.next=e}return Qi}function rs(e,t){return"function"===typeof t?t(e):t}function os(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Yi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var l=a=i=null,u=o;do{var c=u.expirationTime;if(c<$i){var f={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=f,i=r):l=l.next=f,c>Ki.expirationTime&&(Ki.expirationTime=c,kl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),xl(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==o);null===l?i=r:l.next=a,qr(r,t.memoizedState)||(Ns=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function is(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{i=e(i,a.action),a=a.next}while(a!==o);qr(i,t.memoizedState)||(Ns=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ss(e){var t=ts();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e}).dispatch=ws.bind(null,Ki,e),[t.memoizedState,e]}function as(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ki.updateQueue)?(t={lastEffect:null},Ki.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ls(){return ns().memoizedState}function us(e,t,n,r){var o=ts();Ki.effectTag|=e,o.memoizedState=as(1|t,n,void 0,void 0===r?null:r)}function cs(e,t,n,r){var o=ns();r=void 0===r?null:r;var i=void 0;if(null!==Yi){var s=Yi.memoizedState;if(i=s.destroy,null!==r&&Xi(r,s.deps))return void as(t,n,i,r)}Ki.effectTag|=e,o.memoizedState=as(1|t,n,i,r)}function fs(e,t){return us(516,4,e,t)}function ds(e,t){return cs(516,4,e,t)}function hs(e,t){return cs(4,2,e,t)}function ps(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function gs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,cs(4,2,ps.bind(null,t,e),n)}function ms(){}function ys(e,t){return ts().memoizedState=[e,void 0===t?null:t],e}function vs(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bs(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _s(e,t,n){var r=$o();Yo(98>r?98:r,(function(){e(!0)})),Yo(97<r?97:r,(function(){var r=Hi.suspense;Hi.suspense=void 0===t?null:t;try{e(!1),n()}finally{Hi.suspense=r}}))}function ws(e,t,n){var r=ul(),o=bi.suspense;o={expirationTime:r=cl(r,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===Ki||null!==i&&i===Ki)Zi=!0,o.expirationTime=$i,Ki.expirationTime=$i;else{if(0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,n);if(o.eagerReducer=i,o.eagerState=a,qr(a,s))return}catch(l){}fl(e,r)}}var xs={readContext:ci,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useLayoutEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useResponder:Ji,useDeferredValue:Ji,useTransition:Ji},ks={readContext:ci,useCallback:ys,useContext:ci,useEffect:fs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,us(4,2,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ws.bind(null,Ki,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ts().memoizedState=e},useState:ss,useDebugValue:ms,useResponder:Vi,useDeferredValue:function(e,t){var n=ss(e),r=n[0],o=n[1];return fs((function(){var n=Hi.suspense;Hi.suspense=void 0===t?null:t;try{o(e)}finally{Hi.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ss(!1),n=t[0];return t=t[1],[ys(_s.bind(null,t,e),[t,e]),n]}},Es={readContext:ci,useCallback:vs,useContext:ci,useEffect:ds,useImperativeHandle:gs,useLayoutEffect:hs,useMemo:bs,useReducer:os,useRef:ls,useState:function(){return os(rs)},useDebugValue:ms,useResponder:Vi,useDeferredValue:function(e,t){var n=os(rs),r=n[0],o=n[1];return ds((function(){var n=Hi.suspense;Hi.suspense=void 0===t?null:t;try{o(e)}finally{Hi.suspense=n}}),[e,t]),r},useTransition:function(e){var t=os(rs),n=t[0];return t=t[1],[vs(_s.bind(null,t,e),[t,e]),n]}},Ss={readContext:ci,useCallback:vs,useContext:ci,useEffect:ds,useImperativeHandle:gs,useLayoutEffect:hs,useMemo:bs,useReducer:is,useRef:ls,useState:function(){return is(rs)},useDebugValue:ms,useResponder:Vi,useDeferredValue:function(e,t){var n=is(rs),r=n[0],o=n[1];return ds((function(){var n=Hi.suspense;Hi.suspense=void 0===t?null:t;try{o(e)}finally{Hi.suspense=n}}),[e,t]),r},useTransition:function(e){var t=is(rs),n=t[0];return t=t[1],[vs(_s.bind(null,t,e),[t,e]),n]}},Ts=null,Ps=null,As=!1;function Os(e,t){var n=Bl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Cs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ms(e){if(As){var t=Ps;if(t){var n=t;if(!Cs(e,t)){if(!(t=Pn(n.nextSibling))||!Cs(e,t))return e.effectTag=-1025&e.effectTag|2,As=!1,void(Ts=e);Os(Ts,n)}Ts=e,Ps=Pn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,As=!1,Ts=e}}function Rs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ts=e}function js(e){if(e!==Ts)return!1;if(!As)return Rs(e),As=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!En(t,e.memoizedProps))for(t=Ps;t;)Os(e,t),t=Pn(t.nextSibling);if(Rs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn){if(0===t){Ps=Pn(e.nextSibling);break e}t--}else n!==yn&&n!==_n&&n!==bn||t++}e=e.nextSibling}Ps=null}}else Ps=Ts?Pn(e.stateNode.nextSibling):null;return!0}function Is(){Ps=Ts=null,As=!1}var Ls=Q.ReactCurrentOwner,Ns=!1;function Fs(e,t,n,r){t.child=null===e?Ri(t,null,n,r):Mi(t,e.child,n,r)}function Us(e,t,n,r,o){n=n.render;var i=t.ref;return ui(t,o),r=es(e,t,n,r,i,o),null===e||Ns?(t.effectTag|=1,Fs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),ta(e,t,o))}function Ds(e,t,n,r,o,i){if(null===e){var s=n.type;return"function"!==typeof s||Wl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Vl(n.type,null,r,null,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,zs(e,t,s,r,o,i))}return s=e.child,o<i&&(o=s.memoizedProps,(n=null!==(n=n.compare)?n:Gr)(o,r)&&e.ref===t.ref)?ta(e,t,i):(t.effectTag|=1,(e=ql(s,r)).ref=t.ref,e.return=t,t.child=e)}function zs(e,t,n,r,o,i){return null!==e&&Gr(e.memoizedProps,r)&&e.ref===t.ref&&(Ns=!1,o<i)?(t.expirationTime=e.expirationTime,ta(e,t,i)):Ws(e,t,n,r,i)}function Bs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ws(e,t,n,r,o){var i=xo(n)?_o:vo.current;return i=wo(t,i),ui(t,o),n=es(e,t,n,r,i,o),null===e||Ns?(t.effectTag|=1,Fs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),ta(e,t,o))}function qs(e,t,n,r,o){if(xo(n)){var i=!0;To(t)}else i=!1;if(ui(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ei(t,n,r),Ti(t,n,r,o),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ci(u):u=wo(t,u=xo(n)?_o:vo.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;f||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Si(t,s,r,u),fi=!1;var d=t.memoizedState;s.state=d,yi(t,r,s,o),l=t.memoizedState,a!==r||d!==l||bo.current||fi?("function"===typeof c&&(wi(t,n,c,r),l=t.memoizedState),(a=fi||ki(t,n,a,r,d,l,u))?(f||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,hi(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:ti(t.type,a),l=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=ci(u):u=wo(t,u=xo(n)?_o:vo.current),(f="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Si(t,s,r,u),fi=!1,l=t.memoizedState,s.state=l,yi(t,r,s,o),d=t.memoizedState,a!==r||l!==d||bo.current||fi?("function"===typeof c&&(wi(t,n,c,r),d=t.memoizedState),(c=fi||ki(t,n,a,r,l,d,u))?(f||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=u,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Vs(e,t,n,r,i,o)}function Vs(e,t,n,r,o,i){Bs(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return o&&Po(t,n,!1),ta(e,t,i);r=t.stateNode,Ls.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=Mi(t,e.child,null,i),t.child=Mi(t,null,a,i)):Fs(e,t,a,i),t.memoizedState=r.state,o&&Po(t,n,!0),t.child}function Gs(e){var t=e.stateNode;t.pendingContext?Eo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Eo(0,t.context,!1),Ui(e,t.containerInfo)}var Hs,$s,Ks,Ys,Qs={dehydrated:null,retryTime:0};function Zs(e,t,n){var r,o=t.mode,i=t.pendingProps,s=Wi.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),mo(Wi,1&s),null===e){if(void 0!==i.fallback&&Ms(t),a){if(a=i.fallback,(i=Gl(null,o,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(n=Gl(a,o,n,null)).return=t,i.sibling=n,t.memoizedState=Qs,t.child=i,n}return o=i.children,t.memoizedState=null,t.child=Ri(t,null,o,n)}if(null!==e.memoizedState){if(o=(e=e.child).sibling,a){if(i=i.fallback,(n=ql(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(o=ql(o,i)).return=t,n.sibling=o,n.childExpirationTime=0,t.memoizedState=Qs,t.child=n,o}return n=Mi(t,e.child,i.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=i.fallback,(i=Gl(null,o,0,null)).return=t,i.child=e,null!==e&&(e.return=i),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(n=Gl(a,o,n,null)).return=t,i.sibling=n,n.effectTag|=2,i.childExpirationTime=0,t.memoizedState=Qs,t.child=i,n}return t.memoizedState=null,t.child=Mi(t,e,i.children,n)}function Js(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),li(e.return,t)}function Xs(e,t,n,r,o,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:o,lastEffect:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=o,s.lastEffect=i)}function ea(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Fs(e,t,r.children,n),0!==(2&(r=Wi.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Js(e,n);else if(19===e.tag)Js(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mo(Wi,r),0===(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===qi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Xs(t,!1,o,n,i,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===qi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Xs(t,!0,n,null,i,t.lastEffect);break;case"together":Xs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&kl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return xo(t.type)&&ko(),null;case 3:return Di(),go(bo),go(vo),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!js(t)||(t.effectTag|=4),$s(t),null;case 5:Bi(t),n=Fi(Ni.current);var i=t.type;if(null!==e&&null!=t.stateNode)Ks(e,t,i,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Fi(Ii.current),js(t)){r=t.stateNode,i=t.type;var a=t.memoizedProps;switch(r[Cn]=t,r[Mn]=a,i){case"iframe":case"object":case"embed":Kt("load",r);break;case"video":case"audio":for(e=0;e<Ze.length;e++)Kt(Ze[e],r);break;case"source":Kt("error",r);break;case"img":case"image":case"link":Kt("error",r),Kt("load",r);break;case"form":Kt("reset",r),Kt("submit",r);break;case"details":Kt("toggle",r);break;case"input":ke(r,a),Kt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Kt("invalid",r),un(n,"onChange");break;case"textarea":Me(r,a),Kt("invalid",r),un(n,"onChange")}for(var l in sn(i,a),e=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(e=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(e=["children",""+u]):E.hasOwnProperty(l)&&null!=u&&un(n,l)}switch(i){case"input":_e(r),Te(r,a,!0);break;case"textarea":_e(r),je(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=Ne(i)),e===ln?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(i,{is:r.is}):(e=l.createElement(i),"select"===i&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,i),e[Cn]=t,e[Mn]=r,Hs(e,t,!1,!1),t.stateNode=e,l=an(i,r),i){case"iframe":case"object":case"embed":Kt("load",e),u=r;break;case"video":case"audio":for(u=0;u<Ze.length;u++)Kt(Ze[u],e);u=r;break;case"source":Kt("error",e),u=r;break;case"img":case"image":case"link":Kt("error",e),Kt("load",e),u=r;break;case"form":Kt("reset",e),Kt("submit",e),u=r;break;case"details":Kt("toggle",e),u=r;break;case"input":ke(e,r),u=xe(e,r),Kt("invalid",e),un(n,"onChange");break;case"option":u=Ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=o({},r,{value:void 0}),Kt("invalid",e),un(n,"onChange");break;case"textarea":Me(e,r),u=Ce(e,r),Kt("invalid",e),un(n,"onChange");break;default:u=r}sn(i,u);var c=u;for(a in c)if(c.hasOwnProperty(a)){var f=c[a];"style"===a?rn(e,f):"dangerouslySetInnerHTML"===a?null!=(f=f?f.__html:void 0)&&ze(e,f):"children"===a?"string"===typeof f?("textarea"!==i||""!==f)&&Be(e,f):"number"===typeof f&&Be(e,""+f):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(E.hasOwnProperty(a)?null!=f&&un(n,a):null!=f&&Z(e,a,f,l))}switch(i){case"input":_e(e),Te(e,r,!1);break;case"textarea":_e(e),je(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Oe(e,!!r.multiple,n,!1):null!=r.defaultValue&&Oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=cn)}kn(i,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ys(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Fi(Ni.current),Fi(Ii.current),js(t)?(n=t.stateNode,r=t.memoizedProps,n[Cn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=t,t.stateNode=n)}return null;case 13:return go(Wi),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&js(t):(r=null!==(i=e.memoizedState),n||null===i||null!==(i=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=i,i.nextEffect=a):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Wi.current)?qa===ja&&(qa=Na):(qa!==ja&&qa!==Na||(qa=Fa),0!==Ka&&null!==za&&(Ql(za,Wa),Zl(za,Ka)))),(n||r)&&(t.effectTag|=4),null);case 4:return Di(),$s(t),null;case 10:return ai(t),null;case 19:if(go(Wi),null===(r=t.memoizedState))return null;if(i=0!==(64&t.effectTag),null===(a=r.rendering)){if(i)na(r,!1);else if(qa!==ja||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=qi(a))){for(t.effectTag|=64,na(r,!1),null!==(i=e.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(i=r).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(e=i.alternate)?(i.childExpirationTime=0,i.expirationTime=a,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mo(Wi,1&Wi.current|2),t.child}a=a.sibling}}else{if(!i)if(null!==(e=qi(a))){if(t.effectTag|=64,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ho()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,i=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ho()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ho(),n.sibling=null,t=Wi.current,mo(Wi,i?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function oa(e){switch(e.tag){case 1:xo(e.type)&&ko();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Di(),go(bo),go(vo),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return Bi(e),null;case 13:return go(Wi),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return go(Wi),null;case 4:return Di(),null;case 10:return ai(e),null;default:return null}}function ia(e,t){return{value:e,source:t,stack:ye(t)}}Hs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$s=function(){},Ks=function(e,t,n,r,i){var s=e.memoizedProps;if(s!==r){var a,l,u=t.stateNode;switch(Fi(Ii.current),e=null,n){case"input":s=xe(u,s),r=xe(u,r),e=[];break;case"option":s=Ae(u,s),r=Ae(u,r),e=[];break;case"select":s=o({},s,{value:void 0}),r=o({},r,{value:void 0}),e=[];break;case"textarea":s=Ce(u,s),r=Ce(u,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(u.onclick=cn)}for(a in sn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in u=s[a])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(E.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(a,c)):"children"===a?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(E.hasOwnProperty(a)?(null!=c&&un(i,a),e||u===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),i=e,(t.updateQueue=i)&&(t.effectTag|=4)}},Ys=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var sa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&me(n.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(o){setTimeout((function(){throw o}))}}function la(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ll(e,n)}else t.current=null}function ua(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ti(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(s(163))}function ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function fa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void fa(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:ti(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&vi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}vi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&kn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(s(163))}function ha(e,t,n){switch("function"===typeof Dl&&Dl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Yo(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var o=t;try{n()}catch(i){Ll(o,i)}}e=e.next}while(e!==r)}))}break;case 1:la(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ll(e,n)}}(t,n);break;case 5:la(t);break;case 4:ba(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ga(e){return 5===e.tag||3===e.tag||4===e.tag}function ma(e){e:{for(var t=e.return;null!==t;){if(ga(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Be(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ga(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?ya(e,n,t):va(e,n,t)}function ya(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function va(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function ba(e,t,n){for(var r,o,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:o=!1;break e;case 3:case 4:r=r.containerInfo,o=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var l=e,u=i,c=n,f=u;;)if(ha(l,f,c),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===u)break e;for(;null===f.sibling;){if(null===f.return||f.return===u)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}o?(l=r,u=i.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,o=!0,i.child.return=i,i=i.child;continue}}else if(ha(e,i,n),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function _a(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ca(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,o=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Mn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ee(n,r),an(e,o),t=an(e,r),o=0;o<i.length;o+=2){var a=i[o],l=i[o+1];"style"===a?rn(n,l):"dangerouslySetInnerHTML"===a?ze(n,l):"children"===a?Be(n,l):Z(n,a,l,t)}switch(e){case"input":Se(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Oe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Oe(n,!!r.multiple,r.defaultValue,!0):Oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Qa=Ho()),null!==n)e:for(e=n;;){if(5===e.tag)i=e.stateNode,r?"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none":(i=e.stateNode,o=void 0!==(o=e.memoizedProps.style)&&null!==o&&o.hasOwnProperty("display")?o.display:null,i.style.display=nn("display",o));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(i=e.child.sibling).return=e,e=i;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void wa(t);case 19:return void wa(t)}throw Error(s(163))}function wa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new sa),t.forEach((function(t){var r=Fl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var xa="function"===typeof WeakMap?WeakMap:Map;function ka(e,t,n){(n=pi(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xa||(Xa=!0,el=r),aa(e,t)},n}function Ea(e,t,n){(n=pi(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return aa(e,t),r(o)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tl?tl=new Set([this]):tl.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Sa,Ta=Math.ceil,Pa=Q.ReactCurrentDispatcher,Aa=Q.ReactCurrentOwner,Oa=0,Ca=8,Ma=16,Ra=32,ja=0,Ia=1,La=2,Na=3,Fa=4,Ua=5,Da=Oa,za=null,Ba=null,Wa=0,qa=ja,Va=null,Ga=1073741823,Ha=1073741823,$a=null,Ka=0,Ya=!1,Qa=0,Za=500,Ja=null,Xa=!1,el=null,tl=null,nl=!1,rl=null,ol=90,il=null,sl=0,al=null,ll=0;function ul(){return(Da&(Ma|Ra))!==Oa?1073741821-(Ho()/10|0):0!==ll?ll:ll=1073741821-(Ho()/10|0)}function cl(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=$o();if(0===(4&t))return 99===r?1073741823:1073741822;if((Da&Ma)!==Oa)return Wa;if(null!==n)e=ei(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=ei(e,150,100);break;case 97:case 96:e=ei(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==za&&e===Wa&&--e,e}function fl(e,t){if(50<sl)throw sl=0,al=null,Error(s(185));if(null!==(e=dl(e,t))){var n=$o();1073741823===t?(Da&Ca)!==Oa&&(Da&(Ma|Ra))===Oa?ml(e):(pl(e),Da===Oa&&Jo()):pl(e),(4&Da)===Oa||98!==n&&99!==n||(null===il?il=new Map([[e,t]]):(void 0===(n=il.get(e))||n>t)&&il.set(e,t))}}function dl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,o=null;if(null===r&&3===e.tag)o=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){o=r.stateNode;break}r=r.return}return null!==o&&(za===o&&(kl(t),qa===Fa&&Ql(o,Wa)),Zl(o,t)),o}function hl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Zo(ml.bind(null,e));else{var t=hl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ul();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var o=e.callbackPriority;if(e.callbackExpirationTime===t&&o>=r)return;n!==Do&&Co(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Zo(ml.bind(null,e)):Qo(r,gl.bind(null,e),{timeout:10*(1073741821-t)-Ho()}),e.callbackNode=t}}}function gl(e,t){if(ll=0,t)return Jl(e,t=ul()),pl(e),null;var n=hl(e);if(0!==n){if(t=e.callbackNode,(Da&(Ma|Ra))!==Oa)throw Error(s(327));if(Rl(),e===za&&n===Wa||bl(e,n),null!==Ba){var r=Da;Da|=Ma;for(var o=wl();;)try{Sl();break}catch(l){_l(e,l)}if(si(),Da=r,Pa.current=o,qa===Ia)throw t=Va,bl(e,n),Ql(e,n),pl(e),t;if(null===Ba)switch(o=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=qa,za=null,r){case ja:case Ia:throw Error(s(345));case La:Jl(e,2<n?2:n);break;case Na:if(Ql(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Al(o)),1073741823===Ga&&10<(o=Qa+Za-Ho())){if(Ya){var i=e.lastPingedTime;if(0===i||i>=n){e.lastPingedTime=n,bl(e,n);break}}if(0!==(i=hl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Sn(Ol.bind(null,e),o);break}Ol(e);break;case Fa:if(Ql(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Al(o)),Ya&&(0===(o=e.lastPingedTime)||o>=n)){e.lastPingedTime=n,bl(e,n);break}if(0!==(o=hl(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ha?r=10*(1073741821-Ha)-Ho():1073741823===Ga?r=0:(r=10*(1073741821-Ga)-5e3,0>(r=(o=Ho())-r)&&(r=0),(n=10*(1073741821-n)-o)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ta(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Sn(Ol.bind(null,e),r);break}Ol(e);break;case Ua:if(1073741823!==Ga&&null!==$a){i=Ga;var a=$a;if(0>=(r=0|a.busyMinDurationMs)?r=0:(o=0|a.busyDelayMs,r=(i=Ho()-(10*(1073741821-i)-(0|a.timeoutMs||5e3)))<=o?0:o+r-i),10<r){Ql(e,n),e.timeoutHandle=Sn(Ol.bind(null,e),r);break}}Ol(e);break;default:throw Error(s(329))}if(pl(e),e.callbackNode===t)return gl.bind(null,e)}}return null}function ml(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Da&(Ma|Ra))!==Oa)throw Error(s(327));if(Rl(),e===za&&t===Wa||bl(e,t),null!==Ba){var n=Da;Da|=Ma;for(var r=wl();;)try{El();break}catch(o){_l(e,o)}if(si(),Da=n,Pa.current=r,qa===Ia)throw n=Va,bl(e,t),Ql(e,t),pl(e),n;if(null!==Ba)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,za=null,Ol(e),pl(e)}return null}function yl(e,t){var n=Da;Da|=1;try{return e(t)}finally{(Da=n)===Oa&&Jo()}}function vl(e,t){var n=Da;Da&=-2,Da|=Ca;try{return e(t)}finally{(Da=n)===Oa&&Jo()}}function bl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Tn(n)),null!==Ba)for(n=Ba.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ko();break;case 3:Di(),go(bo),go(vo);break;case 5:Bi(r);break;case 4:Di();break;case 13:case 19:go(Wi);break;case 10:ai(r)}n=n.return}za=e,Ba=ql(e.current,null),Wa=t,qa=ja,Va=null,Ha=Ga=1073741823,$a=null,Ka=0,Ya=!1}function _l(e,t){for(;;){try{if(si(),Gi.current=xs,Zi)for(var n=Ki.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if($i=0,Qi=Yi=Ki=null,Zi=!1,null===Ba||null===Ba.return)return qa=Ia,Va=t,Ba=null;e:{var o=e,i=Ba.return,s=Ba,a=t;if(t=Wa,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var l=a;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.expirationTime=u.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var c=0!==(1&Wi.current),f=i;do{var d;if(d=13===f.tag){var h=f.memoizedState;if(null!==h)d=null!==h.dehydrated;else{var p=f.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(d){var g=f.updateQueue;if(null===g){var m=new Set;m.add(l),f.updateQueue=m}else g.add(l);if(0===(2&f.mode)){if(f.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=pi(1073741823,null);y.tag=2,gi(s,y)}s.expirationTime=1073741823;break e}a=void 0,s=t;var v=o.pingCache;if(null===v?(v=o.pingCache=new xa,a=new Set,v.set(l,a)):void 0===(a=v.get(l))&&(a=new Set,v.set(l,a)),!a.has(s)){a.add(s);var b=Nl.bind(null,o,l,s);l.then(b,b)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);a=Error((me(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(s))}qa!==Ua&&(qa=La),a=ia(a,s),f=i;do{switch(f.tag){case 3:l=a,f.effectTag|=4096,f.expirationTime=t,mi(f,ka(f,l,t));break e;case 1:l=a;var _=f.type,w=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===tl||!tl.has(w)))){f.effectTag|=4096,f.expirationTime=t,mi(f,Ea(f,l,t));break e}}f=f.return}while(null!==f)}Ba=Pl(Ba)}catch(x){t=x;continue}break}}function wl(){var e=Pa.current;return Pa.current=xs,null===e?xs:e}function xl(e,t){e<Ga&&2<e&&(Ga=e),null!==t&&e<Ha&&2<e&&(Ha=e,$a=t)}function kl(e){e>Ka&&(Ka=e)}function El(){for(;null!==Ba;)Ba=Tl(Ba)}function Sl(){for(;null!==Ba&&!zo();)Ba=Tl(Ba)}function Tl(e){var t=Sa(e.alternate,e,Wa);return e.memoizedProps=e.pendingProps,null===t&&(t=Pl(e)),Aa.current=null,t}function Pl(e){Ba=e;do{var t=Ba.alternate;if(e=Ba.return,0===(2048&Ba.effectTag)){if(t=ra(t,Ba,Wa),1===Wa||1!==Ba.childExpirationTime){for(var n=0,r=Ba.child;null!==r;){var o=r.expirationTime,i=r.childExpirationTime;o>n&&(n=o),i>n&&(n=i),r=r.sibling}Ba.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ba.firstEffect),null!==Ba.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ba.firstEffect),e.lastEffect=Ba.lastEffect),1<Ba.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ba:e.firstEffect=Ba,e.lastEffect=Ba))}else{if(null!==(t=oa(Ba)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ba.sibling))return t;Ba=e}while(null!==Ba);return qa===ja&&(qa=Ua),null}function Al(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Ol(e){var t=$o();return Yo(99,Cl.bind(null,e,t)),null}function Cl(e,t){do{Rl()}while(null!==rl);if((Da&(Ma|Ra))!==Oa)throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var o=Al(n);if(e.firstPendingTime=o,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===za&&(Ba=za=null,Wa=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,o=n.firstEffect):o=n:o=n.firstEffect,null!==o){var i=Da;Da|=Ra,Aa.current=null,wn=$t;var a=gn();if(mn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{l.nodeType,f.nodeType}catch(T){l=null;break e}var d=0,h=-1,p=-1,g=0,m=0,y=a,v=null;t:for(;;){for(var b;y!==l||0!==c&&3!==y.nodeType||(h=d+c),y!==f||0!==u&&3!==y.nodeType||(p=d+u),3===y.nodeType&&(d+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===a)break t;if(v===l&&++g===c&&(h=d),v===f&&++m===u&&(p=d),null!==(b=y.nextSibling))break;v=(y=v).parentNode}y=b}l=-1===h||-1===p?null:{start:h,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;xn={activeElementDetached:null,focusedElem:a,selectionRange:l},$t=!1,Ja=o;do{try{Ml()}catch(T){if(null===Ja)throw Error(s(330));Ll(Ja,T),Ja=Ja.nextEffect}}while(null!==Ja);Ja=o;do{try{for(a=e,l=t;null!==Ja;){var _=Ja.effectTag;if(16&_&&Be(Ja.stateNode,""),128&_){var w=Ja.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:ma(Ja),Ja.effectTag&=-3;break;case 6:ma(Ja),Ja.effectTag&=-3,_a(Ja.alternate,Ja);break;case 1024:Ja.effectTag&=-1025;break;case 1028:Ja.effectTag&=-1025,_a(Ja.alternate,Ja);break;case 4:_a(Ja.alternate,Ja);break;case 8:ba(a,c=Ja,l),pa(c)}Ja=Ja.nextEffect}}catch(T){if(null===Ja)throw Error(s(330));Ll(Ja,T),Ja=Ja.nextEffect}}while(null!==Ja);if(x=xn,w=gn(),_=x.focusedElem,l=x.selectionRange,w!==_&&_&&_.ownerDocument&&pn(_.ownerDocument.documentElement,_)){null!==l&&mn(_)&&(w=l.start,void 0===(x=l.end)&&(x=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(x,_.value.length)):(x=(w=_.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),c=_.textContent.length,a=Math.min(l.start,c),l=void 0===l.end?a:Math.min(l.end,c),!x.extend&&a>l&&(c=l,l=a,a=c),c=hn(_,a),f=hn(_,l),c&&f&&(1!==x.rangeCount||x.anchorNode!==c.node||x.anchorOffset!==c.offset||x.focusNode!==f.node||x.focusOffset!==f.offset)&&((w=w.createRange()).setStart(c.node,c.offset),x.removeAllRanges(),a>l?(x.addRange(w),x.extend(f.node,f.offset)):(w.setEnd(f.node,f.offset),x.addRange(w))))),w=[];for(x=_;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<w.length;_++)(x=w[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}$t=!!wn,xn=wn=null,e.current=n,Ja=o;do{try{for(_=e;null!==Ja;){var k=Ja.effectTag;if(36&k&&da(_,Ja.alternate,Ja),128&k){w=void 0;var E=Ja.ref;if(null!==E){var S=Ja.stateNode;Ja.tag,w=S,"function"===typeof E?E(w):E.current=w}}Ja=Ja.nextEffect}}catch(T){if(null===Ja)throw Error(s(330));Ll(Ja,T),Ja=Ja.nextEffect}}while(null!==Ja);Ja=null,Bo(),Da=i}else e.current=n;if(nl)nl=!1,rl=e,ol=t;else for(Ja=o;null!==Ja;)t=Ja.nextEffect,Ja.nextEffect=null,Ja=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===al?sl++:(sl=0,al=e):sl=0,"function"===typeof Ul&&Ul(n.stateNode,r),pl(e),Xa)throw Xa=!1,e=el,el=null,e;return(Da&Ca)!==Oa||Jo(),null}function Ml(){for(;null!==Ja;){var e=Ja.effectTag;0!==(256&e)&&ua(Ja.alternate,Ja),0===(512&e)||nl||(nl=!0,Qo(97,(function(){return Rl(),null}))),Ja=Ja.nextEffect}}function Rl(){if(90!==ol){var e=97<ol?97:ol;return ol=90,Yo(e,jl)}}function jl(){if(null===rl)return!1;var e=rl;if(rl=null,(Da&(Ma|Ra))!==Oa)throw Error(s(331));var t=Da;for(Da|=Ra,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ca(5,n),fa(5,n)}}catch(r){if(null===e)throw Error(s(330));Ll(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Da=t,Jo(),!0}function Il(e,t,n){gi(e,t=ka(e,t=ia(n,t),1073741823)),null!==(e=dl(e,1073741823))&&pl(e)}function Ll(e,t){if(3===e.tag)Il(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Il(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tl||!tl.has(r))){gi(n,e=Ea(n,e=ia(t,e),1073741823)),null!==(n=dl(n,1073741823))&&pl(n);break}}n=n.return}}function Nl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),za===e&&Wa===n?qa===Fa||qa===Na&&1073741823===Ga&&Ho()-Qa<Za?bl(e,Wa):Ya=!0:Yl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pl(e)))}function Fl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=cl(t=ul(),e,null)),null!==(e=dl(e,t))&&pl(e)}Sa=function(e,t,n){var r=t.expirationTime;if(null!==e){var o=t.pendingProps;if(e.memoizedProps!==o||bo.current)Ns=!0;else{if(r<n){switch(Ns=!1,t.tag){case 3:Gs(t),Is();break;case 5:if(zi(t),4&t.mode&&1!==n&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:xo(t.type)&&To(t);break;case 4:Ui(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,o=t.type._context,mo(ni,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Zs(e,t,n):(mo(Wi,1&Wi.current),null!==(t=ta(e,t,n))?t.sibling:null);mo(Wi,1&Wi.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null),mo(Wi,Wi.current),!r)return null}return ta(e,t,n)}Ns=!1}}else Ns=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=wo(t,vo.current),ui(t,n),o=es(null,t,r,e,o,n),t.effectTag|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,xo(r)){var i=!0;To(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,di(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&wi(t,r,a,e),o.updater=xi,t.stateNode=o,o._reactInternalFiber=t,Ti(t,r,e,n),t=Vs(null,t,r,!0,i,n)}else t.tag=0,Fs(null,t,o,n),t=t.child;return t;case 16:e:{if(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(o),1!==o._status)throw o._result;switch(o=o._result,t.type=o,i=t.tag=function(e){if("function"===typeof e)return Wl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===fe)return 14}return 2}(o),e=ti(o,e),i){case 0:t=Ws(null,t,o,e,n);break e;case 1:t=qs(null,t,o,e,n);break e;case 11:t=Us(null,t,o,e,n);break e;case 14:t=Ds(null,t,o,ti(o.type,e),r,n);break e}throw Error(s(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ws(e,t,r,o=t.elementType===r?o:ti(r,o),n);case 1:return r=t.type,o=t.pendingProps,qs(e,t,r,o=t.elementType===r?o:ti(r,o),n);case 3:if(Gs(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,hi(e,t),yi(t,r,null,n),(r=t.memoizedState.element)===o)Is(),t=ta(e,t,n);else{if((o=t.stateNode.hydrate)&&(Ps=Pn(t.stateNode.containerInfo.firstChild),Ts=t,o=As=!0),o)for(n=Ri(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fs(e,t,r,n),Is();t=t.child}return t;case 5:return zi(t),null===e&&Ms(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,En(r,o)?a=null:null!==i&&En(r,i)&&(t.effectTag|=16),Bs(e,t),4&t.mode&&1!==n&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fs(e,t,a,n),t=t.child),t;case 6:return null===e&&Ms(t),null;case 13:return Zs(e,t,n);case 4:return Ui(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Mi(t,null,r,n):Fs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Us(e,t,r,o=t.elementType===r?o:ti(r,o),n);case 7:return Fs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fs(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var l=t.type._context;if(mo(ni,l._currentValue),l._currentValue=i,null!==a)if(l=a.value,0===(i=qr(l,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(a.children===o.children&&!bo.current){t=ta(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&i)){1===l.tag&&((c=pi(n,null)).tag=2,gi(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),li(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,ui(t,n),r=r(o=ci(o,i.unstable_observedBits)),t.effectTag|=1,Fs(e,t,r,n),t.child;case 14:return i=ti(o=t.type,t.pendingProps),Ds(e,t,o,i=ti(o.type,i),r,n);case 15:return zs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ti(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,xo(r)?(e=!0,To(t)):e=!1,ui(t,n),Ei(t,r,o),Ti(t,r,o,n),Vs(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(s(156,t.tag))};var Ul=null,Dl=null;function zl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Bl(e,t,n,r){return new zl(e,t,n,r)}function Wl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return null===n?((n=Bl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vl(e,t,n,r,o,i){var a=2;if(r=e,"function"===typeof e)Wl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Gl(n.children,o,i,t);case ae:a=8,o|=7;break;case re:a=8,o|=1;break;case oe:return(e=Bl(12,n,t,8|o)).elementType=oe,e.type=oe,e.expirationTime=i,e;case ue:return(e=Bl(13,n,t,o)).type=ue,e.elementType=ue,e.expirationTime=i,e;case ce:return(e=Bl(19,n,t,o)).elementType=ce,e.expirationTime=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ie:a=10;break e;case se:a=9;break e;case le:a=11;break e;case fe:a=14;break e;case de:a=16,r=null;break e;case he:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Bl(a,n,t,o)).elementType=e,t.type=r,t.expirationTime=i,t}function Gl(e,t,n,r){return(e=Bl(7,e,r,t)).expirationTime=n,e}function Hl(e,t,n){return(e=Bl(6,e,null,t)).expirationTime=n,e}function $l(e,t,n){return(t=Bl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Ql(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Zl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Jl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Xl(e,t,n,r){var o=t.current,i=ul(),a=bi.suspense;i=cl(i,o,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(xo(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(xo(u)){n=So(n,u,l);break e}}n=l}else n=yo;return null===t.context?t.context=n:t.pendingContext=n,(t=pi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gi(o,t),fl(o,i),i}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function ru(e,t,n){var r=new Kl(e,t,n=null!=n&&!0===n.hydrate),o=Bl(3,null,null,2===t?7:1===t?3:0);r.current=o,o.stateNode=r,di(o),e[Rn]=r.current,n&&0!==t&&function(e,t){var n=Xe(t);Pt.forEach((function(e){gt(e,t,n)})),At.forEach((function(e){gt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function ou(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i._internalRoot;if("function"===typeof o){var a=o;o=function(){var e=eu(s);a.call(e)}}Xl(t,s,e,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ru(e,0,t?{hydrate:!0}:void 0)}(n,r),s=i._internalRoot,"function"===typeof o){var l=o;o=function(){var e=eu(s);l.call(e)}}vl((function(){Xl(t,s,e,o)}))}return eu(s)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ou(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ru.prototype.render=function(e){Xl(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Xl(null,e,null,(function(){t[Rn]=null}))},mt=function(e){if(13===e.tag){var t=ei(ul(),150,100);fl(e,t),nu(e,t)}},yt=function(e){13===e.tag&&(fl(e,3),nu(e,3))},vt=function(e){if(13===e.tag){var t=ul();fl(e,t=cl(t,e,null)),nu(e,t)}},A=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Nn(r);if(!o)throw Error(s(90));we(r),Se(r,o)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&Oe(e,!!n.multiple,t,!1)}},I=yl,L=function(e,t,n,r,o){var i=Da;Da|=4;try{return Yo(98,e.bind(null,t,n,r,o))}finally{(Da=i)===Oa&&Jo()}},N=function(){(Da&(1|Ma|Ra))===Oa&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e,t){Jl(t,e),pl(t)})),Jo()}}(),Rl())},F=function(e,t){var n=Da;Da|=2;try{return e(t)}finally{(Da=n)===Oa&&Jo()}};var au={Events:[In,Ln,Nn,T,k,qn,function(e){it(e,Wn)},R,j,Jt,lt,Rl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ul=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Dl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(o({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:jn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Da&(Ma|Ra))!==Oa)throw Error(s(187));var n=Da;Da|=1;try{return Yo(99,e.bind(null,t))}finally{Da=n,Jo()}},t.hydrate=function(e,t,n){if(!ou(t))throw Error(s(200));return iu(null,e,t,!0,n)},t.render=function(e,t,n){if(!ou(t))throw Error(s(200));return iu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ou(e))throw Error(s(40));return!!e._reactRootContainer&&(vl((function(){iu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Rn]=null}))})),!0)},t.unstable_batchedUpdates=yl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ou(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return iu(e,t,n,!1,r)},t.version="16.14.0"},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),o=60103;if("function"===typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),i("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:c,props:i,_owner:s.current}}t.jsx=u,t.jsxs=u},4202:(e,t,n)=>{"use strict";var r=n(2123),o="function"===typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,c=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,d=o?Symbol.for("react.forward_ref"):60112,h=o?Symbol.for("react.suspense"):60113,p=o?Symbol.for("react.memo"):60115,g=o?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function w(){}function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=_.prototype;var k=x.prototype=new w;k.constructor=x,r(k,_.prototype),k.isPureReactComponent=!0;var E={current:null},S=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&!T.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:s,ref:a,props:o,_owner:E.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var O=/\/+/g,C=[];function M(e,t,n,r){if(C.length){var o=C.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>C.length&&C.push(e)}function j(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case i:case s:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+L(o=e[l],l);a+=j(o,u,n,r)}else if(null===e||"object"!==typeof e?u=null:u="function"===typeof(u=m&&e[m]||e["@@iterator"])?u:null,"function"===typeof u)for(e=u.call(e),l=0;!(o=e.next()).done;)a+=j(o=o.value,u=t+L(o,l++),n,r);else if("object"===o)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function I(e,t,n){return null==e?0:j(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(O,"$&/")+"/"),I(e,F,t=M(t,i,r,o)),R(t)}var D={current:null};function z(){var e=D.current;if(null===e)throw Error(y(321));return e}var B={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;I(e,N,t=M(null,null,t,n)),R(t)},count:function(e){return I(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!A(e))throw Error(y(143));return e}},t.Component=_,t.Fragment=a,t.Profiler=u,t.PureComponent=x,t.StrictMode=l,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var o=r({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)S.call(t,c)&&!T.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];o.children=u}return{$$typeof:i,type:e.type,key:s,ref:a,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return z().useCallback(e,t)},t.useContext=function(e,t){return z().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return z().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return z().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return z().useLayoutEffect(e,t)},t.useMemo=function(e,t){return z().useMemo(e,t)},t.useReducer=function(e,t,n){return z().useReducer(e,t,n)},t.useRef=function(e){return z().useRef(e)},t.useState=function(e){return z().useState(e)},t.version="16.14.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},2940:(e,t,n)=>{"use strict";var r=n(2981),o=n(4902),i=Object;e.exports=r((function(){if(null==this||this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e}),"get flags",!0)},2488:(e,t,n)=>{"use strict";var r=n(1779),o=n(1712),i=n(2940),s=n(201),a=n(855),l=o(s());r(l,{getPolyfill:s,implementation:i,shim:a}),e.exports=l},201:(e,t,n)=>{"use strict";var r=n(2940),o=n(1779).supportsDescriptors,i=Object.getOwnPropertyDescriptor;e.exports=function(){if(o&&"gim"===/a/gim.flags){var e=i(RegExp.prototype,"flags");if(e&&"function"===typeof e.get&&"boolean"===typeof RegExp.prototype.dotAll&&"boolean"===typeof RegExp.prototype.hasIndices){var t="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(n,"sticky",{get:function(){t+="y"}}),"dy"===t)return e.get}}return r}},855:(e,t,n)=>{"use strict";var r=n(1779).supportsDescriptors,o=n(201),i=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,u=/a/;e.exports=function(){if(!r||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=o(),t=l(u),n=i(t,"flags");return n&&n.get===e||s(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},7234:(e,t)=>{"use strict";var n,r,o,i,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,l=null,u=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(u,0),n}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(u,0))},r=function(e,t){l=setTimeout(e,t)},o=function(){clearTimeout(l)},i=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,h=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var m=d.now();t.unstable_now=function(){return d.now()-m}}var y=!1,v=null,b=-1,_=5,w=0;i=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,k=x.port2;x.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();w=e+_;try{v(!0,e)?k.postMessage(null):(y=!1,v=null)}catch(n){throw k.postMessage(null),n}}else y=!1},n=function(e){v=e,y||(y=!0,k.postMessage(null))},r=function(e,n){b=h((function(){e(t.unstable_now())}),n)},o=function(){p(b),b=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<P(o,t)))break e;e[r]=t,e[n]=o,n=r}}function S(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var i=2*(r+1)-1,s=e[i],a=i+1,l=e[a];if(void 0!==s&&0>P(s,n))void 0!==l&&0>P(l,s)?(e[r]=l,e[a]=n,r=a):(e[r]=s,e[i]=n,r=i);else{if(!(void 0!==l&&0>P(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function P(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],O=[],C=1,M=null,R=3,j=!1,I=!1,L=!1;function N(e){for(var t=S(O);null!==t;){if(null===t.callback)T(O);else{if(!(t.startTime<=e))break;T(O),t.sortIndex=t.expirationTime,E(A,t)}t=S(O)}}function F(e){if(L=!1,N(e),!I)if(null!==S(A))I=!0,n(U);else{var t=S(O);null!==t&&r(F,t.startTime-e)}}function U(e,n){I=!1,L&&(L=!1,o()),j=!0;var s=R;try{for(N(n),M=S(A);null!==M&&(!(M.expirationTime>n)||e&&!i());){var a=M.callback;if(null!==a){M.callback=null,R=M.priorityLevel;var l=a(M.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?M.callback=l:M===S(A)&&T(A),N(n)}else T(A);M=S(A)}if(null!==M)var u=!0;else{var c=S(O);null!==c&&r(F,c.startTime-n),u=!1}return u}finally{M=null,R=s,j=!1}}function D(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var z=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){I||j||(I=!0,n(U))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return S(A)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();if("object"===typeof s&&null!==s){var l=s.delay;l="number"===typeof l&&0<l?a+l:a,s="number"===typeof s.timeout?s.timeout:D(e)}else s=D(e),l=a;return e={id:C++,callback:i,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(e.sortIndex=l,E(O,e),null===S(A)&&e===S(O)&&(L?o():L=!0,r(F,l-a))):(e.sortIndex=s,E(A,e),I||j||(I=!0,n(U))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();N(e);var n=S(A);return n!==M&&null!==M&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<M.expirationTime||i()},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},5438:(e,t,n)=>{"use strict";var r=n(2),o=n(4992),i=n(2101)(),s=n(5558),a=n(4902),l=r("%Math.floor%");e.exports=function(e,t){if("function"!==typeof e)throw new a("`fn` is not a function");if("number"!==typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,u=!0;if("length"in e&&s){var c=s(e,"length");c&&!c.configurable&&(r=!1),c&&!c.writable&&(u=!1)}return(r||u||!n)&&(i?o(e,"length",t,!0,!0):o(e,"length",t)),e}},2981:(e,t,n)=>{"use strict";var r=n(4992),o=n(2101)(),i=n(7699).functionsHaveConfigurableNames(),s=n(4902);e.exports=function(e,t){if("function"!==typeof e)throw new s("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!i||(o?r(e,"name",t,!0,!0):r(e,"name",t)),e}},9269:(e,t,n)=>{"use strict";var r=n(2),o=n(2028),i=n(8206),s=n(4902),a=r("%WeakMap%",!0),l=r("%Map%",!0),u=o("WeakMap.prototype.get",!0),c=o("WeakMap.prototype.set",!0),f=o("WeakMap.prototype.has",!0),d=o("Map.prototype.get",!0),h=o("Map.prototype.set",!0),p=o("Map.prototype.has",!0),g=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new s("Side channel does not contain "+i(e))},get:function(r){if(a&&r&&("object"===typeof r||"function"===typeof r)){if(e)return u(e,r)}else if(l){if(t)return d(t,r)}else if(n)return function(e,t){var n=g(e,t);return n&&n.value}(n,r)},has:function(r){if(a&&r&&("object"===typeof r||"function"===typeof r)){if(e)return f(e,r)}else if(l){if(t)return p(t,r)}else if(n)return function(e,t){return!!g(e,t)}(n,r);return!1},set:function(r,o){a&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new a),c(e,r,o)):l?(t||(t=new l),h(t,r,o)):(n||(n={key:{},next:null}),function(e,t,n){var r=g(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,o))}};return r}},9849:(e,t,n)=>{"use strict";var r=n(7199),o=Array.prototype.concat,i=Array.prototype.slice,s=e.exports=function(e){for(var t=[],n=0,s=e.length;n<s;n++){var a=e[n];r(a)?t=o.call(t,i.call(a)):t.push(a)}return t};s.wrap=function(e){return function(){return e(s(arguments))}}},7199:e=>{e.exports=function(e){return!(!e||"string"===typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},6487:(e,t,n)=>{"use strict";var r=n(6712),o=SyntaxError,i="object"===typeof StopIteration?StopIteration:null;e.exports=function(e){if(!i)throw new o("this environment lacks StopIteration");r.set(e,"[[Done]]",!1);var t={next:function(){var e=r.get(this,"[[Iterator]]"),t=r.get(e,"[[Done]]");try{return{done:t,value:t?void 0:e.next()}}catch(n){if(r.set(e,"[[Done]]",!0),n!==i)throw n;return{done:!0,value:void 0}}}};return r.set(t,"[[Iterator]]",e),t}},728:(e,t,n)=>{"use strict";var r=n(5766),o=n(2042),i=n(7787),s=n(4107),a=n(3008);e.exports=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e?null:r(e)?"String":o(e)?"Number":i(e)?"Boolean":s(e)?"Symbol":a(e)?"BigInt":void 0}},4696:(e,t,n)=>{"use strict";var r=n(1787),o=n(869),i=n(2735),s=n(6641);e.exports=function(e){if(e&&"object"===typeof e){if(r(e))return"Map";if(o(e))return"Set";if(i(e))return"WeakMap";if(s(e))return"WeakSet"}return!1}},8004:(e,t,n)=>{"use strict";var r=n(1903),o=n(2936),i=n(1712),s=n(2028),a=n(5558),l=s("Object.prototype.toString"),u=n(4635)(),c="undefined"===typeof globalThis?n.g:globalThis,f=o(),d=s("String.prototype.slice"),h=Object.getPrototypeOf,p=s("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},g={__proto__:null};r(f,u&&a&&h?function(e){var t=new c[e];if(Symbol.toStringTag in t){var n=h(t),r=a(n,Symbol.toStringTag);if(!r){var o=h(n);r=a(o,Symbol.toStringTag)}g["$"+e]=i(r.get)}}:function(e){var t=new c[e],n=t.slice||t.set;n&&(g["$"+e]=i(n))});e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!u){var t=d(l(e),8,-1);return p(f,t)>-1?t:"Object"===t&&function(e){var t=!1;return r(g,(function(n,r){if(!t)try{n(e),t=d(r,1)}catch(o){}})),t}(e)}return a?function(e){var t=!1;return r(g,(function(n,r){if(!t)try{"$"+n(e)===r&&(t=d(r,1))}catch(o){}})),t}(e):null}},49:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var r=arguments[n];for(var o in r)t.call(r,o)&&(e[o]=r[o])}return e};var t=Object.prototype.hasOwnProperty},2634:()=>{},2936:(e,t,n)=>{"use strict";var r=n(7163),o="undefined"===typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"===typeof o[r[t]]&&(e[e.length]=r[t]);return e}},7991:(e,t,n)=>{"use strict";var r=n(8317),o=n(6487);if(n(2108)()||n(9534)()){var i=Symbol.iterator;e.exports=function(e){return null!=e&&"undefined"!==typeof e[i]?e[i]():r(e)?Array.prototype[i].call(e):void 0}}else{var s=n(1141),a=n(5766),l=n(2),u=l("%Map%",!0),c=l("%Set%",!0),f=n(2028),d=f("Array.prototype.push"),h=f("String.prototype.charCodeAt"),p=f("String.prototype.slice"),g=function(e){var t=0;return{next:function(){var n,r=t>=e.length;return r||(n=e[t],t+=1),{done:r,value:n}}}},m=function(e,t){if(s(e)||r(e))return g(e);if(a(e)){var n=0;return{next:function(){var t=function(e,t){if(t+1>=e.length)return t+1;var n=h(e,t);if(n<55296||n>56319)return t+1;var r=h(e,t+1);return r<56320||r>57343?t+1:t+2}(e,n),r=p(e,n,t);return n=t,{done:t>e.length,value:r}}}}return t&&"undefined"!==typeof e["_es6-shim iterator_"]?e["_es6-shim iterator_"]():void 0};if(u||c){var y=n(1787),v=n(869),b=f("Map.prototype.forEach",!0),_=f("Set.prototype.forEach",!0);if("undefined"===typeof process||!process.versions||!process.versions.node)var w=f("Map.prototype.iterator",!0),x=f("Set.prototype.iterator",!0);var k=f("Map.prototype.@@iterator",!0)||f("Map.prototype._es6-shim iterator_",!0),E=f("Set.prototype.@@iterator",!0)||f("Set.prototype._es6-shim iterator_",!0);e.exports=function(e){return function(e){if(y(e)){if(w)return o(w(e));if(k)return k(e);if(b){var t=[];return b(e,(function(e,n){d(t,[n,e])})),g(t)}}if(v(e)){if(x)return o(x(e));if(E)return E(e);if(_){var n=[];return _(e,(function(e){d(n,e)})),g(n)}}}(e)||m(e)}}else e.exports=function(e){if(null!=e)return m(e,!0)}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(i,s),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{453:"16f7cfac",879:"36d4c7f4"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="golyanovo2024-agit-map:";n.l=(r,o,i,s)=>{if(e[r])e[r].push(o);else{var a,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var f=u[c];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+i){a=f;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[o];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(h);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/golyanovo2024-agit-map/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,o[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,s=r[0],a=r[1],l=r[2],u=0;if(s.some((t=>0!==e[t]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)l(n)}for(t&&t(r);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkgolyanovo2024_agit_map=self.webpackChunkgolyanovo2024_agit_map||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>$t,hasStandardBrowserEnv:()=>Kt,hasStandardBrowserWebWorkerEnv:()=>Qt,origin:()=>Zt});var t=n(5043),r=n(7950);const o=t.createContext(null);function i(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n){if(!t.hasOwnProperty(o))return!1;if(!i(e[o],t[o]))return!1}return!0}return!1}function s(e,t){if(!e.getProjection)return;const n=e.getProjection();i(n,t.getProjection())||t.setProjection(n)}function a(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function l(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),r=r||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,r=r||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,r=r||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,r=r||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const u=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function c(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map((e=>{let n=null;"interactive"in e&&(n=Object.assign({},e),delete n.interactive);const r=t[e.ref];if(r){n=n||Object.assign({},e),delete n.ref;for(const e of u)e in r&&(n[e]=r[e])}return n||e}));return{...e,layers:n}}const f={version:8,sources:{},layers:[]},d={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},h={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},p={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},g=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],m=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class y{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[p[e.type]];t?t(e):"error"===e.type&&console.error(e.error)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[d[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[h[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const r=this._updateSize(e),o=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=y.savedMaps.pop();if(!n)return null;const r=n.map,o=r.getContainer();for(t.className=o.className;o.childNodes.length>0;)t.appendChild(o.childNodes[0]);r._container=t;const i=r._resizeObserver;i&&(i.disconnect(),i.observe(t)),n.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:s}=e;return s&&(s.bounds?r.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):n._updateViewState(s,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),r._update(),n}_initialize(e){const{props:t}=this,{mapStyle:n=f}=t,r={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||v()||null,container:e,style:c(n)},o=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const i=new this._MapClass(r);o.padding&&i.setPadding(o.padding),t.cursor&&(i.getCanvas().style.cursor=t.cursor),this._createShadowTransform(i);const a=i._render;i._render=e=>{this._inRender=!0,a.call(i,e),this._inRender=!1};const l=i._renderTaskQueue.run;i._renderTaskQueue.run=e=>{l.call(i._renderTaskQueue,e),this._onBeforeRepaint()},i.on("render",(()=>this._onAfterRepaint()));const u=i.fire;i.fire=this._fireEvent.bind(this,u),i.on("resize",(()=>{this._renderTransform.resize(i.transform.width,i.transform.height)})),i.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),s(i.transform,this._renderTransform)})),i.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const s in d)i.on(s,this._onPointerEvent);for(const s in h)i.on(s,this._onCameraEvent);for(const s in p)i.on(s,this._onEvent);this._map=i}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null===e||void 0===e||e.remove(),y.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:o,pitch:i,bearing:s}=r,u=n.isMoving();u&&(r.cameraElevationReference="sea");const c=l(r,{...a(n.transform),...e});if(u&&(r.cameraElevationReference="ground"),c&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=o!==r.zoom),e.rotate||(e.rotate=s!==r.bearing),e.pitch||(e.pitch=i!==r.pitch)}return u||l(n.transform,e),c}_updateSettings(e,t){const n=this._map;let r=!1;for(const o of g)if(o in e&&!i(e[o],t[o])){r=!0;const t=n["set".concat(o[0].toUpperCase()).concat(o.slice(1))];null===t||void 0===t||t.call(n,e[o])}return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:t=f,styleDiffing:n=!0}=e,r={diff:n};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(c(t),r),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let r=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!i(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!i(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!i(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}_updateHandlers(e,t){var n,r;const o=this._map;let s=!1;for(const a of m){const l=null===(n=e[a])||void 0===n||n;i(l,null===(r=t[a])||void 0===r||r)||(s=!0,l?o[a].enable(l):o[a].disable())}return s}_queryRenderedFeatures(e){const t=this._map,n=t.transform,{interactiveLayerIds:r=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:r.filter(t.getLayer.bind(t))})}catch(yi){return[]}finally{t.transform=n}}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=e.type,r=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,o=this._queryRenderedFeatures(e.point),i=o.length>0;!i&&r&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=o,i&&!r&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}_fireEvent(e,t,n){const r=this._map,o=r.transform,i="string"===typeof t?t:t.type;return"move"===i&&this._updateViewState(this.props,!1),i in h&&("object"===typeof t&&(t.viewState=a(o)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=o,r):(e.call(r,t,n),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{s(this._renderTransform,t),e.transform=t}}}function v(){let e=null;if("undefined"!==typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/golyanovo2024-agit-map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(yi){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/golyanovo2024-agit-map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(t){}return e}y.savedMaps=[];const b=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function _(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const r=t.transform;t.transform=e.transform;const o=t.project(n);return t.transform=r,o},unproject:n=>{const r=t.transform;t.transform=e.transform;const o=t.unproject(n);return t.transform=r,o},queryTerrainElevation:(n,r)=>{const o=t.transform;t.transform=e.transform;const i=t.queryTerrainElevation(n,r);return t.transform=o,i},queryRenderedFeatures:(n,r)=>{const o=t.transform;t.transform=e.transform;const i=t.queryRenderedFeatures(n,r);return t.transform=o,i}};for(const r of function(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}(t))r in n||b.includes(r)||(n[r]=t[r].bind(t));return n}const w="undefined"!==typeof document?t.useLayoutEffect:t.useEffect,x=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const k=t.createContext(null);function E(e,n,r){const i=(0,t.useContext)(o),[s,a]=(0,t.useState)(null),l=(0,t.useRef)(),{current:u}=(0,t.useRef)({mapLib:null,map:null});(0,t.useEffect)((()=>{const t=e.mapLib;let n,o=!0;return Promise.resolve(t||r).then((t=>{if(!o)return;if(!t)throw new Error("Invalid mapLib");const r="Map"in t?t:t.default;if(!r.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const r of x)r in t&&(e[r]=t[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(n,(e=>{e&&console.error(e)}),!0)}(r,e),r.supported&&!r.supported(e))throw new Error("Map is not supported by this browser");e.reuseMaps&&(n=y.reuse(e,l.current)),n||(n=new y(r.Map,e,l.current)),u.map=_(n),u.mapLib=r,a(n),null===i||void 0===i||i.onMapMount(u.map,e.id)})).catch((t=>{const{onError:n}=e;n?n({type:"error",target:null,originalEvent:null,error:t}):console.error(t)})),()=>{o=!1,n&&(null===i||void 0===i||i.onMapUnmount(e.id),e.reuseMaps?n.recycle():n.destroy())}}),[]),w((()=>{s&&s.setProps(e)})),(0,t.useImperativeHandle)(n,(()=>u.map),[s]);const c=(0,t.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...e.style})),[e.style]);return t.createElement("div",{id:e.id,ref:l,style:c},s&&t.createElement(k.Provider,{value:u},t.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},e.children)))}const S=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function T(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const e=t[r];Number.isFinite(e)&&!S.test(r)?n[r]="".concat(e,"px"):n[r]=e}}(0,t.memo)((0,t.forwardRef)((function(e,n){const{map:o,mapLib:i}=(0,t.useContext)(k),s=(0,t.useRef)({props:e});s.current.props=e;const a=(0,t.useMemo)((()=>{let n=!1;t.Children.forEach(e.children,(e=>{e&&(n=!0)}));const r={...e,element:n?document.createElement("div"):null},o=new i.Marker(r);return o.setLngLat([e.longitude,e.latitude]),o.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=s.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:o,originalEvent:e})})),o.on("dragstart",(e=>{var t,n;const r=e;r.lngLat=a.getLngLat(),null===(n=(t=s.current.props).onDragStart)||void 0===n||n.call(t,r)})),o.on("drag",(e=>{var t,n;const r=e;r.lngLat=a.getLngLat(),null===(n=(t=s.current.props).onDrag)||void 0===n||n.call(t,r)})),o.on("dragend",(e=>{var t,n;const r=e;r.lngLat=a.getLngLat(),null===(n=(t=s.current.props).onDragEnd)||void 0===n||n.call(t,r)})),o}),[]);(0,t.useEffect)((()=>(a.addTo(o.getMap()),()=>{a.remove()})),[]);const{longitude:l,latitude:u,offset:c,style:f,draggable:d=!1,popup:h=null,rotation:p=0,rotationAlignment:g="auto",pitchAlignment:m="auto"}=e;return(0,t.useEffect)((()=>{T(a.getElement(),f)}),[f]),(0,t.useImperativeHandle)(n,(()=>a),[]),a.getLngLat().lng===l&&a.getLngLat().lat===u||a.setLngLat([l,u]),c&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,o=Array.isArray(t)?t[0]:t?t.x:0,i=Array.isArray(t)?t[1]:t?t.y:0;return n===o&&r===i}(a.getOffset(),c)&&a.setOffset(c),a.isDraggable()!==d&&a.setDraggable(d),a.getRotation()!==p&&a.setRotation(p),a.getRotationAlignment()!==g&&a.setRotationAlignment(g),a.getPitchAlignment()!==m&&a.setPitchAlignment(m),a.getPopup()!==h&&a.setPopup(h),(0,r.createPortal)(e.children,a.getElement())})));function P(e){return new Set(e?e.trim().split(/\s+/):[])}(0,t.memo)((0,t.forwardRef)((function(e,n){const{map:o,mapLib:s}=(0,t.useContext)(k),a=(0,t.useMemo)((()=>document.createElement("div")),[]),l=(0,t.useRef)({props:e});l.current.props=e;const u=(0,t.useMemo)((()=>{const t={...e},n=new s.Popup(t);return n.setLngLat([e.longitude,e.latitude]),n.once("open",(e=>{var t,n;null===(n=(t=l.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,t.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=l.current.props).onClose)||void 0===n||n.call(t,e)};return u.on("close",e),u.setDOMContent(a).addTo(o.getMap()),()=>{u.off("close",e),u.isOpen()&&u.remove()}}),[]),(0,t.useEffect)((()=>{T(u.getElement(),e.style)}),[e.style]),(0,t.useImperativeHandle)(n,(()=>u),[]),u.isOpen()&&(u.getLngLat().lng===e.longitude&&u.getLngLat().lat===e.latitude||u.setLngLat([e.longitude,e.latitude]),e.offset&&!i(u.options.offset,e.offset)&&u.setOffset(e.offset),u.options.anchor===e.anchor&&u.options.maxWidth===e.maxWidth||(u.options.anchor=e.anchor,u.setMaxWidth(e.maxWidth)),u.options.className!==e.className)){const t=P(u.options.className),n=P(e.className);for(const e of t)n.has(e)||u.removeClassName(e);for(const e of n)t.has(e)||u.addClassName(e);u.options.className=e.className}return(0,r.createPortal)(e.children,a)})));const A=function(e,n,r,o){const i=(0,t.useContext)(k),s=(0,t.useMemo)((()=>e(i)),[]);return(0,t.useEffect)((()=>{const e=o||r||n,t="function"===typeof n&&"function"===typeof r?n:null,a="function"===typeof r?r:"function"===typeof n?n:null,{map:l}=i;return l.hasControl(s)||(l.addControl(s,null===e||void 0===e?void 0:e.position),t&&t(i)),()=>{a&&a(i),l.hasControl(s)&&l.removeControl(s)}}),[]),s};(0,t.memo)((function(e){const n=A((t=>{let{mapLib:n}=t;return new n.AttributionControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{T(n._container,e.style)}),[e.style]),null}));(0,t.memo)((function(e){const n=A((t=>{let{mapLib:n}=t;return new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,t.useEffect)((()=>{T(n._controlContainer,e.style)}),[e.style]),null}));const O=(0,t.memo)((0,t.forwardRef)((function(e,n){const r=(0,t.useRef)({props:e}),o=A((t=>{let{mapLib:n}=t;const o=new n.GeolocateControl(e),i=o._setupUI;return o._setupUI=e=>{o._container.hasChildNodes()||i(e)},o.on("geolocate",(e=>{var t,n;null===(n=(t=r.current.props).onGeolocate)||void 0===n||n.call(t,e)})),o.on("error",(e=>{var t,n;null===(n=(t=r.current.props).onError)||void 0===n||n.call(t,e)})),o.on("outofmaxbounds",(e=>{var t,n;null===(n=(t=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),o.on("trackuserlocationstart",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),o.on("trackuserlocationend",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),o}),{position:e.position});return r.current.props=e,(0,t.useImperativeHandle)(n,(()=>o),[]),(0,t.useEffect)((()=>{T(o._container,e.style)}),[e.style]),null})));const C=(0,t.memo)((function(e){const n=A((t=>{let{mapLib:n}=t;return new n.NavigationControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{T(n._container,e.style)}),[e.style]),null}));(0,t.memo)((function(e){const n=A((t=>{let{mapLib:n}=t;return new n.ScaleControl(e)}),{position:e.position}),r=(0,t.useRef)(e),o=r.current;r.current=e;const{style:i}=e;return void 0!==e.maxWidth&&e.maxWidth!==o.maxWidth&&(n.options.maxWidth=e.maxWidth),void 0!==e.unit&&e.unit!==o.unit&&n.setUnit(e.unit),(0,t.useEffect)((()=>{T(n._container,i)}),[i]),null}));function M(e,t){if(!e)throw new Error(t)}let R=0;const j=function(e){const n=(0,t.useContext)(k).map.getMap(),r=(0,t.useRef)(e),[,o]=(0,t.useState)(0),s=(0,t.useMemo)((()=>e.id||"jsx-layer-".concat(R++)),[]);if((0,t.useEffect)((()=>{if(n){const e=()=>o((e=>e+1));return n.on("styledata",e),e(),()=>{n.off("styledata",e),n.style&&n.style._loaded&&n.getLayer(s)&&n.removeLayer(s)}}}),[n]),n&&n.style&&n.getLayer(s))try{!function(e,t,n,r){if(M(n.id===r.id,"layer id changed"),M(n.type===r.type,"layer type changed"),"custom"===n.type||"custom"===r.type)return;const{layout:o={},paint:s={},filter:a,minzoom:l,maxzoom:u,beforeId:c}=n;if(c!==r.beforeId&&e.moveLayer(t,c),o!==r.layout){const n=r.layout||{};for(const r in o)i(o[r],n[r])||e.setLayoutProperty(t,r,o[r]);for(const r in n)o.hasOwnProperty(r)||e.setLayoutProperty(t,r,void 0)}if(s!==r.paint){const n=r.paint||{};for(const r in s)i(s[r],n[r])||e.setPaintProperty(t,r,s[r]);for(const r in n)s.hasOwnProperty(r)||e.setPaintProperty(t,r,void 0)}i(a,r.filter)||e.setFilter(t,a),l===r.minzoom&&u===r.maxzoom||e.setLayerZoomRange(t,l,u)}(n,s,e,r.current)}catch(a){console.warn(a)}else!function(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const r={...n,id:t};delete r.beforeId,e.addLayer(r,n.beforeId)}}(n,s,e);return r.current=e,null};let I=0;const L=function(e){const n=(0,t.useContext)(k).map.getMap(),r=(0,t.useRef)(e),[,o]=(0,t.useState)(0),s=(0,t.useMemo)((()=>e.id||"jsx-source-".concat(I++)),[]);(0,t.useEffect)((()=>{if(n){const e=()=>setTimeout((()=>o((e=>e+1))),0);return n.on("styledata",e),e(),()=>{var t;if(n.off("styledata",e),n.style&&n.style._loaded&&n.getSource(s)){const e=null===(t=n.getStyle())||void 0===t?void 0:t.layers;if(e)for(const t of e)t.source===s&&n.removeLayer(t.id);n.removeSource(s)}}}}),[n]);let a=n&&n.style&&n.getSource(s);return a?function(e,t,n){M(t.id===n.id,"source id changed"),M(t.type===n.type,"source type changed");let r="",o=0;for(const a in t)"children"===a||"id"===a||i(n[a],t[a])||(r=a,o++);if(!o)return;const s=t.type;if("geojson"===s)e.setData(t.data);else if("image"===s)e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&1===o&&"coordinates"===r)e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(r){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles)}else console.warn("Unable to update <Source> prop: ".concat(r))}(a,e,r.current):a=function(e,t,n){if(e.style&&e.style._loaded){const r={...n};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}return null}(n,s,e),r.current=e,a&&t.Children.map(e.children,(e=>e&&(0,t.cloneElement)(e,{source:s})))||null};const N=n.e(879).then(n.t.bind(n,879,23)),F=t.forwardRef((function(e,t){return E(e,t,N)})),U=C,D=O,z=j,B=L,W=F;var q=n(8434),V=Object.defineProperty,G=(e,t)=>V(e,"name",{value:t,configurable:!0}),H=class{constructor(e){var t,n,r;this.direction=!1,this.compareProperties=!0,this.precision=10**-(null!=(t=null==e?void 0:e.precision)?t:17),this.direction=null!=(n=null==e?void 0:e.direction)&&n,this.compareProperties=null==(r=null==e?void 0:e.compareProperties)||r}compare(e,t){if(e.type!==t.type)return!1;if(!$(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){const n=K(e),r=K(t);return n.every((e=>r.some((t=>this.compare(e,t)))))}}return!1}compareCoord(e,t){return e.length===t.length&&e.every(((e,n)=>Math.abs(e-t[n])<this.precision))}compareLine(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!$(e,t))return!1;const o=e;let i=t;if(r&&!this.compareCoord(o[0],i[0])){const e=this.fixStartIndex(i,o);if(!e)return!1;i=e}const s=this.compareCoord(o[n],i[n]);return this.direction||s?this.comparePath(o,i):!!this.compareCoord(o[n],i[i.length-(1+n)])&&this.comparePath(o.slice().reverse(),i)}fixStartIndex(e,t){let n,r=-1;for(let o=0;o<e.length;o++)if(this.compareCoord(e[o],t[0])){r=o;break}return r>=0&&(n=[].concat(e.slice(r,e.length),e.slice(1,r+1))),n}comparePath(e,t){return e.every(((e,n)=>this.compareCoord(e,t[n])))}comparePolygon(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){const n=e.coordinates.slice(1,e.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length);return n.every((e=>r.some((t=>this.compareLine(e,t,1,!0)))))}return!1}compareGeometryCollection(e,t){return $(e.geometries,t.geometries)&&this.compareBBox(e,t)&&e.geometries.every(((e,n)=>this.compare(e,t.geometries[n])))}compareFeature(e,t){return e.id===t.id&&(!this.compareProperties||q(e.properties,t.properties))&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}compareFeatureCollection(e,t){return $(e.features,t.features)&&this.compareBBox(e,t)&&e.features.every(((e,n)=>this.compare(e,t.features[n])))}compareBBox(e,t){return Boolean(!e.bbox&&!t.bbox)||!(!e.bbox||!t.bbox)&&this.compareCoord(e.bbox,t.bbox)}};G(H,"GeojsonEquality");function $(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}function K(e){return e.coordinates.map((t=>({type:e.type.replace("Multi",""),coordinates:t})))}G($,"sameLength"),G(K,"explode");var Y=6371008.8,Q={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:39.37*Y,kilometers:6371.0088,kilometres:6371.0088,meters:Y,metres:Y,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:Y/1852,radians:1,yards:6967335.223679999},Z={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function J(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function X(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ue(e[0])||!ue(e[1]))throw new Error("coordinates must contain numbers");return J({type:"Point",coordinates:e},t,n)}function ee(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(const r of e){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let e=0;e<r[r.length-1].length;e++)if(r[r.length-1][e]!==r[0][e])throw new Error("First and last Position are not equivalent.")}return J({type:"Polygon",coordinates:e},t,n)}function te(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return J({type:"LineString",coordinates:e},t,n)}function ne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function re(e,t){return J({type:"MultiLineString",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function oe(e,t){return J({type:"MultiPoint",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ie(e,t){return J({type:"MultiPolygon",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers";const n=Q[t];if(!n)throw new Error(t+" units is invalid");return e*n}function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers";const n=Q[t];if(!n)throw new Error(t+" units is invalid");return e/n}function le(e){return 180*(e%(2*Math.PI))/Math.PI}function ue(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function ce(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)}G(J,"feature"),G((function(e,t){switch(e){case"Point":return X(t).geometry;case"LineString":return te(t).geometry;case"Polygon":return ee(t).geometry;case"MultiPoint":return oe(t).geometry;case"MultiLineString":return re(t).geometry;case"MultiPolygon":return ie(t).geometry;default:throw new Error(e+" is invalid")}}),"geometry"),G(X,"point"),G((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ne(e.map((e=>X(e,t))),n)}),"points"),G(ee,"polygon"),G((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ne(e.map((e=>ee(e,t))),n)}),"polygons"),G(te,"lineString"),G((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ne(e.map((e=>te(e,t))),n)}),"lineStrings"),G(ne,"featureCollection"),G(re,"multiLineString"),G(oe,"multiPoint"),G(ie,"multiPolygon"),G((function(e,t){return J({type:"GeometryCollection",geometries:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}),"geometryCollection"),G((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}),"round"),G(se,"radiansToLength"),G(ae,"lengthToRadians"),G((function(e,t){return le(ae(e,t))}),"lengthToDegrees"),G((function(e){let t=e%360;return t<0&&(t+=360),t}),"bearingToAzimuth"),G(le,"radiansToDegrees"),G((function(e){return e%360*Math.PI/180}),"degreesToRadians"),G((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(e>=0))throw new Error("length must be a positive number");return se(ae(e,t),n)}),"convertLength"),G((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(e>=0))throw new Error("area must be a positive number");const r=Z[t];if(!r)throw new Error("invalid original units");const o=Z[n];if(!o)throw new Error("invalid final units");return e/r*o}),"convertArea"),G(ue,"isNumber"),G(ce,"isObject"),G((function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((e=>{if(!ue(e))throw new Error("bbox must only contain numbers")}))}),"validateBBox"),G((function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}),"validateId");var fe=Object.defineProperty,de=(e,t)=>fe(e,"name",{value:t,configurable:!0});function he(e,t,n){if(null!==e)for(var r,o,i,s,a,l,u,c,f=0,d=0,h=e.type,p="FeatureCollection"===h,g="Feature"===h,m=p?e.features.length:1,y=0;y<m;y++){a=(c=!!(u=p?e.features[y].geometry:g?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<a;v++){var b=0,_=0;if(null!==(s=c?u.geometries[v]:u)){l=s.coordinates;var w=s.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(l,d,y,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===t(l[r],d,y,b,_))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(o=0;o<l[r].length-f;o++){if(!1===t(l[r][o],d,y,b,_))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,o=0;o<l[r].length;o++){for(i=0;i<l[r][o].length-f;i++){if(!1===t(l[r][o][i],d,y,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===he(s.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pe(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function ge(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function me(e,t){var n,r,o,i,s,a,l,u,c,f,d=0,h="FeatureCollection"===e.type,p="Feature"===e.type,g=h?e.features.length:1;for(n=0;n<g;n++){for(a=h?e.features[n].geometry:p?e.geometry:e,u=h?e.features[n].properties:p?e.properties:{},c=h?e.features[n].bbox:p?e.bbox:void 0,f=h?e.features[n].id:p?e.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=l?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,d,u,c,f))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],d,u,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,u,c,f))return!1;d++}}function ye(e,t){me(e,(function(e,n,r,o,i){var s,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==t(J(e,r,{bbox:o,id:i}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<e.coordinates.length;l++){var u=e.coordinates[l];if(!1===t(J({type:s,coordinates:u},r),n,l))return!1}}))}function ve(e,t){ye(e,(function(e,n,r){var o=0;if(e.geometry){var i=e.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var s,a=0,l=0,u=0;return!1!==he(e,(function(i,c,f,d,h){if(void 0===s||n>a||d>l||h>u)return s=i,a=n,l=d,u=h,void(o=0);var p=te([s,i],e.properties);if(!1===t(p,n,r,h,o))return!1;o++,s=i}))&&void 0}}}))}function be(e,t){if(!e)throw new Error("geojson is required");ye(e,(function(e,n,r){if(null!==e.geometry){var o=e.geometry.type,i=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<i.length;s++)if(!1===t(te(i[s],e.properties),n,r,s))return!1}}}))}de(he,"coordEach"),de((function(e,t,n,r){var o=n;return he(e,(function(e,r,i,s,a){o=0===r&&void 0===n?e:t(o,e,r,i,s,a)}),r),o}),"coordReduce"),de(pe,"propEach"),de((function(e,t,n){var r=n;return pe(e,(function(e,o){r=0===o&&void 0===n?e:t(r,e,o)})),r}),"propReduce"),de(ge,"featureEach"),de((function(e,t,n){var r=n;return ge(e,(function(e,o){r=0===o&&void 0===n?e:t(r,e,o)})),r}),"featureReduce"),de((function(e){var t=[];return he(e,(function(e){t.push(e)})),t}),"coordAll"),de(me,"geomEach"),de((function(e,t,n){var r=n;return me(e,(function(e,o,i,s,a){r=0===o&&void 0===n?e:t(r,e,o,i,s,a)})),r}),"geomReduce"),de(ye,"flattenEach"),de((function(e,t,n){var r=n;return ye(e,(function(e,o,i){r=0===o&&0===i&&void 0===n?e:t(r,e,o,i)})),r}),"flattenReduce"),de(ve,"segmentEach"),de((function(e,t,n){var r=n,o=!1;return ve(e,(function(e,i,s,a,l){r=!1===o&&void 0===n?e:t(r,e,i,s,a,l),o=!0})),r}),"segmentReduce"),de(be,"lineEach"),de((function(e,t,n){var r=n;return be(e,(function(e,o,i,s){r=0===o&&void 0===n?e:t(r,e,o,i,s)})),r}),"lineReduce"),de((function(e,t){if(!ce(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.segmentIndex||0,a=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),a=a||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":a=a||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),te([l[s],l[s+1]],a,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),te([l[i][s],l[i][s+1]],a,t);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),te([l[o][s],l[o][s+1]],a,t);case"MultiPolygon":return o<0&&(o=l.length+o),i<0&&(i=l[o].length+i),s<0&&(s=l[o][i].length-s-1),te([l[o][i][s],l[o][i][s+1]],a,t)}throw new Error("geojson is invalid")}),"findSegment"),de((function(e,t){if(!ce(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.coordIndex||0,a=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),a=a||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":a=a||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return X(l,a,t);case"MultiPoint":return o<0&&(o=l.length+o),X(l[o],a,t);case"LineString":return s<0&&(s=l.length+s),X(l[s],a,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),X(l[i][s],a,t);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),X(l[o][s],a,t);case"MultiPolygon":return o<0&&(o=l.length+o),i<0&&(i=l[o].length+i),s<0&&(s=l[o][i].length-s),X(l[o][i][s],a,t)}throw new Error("geojson is invalid")}),"findPoint");function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,o=0;return he(e,(function(e){n+=e[0],r+=e[1],o++}),!0),X([n/o,r/o],t.properties)}(0,Object.defineProperty)(_e,"name",{value:"centroid",configurable:!0});var we=_e,xe=Object.defineProperty;function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Number(e[0]),r=Number(e[1]),o=Number(e[2]),i=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const s=[n,r];return ee([[s,[o,r],[o,i],[n,i],s]],t.properties,{bbox:e,id:t.id})}((e,t)=>{xe(e,"name",{value:t,configurable:!0})})(ke,"bboxPolygon");var Ee=ke,Se=n(6929),Te=Object.defineProperty,Pe=(e,t)=>Te(e,"name",{value:t,configurable:!0});function Ae(e,t,n){if(null!==e)for(var r,o,i,s,a,l,u,c,f=0,d=0,h=e.type,p="FeatureCollection"===h,g="Feature"===h,m=p?e.features.length:1,y=0;y<m;y++){a=(c=!!(u=p?e.features[y].geometry:g?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<a;v++){var b=0,_=0;if(null!==(s=c?u.geometries[v]:u)){l=s.coordinates;var w=s.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(l,d,y,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===t(l[r],d,y,b,_))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(o=0;o<l[r].length-f;o++){if(!1===t(l[r][o],d,y,b,_))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,o=0;o<l[r].length;o++){for(i=0;i<l[r][o].length-f;i++){if(!1===t(l[r][o][i],d,y,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Ae(s.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Oe(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function Ce(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function Me(e,t){var n,r,o,i,s,a,l,u,c,f,d=0,h="FeatureCollection"===e.type,p="Feature"===e.type,g=h?e.features.length:1;for(n=0;n<g;n++){for(a=h?e.features[n].geometry:p?e.geometry:e,u=h?e.features[n].properties:p?e.properties:{},c=h?e.features[n].bbox:p?e.bbox:void 0,f=h?e.features[n].id:p?e.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=l?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,d,u,c,f))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],d,u,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,u,c,f))return!1;d++}}function Re(e,t){Me(e,(function(e,n,r,o,i){var s,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==t(J(e,r,{bbox:o,id:i}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<e.coordinates.length;l++){var u=e.coordinates[l];if(!1===t(J({type:s,coordinates:u},r),n,l))return!1}}))}function je(e,t){Re(e,(function(e,n,r){var o=0;if(e.geometry){var i=e.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var s,a=0,l=0,u=0;return!1!==Ae(e,(function(i,c,f,d,h){if(void 0===s||n>a||d>l||h>u)return s=i,a=n,l=d,u=h,void(o=0);var p=te([s,i],e.properties);if(!1===t(p,n,r,h,o))return!1;o++,s=i}))&&void 0}}}))}function Ie(e,t){if(!e)throw new Error("geojson is required");Re(e,(function(e,n,r){if(null!==e.geometry){var o=e.geometry.type,i=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<i.length;s++)if(!1===t(te(i[s],e.properties),n,r,s))return!1}}}))}Pe(Ae,"coordEach"),Pe((function(e,t,n,r){var o=n;return Ae(e,(function(e,r,i,s,a){o=0===r&&void 0===n?e:t(o,e,r,i,s,a)}),r),o}),"coordReduce"),Pe(Oe,"propEach"),Pe((function(e,t,n){var r=n;return Oe(e,(function(e,o){r=0===o&&void 0===n?e:t(r,e,o)})),r}),"propReduce"),Pe(Ce,"featureEach"),Pe((function(e,t,n){var r=n;return Ce(e,(function(e,o){r=0===o&&void 0===n?e:t(r,e,o)})),r}),"featureReduce"),Pe((function(e){var t=[];return Ae(e,(function(e){t.push(e)})),t}),"coordAll"),Pe(Me,"geomEach"),Pe((function(e,t,n){var r=n;return Me(e,(function(e,o,i,s,a){r=0===o&&void 0===n?e:t(r,e,o,i,s,a)})),r}),"geomReduce"),Pe(Re,"flattenEach"),Pe((function(e,t,n){var r=n;return Re(e,(function(e,o,i){r=0===o&&0===i&&void 0===n?e:t(r,e,o,i)})),r}),"flattenReduce"),Pe(je,"segmentEach"),Pe((function(e,t,n){var r=n,o=!1;return je(e,(function(e,i,s,a,l){r=!1===o&&void 0===n?e:t(r,e,i,s,a,l),o=!0})),r}),"segmentReduce"),Pe(Ie,"lineEach"),Pe((function(e,t,n){var r=n;return Ie(e,(function(e,o,i,s){r=0===o&&void 0===n?e:t(r,e,o,i,s)})),r}),"lineReduce"),Pe((function(e,t){if(!ce(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.segmentIndex||0,a=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),a=a||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":a=a||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),te([l[s],l[s+1]],a,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),te([l[i][s],l[i][s+1]],a,t);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),te([l[o][s],l[o][s+1]],a,t);case"MultiPolygon":return o<0&&(o=l.length+o),i<0&&(i=l[o].length+i),s<0&&(s=l[o][i].length-s-1),te([l[o][i][s],l[o][i][s+1]],a,t)}throw new Error("geojson is invalid")}),"findSegment"),Pe((function(e,t){if(!ce(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,o=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.coordIndex||0,a=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),a=a||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":a=a||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return X(l,a,t);case"MultiPoint":return o<0&&(o=l.length+o),X(l[o],a,t);case"LineString":return s<0&&(s=l.length+s),X(l[s],a,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),X(l[i][s],a,t);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),X(l[o][s],a,t);case"MultiPolygon":return o<0&&(o=l.length+o),i<0&&(i=l[o].length+i),s<0&&(s=l[o][i].length-s),X(l[o][i][s],a,t)}throw new Error("geojson is invalid")}),"findPoint");var Le=Object.defineProperty;function Ne(e){const t=[];if(Me(e,(e=>{t.push(e.coordinates)})),t.length<2)throw new Error("Must have at least two features");const n=e.features[0].properties||{},r=Se.difference(t[0],...t.slice(1));return 0===r.length?null:1===r.length?ee(r[0],n):ie(r,n)}((e,t)=>{Le(e,"name",{value:t,configurable:!0})})(Ne,"difference");var Fe=Ne,Ue=n(579);function De(e){let t=null;if(e.featureCollection.features[0]){let n=e.featureCollection.features[0]||{},r=ne([Ee([180,90,-180,-90]),n]);t=Fe(r)}return(0,Ue.jsx)(B,{id:"boundarySource",type:"geojson",data:t,children:(0,Ue.jsx)(z,{id:"boundary",source:"boundarySource",type:"fill",paint:{"fill-color":"grey","fill-opacity":.8,"fill-outline-color":"red"}})})}function ze(e){return(0,Ue.jsx)(B,{id:"districtBoundarySource",type:"geojson",data:e.featureCollection,children:(0,Ue.jsx)(z,{id:"districtBoundary",source:"districtBoundarySource",type:"line",paint:{"line-color":"black","line-opacity":.8}})})}function Be(e){var n,r,o,i;let s=(null===e||void 0===e||null===(n=e.clicked)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.id)||0,a=(null===e||void 0===e||null===(o=e.hovered)||void 0===o||null===(i=o.properties)||void 0===i?void 0:i.id)||0;const l={source:"buildingsSource",type:"fill-extrusion",paint:{"fill-extrusion-color":{property:"color",type:"identity"},"fill-extrusion-height":{property:"building:level",type:"identity"},"fill-extrusion-base":{property:"base_height",type:"identity"}}};let u={...l,id:"buildings",paint:{...l.paint,"fill-extrusion-opacity":.5}},c={...l,id:"clickedBuildings",paint:{...l.paint,"fill-extrusion-opacity":1}},f={...l,id:"hoveredBuildings",paint:{...l.paint,"fill-extrusion-opacity":.8}};return(0,Ue.jsx)(t.Fragment,{children:(0,Ue.jsxs)(B,{id:"buildingsSource",type:"geojson",data:e.featureCollection,children:[(0,Ue.jsx)(z,{...u}),(0,Ue.jsx)(z,{...c,filter:["==","id",s]}),(0,Ue.jsx)(z,{...f,filter:["==","id",a]})]})})}function We(e){let{mapRef:n,url:r,name:o}=e;t.useEffect((()=>{if(n.current){const e=n.current.getMap();e.loadImage(r,((t,n)=>{if(t)throw t;e.hasImage(o)||e.addImage(o,n,{sdf:!0})}))}}),[n])}var qe=n(7786),Ve=n.n(qe);function Ge(e,t){return function(){return e.apply(t,arguments)}}const{toString:He}=Object.prototype,{getPrototypeOf:$e}=Object,Ke=(e=>t=>{const n=He.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ye=e=>(e=e.toLowerCase(),t=>Ke(t)===e),Qe=e=>t=>typeof t===e,{isArray:Ze}=Array,Je=Qe("undefined");const Xe=Ye("ArrayBuffer");const et=Qe("string"),tt=Qe("function"),nt=Qe("number"),rt=e=>null!==e&&"object"===typeof e,ot=e=>{if("object"!==Ke(e))return!1;const t=$e(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},it=Ye("Date"),st=Ye("File"),at=Ye("Blob"),lt=Ye("FileList"),ut=Ye("URLSearchParams"),[ct,ft,dt,ht]=["ReadableStream","Request","Response","Headers"].map(Ye);function pt(e,t){let n,r,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ze(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=o?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let s;for(n=0;n<i;n++)s=r[n],t.call(null,e[s],s,e)}}function gt(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const mt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,yt=e=>!Je(e)&&e!==mt;const vt=(bt="undefined"!==typeof Uint8Array&&$e(Uint8Array),e=>bt&&e instanceof bt);var bt;const _t=Ye("HTMLFormElement"),wt=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),xt=Ye("RegExp"),kt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};pt(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},Et="abcdefghijklmnopqrstuvwxyz",St="0123456789",Tt={DIGIT:St,ALPHA:Et,ALPHA_DIGIT:Et+Et.toUpperCase()+St};const Pt=Ye("AsyncFunction"),At={isArray:Ze,isArrayBuffer:Xe,isBuffer:function(e){return null!==e&&!Je(e)&&null!==e.constructor&&!Je(e.constructor)&&tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||tt(e.append)&&("formdata"===(t=Ke(e))||"object"===t&&tt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Xe(e.buffer),t},isString:et,isNumber:nt,isBoolean:e=>!0===e||!1===e,isObject:rt,isPlainObject:ot,isReadableStream:ct,isRequest:ft,isResponse:dt,isHeaders:ht,isUndefined:Je,isDate:it,isFile:st,isBlob:at,isRegExp:xt,isFunction:tt,isStream:e=>rt(e)&&tt(e.pipe),isURLSearchParams:ut,isTypedArray:vt,isFileList:lt,forEach:pt,merge:function e(){const{caseless:t}=yt(this)&&this||{},n={},r=(r,o)=>{const i=t&&gt(n,o)||o;ot(n[i])&&ot(r)?n[i]=e(n[i],r):ot(r)?n[i]=e({},r):Ze(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&pt(arguments[o],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return pt(t,((t,r)=>{n&&tt(t)?e[r]=Ge(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&$e(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ke,kindOfTest:Ye,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Ze(e))return e;let t=e.length;if(!nt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:_t,hasOwnProperty:wt,hasOwnProp:wt,reduceDescriptors:kt,freezeMethods:e=>{kt(e,((t,n)=>{if(tt(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];tt(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Ze(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:gt,global:mt,isContextDefined:yt,ALPHABET:Tt,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&tt(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(rt(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=Ze(e)?[]:{};return pt(e,((e,t)=>{const i=n(e,r+1);!Je(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:Pt,isThenable:e=>e&&(rt(e)||tt(e))&&tt(e.then)&&tt(e.catch)};function Ot(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}At.inherits(Ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:At.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ct=Ot.prototype,Mt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Mt[e]={value:e}})),Object.defineProperties(Ot,Mt),Object.defineProperty(Ct,"isAxiosError",{value:!0}),Ot.from=(e,t,n,r,o,i)=>{const s=Object.create(Ct);return At.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ot.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const Rt=Ot;function jt(e){return At.isPlainObject(e)||At.isArray(e)}function It(e){return At.endsWith(e,"[]")?e.slice(0,-2):e}function Lt(e,t,n){return e?e.concat(t).map((function(e,t){return e=It(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Nt=At.toFlatObject(At,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Ft=function(e,t,n){if(!At.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=At.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!At.isUndefined(t[e])}));const r=n.metaTokens,o=n.visitor||u,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&At.isSpecCompliantForm(t);if(!At.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(At.isDate(e))return e.toISOString();if(!a&&At.isBlob(e))throw new Rt("Blob is not supported. Use a Buffer instead.");return At.isArrayBuffer(e)||At.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,o){let a=e;if(e&&!o&&"object"===typeof e)if(At.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(At.isArray(e)&&function(e){return At.isArray(e)&&!e.some(jt)}(e)||(At.isFileList(e)||At.endsWith(n,"[]"))&&(a=At.toArray(e)))return n=It(n),a.forEach((function(e,r){!At.isUndefined(e)&&null!==e&&t.append(!0===s?Lt([n],r,i):null===s?n:n+"[]",l(e))})),!1;return!!jt(e)||(t.append(Lt(o,n,i),l(e)),!1)}const c=[],f=Object.assign(Nt,{defaultVisitor:u,convertValue:l,isVisitable:jt});if(!At.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!At.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),At.forEach(n,(function(n,i){!0===(!(At.isUndefined(n)||null===n)&&o.call(t,n,At.isString(i)?i.trim():i,r,f))&&e(n,r?r.concat(i):[i])})),c.pop()}}(e),t};function Ut(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Dt(e,t){this._pairs=[],e&&Ft(e,this,t)}const zt=Dt.prototype;zt.append=function(e,t){this._pairs.push([e,t])},zt.toString=function(e){const t=e?function(t){return e.call(this,t,Ut)}:Ut;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Bt=Dt;function Wt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qt(e,t,n){if(!t)return e;const r=n&&n.encode||Wt,o=n&&n.serialize;let i;if(i=o?o(t,n):At.isURLSearchParams(t)?t.toString():new Bt(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Vt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){At.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Gt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ht={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Bt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},$t="undefined"!==typeof window&&"undefined"!==typeof document,Kt=(Yt="undefined"!==typeof navigator&&navigator.product,$t&&["ReactNative","NativeScript","NS"].indexOf(Yt)<0);var Yt;const Qt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Zt=$t&&window.location.href||"http://localhost",Jt={...e,...Ht};const Xt=function(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;if(i=!i&&At.isArray(r)?r.length:i,a)return At.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&At.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&At.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(At.isFormData(e)&&At.isFunction(e.entries)){const n={};return At.forEachEntry(e,((e,r)=>{t(function(e){return At.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const en={transitional:Gt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=At.isObject(e);o&&At.isHTMLForm(e)&&(e=new FormData(e));if(At.isFormData(e))return r?JSON.stringify(Xt(e)):e;if(At.isArrayBuffer(e)||At.isBuffer(e)||At.isStream(e)||At.isFile(e)||At.isBlob(e)||At.isReadableStream(e))return e;if(At.isArrayBufferView(e))return e.buffer;if(At.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ft(e,new Jt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Jt.isNode&&At.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=At.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ft(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(At.isString(e))try{return(t||JSON.parse)(e),At.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||en.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(At.isResponse(e)||At.isReadableStream(e))return e;if(e&&At.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(n){if("SyntaxError"===o.name)throw Rt.from(o,Rt.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jt.classes.FormData,Blob:Jt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};At.forEach(["delete","get","head","post","put","patch"],(e=>{en.headers[e]={}}));const tn=en,nn=At.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rn=Symbol("internals");function on(e){return e&&String(e).trim().toLowerCase()}function sn(e){return!1===e||null==e?e:At.isArray(e)?e.map(sn):String(e)}function an(e,t,n,r,o){return At.isFunction(r)?r.call(this,t,n):(o&&(t=n),At.isString(t)?At.isString(r)?-1!==t.indexOf(r):At.isRegExp(r)?r.test(t):void 0:void 0)}class ln{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=on(t);if(!o)throw new Error("header name must be a non-empty string");const i=At.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=sn(e))}const i=(e,t)=>At.forEach(e,((e,n)=>o(e,n,t)));if(At.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(At.isString(e)&&(e=e.trim())&&!(e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))(e))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&nn[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(At.isHeaders(e))for(const[s,a]of e.entries())o(a,s,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=on(e)){const n=At.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(At.isFunction(t))return t.call(this,e,n);if(At.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=on(e)){const n=At.findKey(this,e);return!(!n||void 0===this[n]||t&&!an(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=on(e)){const o=At.findKey(n,e);!o||t&&!an(0,n[o],o,t)||(delete n[o],r=!0)}}return At.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!an(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return At.forEach(this,((r,o)=>{const i=At.findKey(n,o);if(i)return t[i]=sn(r),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete t[o],t[s]=sn(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return At.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&At.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[rn]=this[rn]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=on(e);t[r]||(!function(e,t){const n=At.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return At.isArray(e)?e.forEach(r):r(e),this}}ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),At.reduceDescriptors(ln.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),At.freezeMethods(ln);const un=ln;function cn(e,t){const n=this||tn,r=t||n,o=un.from(r.headers);let i=r.data;return At.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function fn(e){return!(!e||!e.__CANCEL__)}function dn(e,t,n){Rt.call(this,null==e?"canceled":e,Rt.ERR_CANCELED,t,n),this.name="CanceledError"}At.inherits(dn,Rt,{__CANCEL__:!0});const hn=dn;function pn(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Rt("Request failed with status code "+n.status,[Rt.ERR_BAD_REQUEST,Rt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const gn=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),u=r[s];o||(o=l),n[i]=a,r[i]=l;let c=s,f=0;for(;c!==i;)f+=n[c++],c%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const d=u&&l-u;return d?Math.round(1e3*f/d):void 0}};const mn=function(e,t){let n=0;const r=1e3/t;let o=null;return function(){const t=!0===this,i=Date.now();if(t||i-n>r)return o&&(clearTimeout(o),o=null),n=i,e.apply(null,arguments);o||(o=setTimeout((()=>(o=null,n=Date.now(),e.apply(null,arguments))),r-(i-n)))}},yn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const o=gn(50,250);return mn((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,l=o(a);r=i;const u={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:n,lengthComputable:null!=s};u[t?"download":"upload"]=!0,e(u)}),n)},vn=Jt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=At.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},bn=Jt.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const s=[e+"="+encodeURIComponent(t)];At.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),At.isString(r)&&s.push("path="+r),At.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function _n(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const wn=e=>e instanceof un?{...e}:e;function xn(e,t){t=t||{};const n={};function r(e,t,n){return At.isPlainObject(e)&&At.isPlainObject(t)?At.merge.call({caseless:n},e,t):At.isPlainObject(t)?At.merge({},t):At.isArray(t)?t.slice():t}function o(e,t,n){return At.isUndefined(t)?At.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!At.isUndefined(t))return r(void 0,t)}function s(e,t){return At.isUndefined(t)?At.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>o(wn(e),wn(t),!0)};return At.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=l[r]||o,s=i(e[r],t[r],r);At.isUndefined(s)&&i!==a||(n[r]=s)})),n}const kn=e=>{const t=xn({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=un.from(a),t.url=qt(_n(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),At.isFormData(r))if(Jt.hasStandardBrowserEnv||Jt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Jt.hasStandardBrowserEnv&&(o&&At.isFunction(o)&&(o=o(t)),o||!1!==o&&vn(t.url))){const e=i&&s&&bn.read(s);e&&a.set(i,e)}return t},En="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=kn(e);let o=r.data;const i=un.from(r.headers).normalize();let s,{responseType:a}=r;function l(){r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let u=new XMLHttpRequest;function c(){if(!u)return;const r=un.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());pn((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}u.open(r.method.toUpperCase(),r.url,!0),u.timeout=r.timeout,"onloadend"in u?u.onloadend=c:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(c)},u.onabort=function(){u&&(n(new Rt("Request aborted",Rt.ECONNABORTED,r,u)),u=null)},u.onerror=function(){n(new Rt("Network Error",Rt.ERR_NETWORK,r,u)),u=null},u.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const t=r.transitional||Gt;r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new Rt(e,t.clarifyTimeoutError?Rt.ETIMEDOUT:Rt.ECONNABORTED,r,u)),u=null},void 0===o&&i.setContentType(null),"setRequestHeader"in u&&At.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),At.isUndefined(r.withCredentials)||(u.withCredentials=!!r.withCredentials),a&&"json"!==a&&(u.responseType=r.responseType),"function"===typeof r.onDownloadProgress&&u.addEventListener("progress",yn(r.onDownloadProgress,!0)),"function"===typeof r.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",yn(r.onUploadProgress)),(r.cancelToken||r.signal)&&(s=t=>{u&&(n(!t||t.type?new hn(null,e,u):t),u.abort(),u=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);f&&-1===Jt.protocols.indexOf(f)?n(new Rt("Unsupported protocol "+f+":",Rt.ERR_BAD_REQUEST,e)):u.send(o||null)}))},Sn=(e,t)=>{let n,r=new AbortController;const o=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Rt?t:new hn(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{o(new Rt("timeout ".concat(t," of ms exceeded"),Rt.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",o):e.unsubscribe(o))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",o)));const{signal:a}=r;return a.unsubscribe=s,[a,()=>{i&&clearTimeout(i),i=null}]},Tn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},Pn=(e,t,n,r,o)=>{const i=async function*(e,t,n){for await(const r of e)yield*Tn(ArrayBuffer.isView(r)?r:await n(String(r)),t)}(e,t,o);let s=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:o}=await i.next();if(t)return e.close(),void r();let a=o.byteLength;n&&n(s+=a),e.enqueue(new Uint8Array(o))},cancel:e=>(r(e),i.return())},{highWaterMark:2})},An=(e,t)=>{const n=null!=e;return r=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:r})))},On="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Cn=On&&"function"===typeof ReadableStream,Mn=On&&("function"===typeof TextEncoder?(Rn=new TextEncoder,e=>Rn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Rn;const jn=Cn&&(()=>{let e=!1;const t=new Request(Jt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),In=Cn&&!!(()=>{try{return At.isReadableStream(new Response("").body)}catch(e){}})(),Ln={stream:In&&(e=>e.body)};var Nn;On&&(Nn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ln[e]&&(Ln[e]=At.isFunction(Nn[e])?t=>t[e]():(t,n)=>{throw new Rt("Response type '".concat(e,"' is not supported"),Rt.ERR_NOT_SUPPORT,n)})})));const Fn=async(e,t)=>{const n=At.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:At.isBlob(e)?e.size:At.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:At.isArrayBufferView(e)?e.byteLength:(At.isURLSearchParams(e)&&(e+=""),At.isString(e)?(await Mn(e)).byteLength:void 0))(t):n},Un=On&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:f="same-origin",fetchOptions:d}=kn(e);u=u?(u+"").toLowerCase():"text";let h,p,[g,m]=o||i||s?Sn([o,i],s):[];const y=()=>{!h&&setTimeout((()=>{g&&g.unsubscribe()})),h=!0};let v;try{if(l&&jn&&"get"!==n&&"head"!==n&&0!==(v=await Fn(c,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});At.isFormData(r)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body&&(r=Pn(n.body,65536,An(v,yn(l)),null,Mn))}At.isString(f)||(f=f?"cors":"omit"),p=new Request(t,{...d,signal:g,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",withCredentials:f});let o=await fetch(p);const i=In&&("stream"===u||"response"===u);if(In&&(a||i)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=At.toFiniteNumber(o.headers.get("content-length"));o=new Response(Pn(o.body,65536,a&&An(t,yn(a,!0)),i&&y,Mn),e)}u=u||"text";let s=await Ln[At.findKey(Ln,u)||"text"](o,e);return!i&&y(),m&&m(),await new Promise(((t,n)=>{pn(t,n,{data:s,headers:un.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(b){if(y(),b&&"TypeError"===b.name&&/fetch/i.test(b.message))throw Object.assign(new Rt("Network Error",Rt.ERR_NETWORK,e,p),{cause:b.cause||b});throw Rt.from(b,b&&b.code,e,p)}}),Dn={http:null,xhr:En,fetch:Un};At.forEach(Dn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const zn=e=>"- ".concat(e),Bn=e=>At.isFunction(e)||null===e||!1===e,Wn=e=>{e=At.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Bn(n)&&(r=Dn[(t=String(n)).toLowerCase()],void 0===r))throw new Rt("Unknown adapter '".concat(t,"'"));if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(zn).join("\n"):" "+zn(e[0]):"as no adapter specified";throw new Rt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function qn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hn(null,e)}function Vn(e){qn(e),e.headers=un.from(e.headers),e.data=cn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Wn(e.adapter||tn.adapter)(e).then((function(t){return qn(e),t.data=cn.call(e,e.transformResponse,t),t.headers=un.from(t.headers),t}),(function(t){return fn(t)||(qn(e),t&&t.response&&(t.response.data=cn.call(e,e.transformResponse,t.response),t.response.headers=un.from(t.response.headers))),Promise.reject(t)}))}const Gn="1.7.2",Hn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Hn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const $n={};Hn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new Rt(r(o," has been removed"+(t?" in "+t:"")),Rt.ERR_DEPRECATED);return t&&!$n[o]&&($n[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};const Kn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Rt("options must be an object",Rt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new Rt("option "+i+" must be "+n,Rt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Rt("Unknown option "+i,Rt.ERR_BAD_OPTION)}},validators:Hn},Yn=Kn.validators;class Qn{constructor(e){this.defaults=e,this.interceptors={request:new Vt,response:new Vt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=xn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Kn.assertOptions(n,{silentJSONParsing:Yn.transitional(Yn.boolean),forcedJSONParsing:Yn.transitional(Yn.boolean),clarifyTimeoutError:Yn.transitional(Yn.boolean)},!1),null!=r&&(At.isFunction(r)?t.paramsSerializer={serialize:r}:Kn.assertOptions(r,{encode:Yn.function,serialize:Yn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&At.merge(o.common,o[t.method]);o&&At.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=un.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,f=0;if(!a){const e=[Vn.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);f<c;)u=u.then(e[f++],e[f++]);return u}c=s.length;let d=t;for(f=0;f<c;){const e=s[f++],t=s[f++];try{d=e(d)}catch(h){t.call(this,h);break}}try{u=Vn.call(this,d)}catch(h){return Promise.reject(h)}for(f=0,c=l.length;f<c;)u=u.then(l[f++],l[f++]);return u}getUri(e){return qt(_n((e=xn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}At.forEach(["delete","get","head","options"],(function(e){Qn.prototype[e]=function(t,n){return this.request(xn(n||{},{method:e,url:t,data:(n||{}).data}))}})),At.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(xn(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Qn.prototype[e]=t(),Qn.prototype[e+"Form"]=t(!0)}));const Zn=Qn;class Jn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new hn(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Jn((function(t){e=t})),cancel:e}}}const Xn=Jn;const er={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(er).forEach((e=>{let[t,n]=e;er[n]=t}));const tr=er;const nr=function e(t){const n=new Zn(t),r=Ge(Zn.prototype.request,n);return At.extend(r,Zn.prototype,n,{allOwnKeys:!0}),At.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(xn(t,n))},r}(tn);nr.Axios=Zn,nr.CanceledError=hn,nr.CancelToken=Xn,nr.isCancel=fn,nr.VERSION=Gn,nr.toFormData=Ft,nr.AxiosError=Rt,nr.Cancel=nr.CanceledError,nr.all=function(e){return Promise.all(e)},nr.spread=function(e){return function(t){return e.apply(null,t)}},nr.isAxiosError=function(e){return At.isObject(e)&&!0===e.isAxiosError},nr.mergeConfig=xn,nr.AxiosHeaders=un,nr.formToJSON=e=>Xt(At.isHTMLForm(e)?new FormData(e):e),nr.getAdapter=Wn,nr.HttpStatusCode=tr,nr.default=nr;const rr=nr;function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ir={};function sr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";ir[e]=ir[e]||1;const t=ir[e]++;return"".concat(e,"-").concat(t)}function ar(e){let t=!0;for(const n in e){t=!1;break}return t}class lr{constructor(e,t,n){if(or(this,"id",void 0),or(this,"props",void 0),or(this,"userData",{}),or(this,"_device",void 0),or(this,"destroyed",!1),or(this,"allocatedBytes",0),or(this,"_attachedResources",new Set),!e)throw new Error("no device");this._device=e,this.props=function(e,t){const n={...t};for(const r in e)void 0!==e[r]&&(n[r]=e[r]);return n}(t,n);const r="undefined"!==this.props.id?this.props.id:sr(this[Symbol.toStringTag]);this.props.id=r,this.id=r,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get("".concat(t,"s Active")).decrementCount()}trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const t=this._device.statsManager.getStats("Resource Counts");t.get("GPU Memory").subtractCount(this.allocatedBytes),t.get("".concat(e," Memory")).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}}or(lr,"defaultProps",{id:"undefined",handle:void 0,userData:void 0});class ur extends lr{get[Symbol.toStringTag](){return"Buffer"}constructor(e,t){const n={...t};(t.usage||0)&ur.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?n.indexType="uint32":t.data instanceof Uint16Array&&(n.indexType="uint16")),super(e,n,ur.defaultProps),or(this,"usage",void 0),or(this,"indexType",void 0),or(this,"updateTimestamp",void 0),or(this,"debugData",new ArrayBuffer(0)),this.usage=t.usage||0,this.indexType=n.indexType,this.updateTimestamp=e.incrementTimestamp()}readSyncWebGL(e,t){throw new Error("not implemented")}_setDebugData(e,t,n){const r=ArrayBuffer.isView(e)?e.buffer:e,o=Math.min(e?e.byteLength:n,ur.DEBUG_DATA_MAX_LENGTH);null===e?this.debugData=new ArrayBuffer(o):0===t&&n===e.byteLength?this.debugData=r.slice(0,o):this.debugData=r.slice(t,t+o)}}function cr(){var e;return!("object"===typeof process&&"[object process]"===String(process)&&!(null!==(e=process)&&void 0!==e&&e.browser))||function(e){var t,n;if("undefined"!==typeof window&&"renderer"===(null===(t=window.process)||void 0===t?void 0:t.type))return!0;if("undefined"!==typeof process&&Boolean(null===(n=process.versions)||void 0===n?void 0:n.electron))return!0;const r="undefined"!==typeof navigator&&navigator.userAgent,o=e||r;return Boolean(o&&o.indexOf("Electron")>=0)}()}or(ur,"defaultProps",{...lr.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),or(ur,"MAP_READ",1),or(ur,"MAP_WRITE",2),or(ur,"COPY_SRC",4),or(ur,"COPY_DST",8),or(ur,"INDEX",16),or(ur,"VERTEX",32),or(ur,"UNIFORM",64),or(ur,"STORAGE",128),or(ur,"INDIRECT",256),or(ur,"QUERY_RESOLVE",512),or(ur,"DEBUG_DATA_MAX_LENGTH",32);const fr="4.0.7";class dr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(t){return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}var hr;!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(hr||(hr={}));const pr=10;function gr(e){return"string"!==typeof e?e:(e=e.toUpperCase(),hr[e]||hr.WHITE)}function mr(e,t){if(!e)throw new Error(t||"Assertion failed")}const yr=globalThis,vr=(globalThis.document,globalThis.process||{});globalThis.console,globalThis.navigator;function br(){let e;var t,n;if(cr()&&yr.performance)e=null===yr||void 0===yr||null===(t=yr.performance)||void 0===t||null===(n=t.now)||void 0===n?void 0:n.call(t);else if("hrtime"in vr){var r;const t=null===vr||void 0===vr||null===(r=vr.hrtime)||void 0===r?void 0:r.call(vr);e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const _r={debug:cr()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},wr={enabled:!0,level:0};function xr(){}const kr={},Er={once:!0};class Sr{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.VERSION=fr,this._startTs=br(),this._deltaTs=br(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new dr("__probe-".concat(this.id,"__"),wr),this.timeStamp("".concat(this.id," started")),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),o=e;for(const i of r){const n=o[i];"function"===typeof n&&(t.find((e=>i===e))||(o[i]=n.bind(e)))}}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((br()-this._startTs).toPrecision(10))}getDelta(){return Number((br()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){if(!e)throw new Error(t||"Assertion failed")}warn(e){return this._getLogFunction(0,e,_r.warn,arguments,Er)}error(e){return this._getLogFunction(0,e,_r.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,_r.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,_r.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,_r.debug||_r.info,arguments,Er)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||xr,n&&[n],{tag:Ar(t)}):xr}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||xr)}group(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Pr({logLevel:e,message:t,opts:n}),{collapsed:o}=n;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||xr)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Tr(e)}_getLogFunction(e,t,n,r,o){if(this._shouldLog(e)){o=Pr({logLevel:e,message:t,args:r,opts:o}),mr(n=n||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=br();const i=o.tag||o.message;if(o.once&&i){if(kr[i])return xr;kr[i]=br()}return t=function(e,t,n){if("string"===typeof t){const r=n.time?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(n.total)):"";t=function(e,t,n){if(!cr&&"string"===typeof e){if(t){const n=gr(t);e="\x1b[".concat(n,"m").concat(e,"\x1b[39m")}if(n){const t=gr(n);e="\x1b[".concat(t+pr,"m").concat(e,"\x1b[49m")}}return e}(t=n.time?"".concat(e,": ").concat(r,"  ").concat(t):"".concat(e,": ").concat(t),n.color,n.background)}return t}(this.id,o.message,o),n.bind(console,t,...o.args)}return xr}}function Tr(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return mr(Number.isFinite(t)&&t>=0),t}function Pr(e){const{logLevel:t,message:n}=e;e.logLevel=Tr(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"===typeof e.message&&(e.message=e.message());const o=typeof e.message;return mr("string"===o||"object"===o),Object.assign(e,{args:r},e.opts)}function Ar(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}Sr.VERSION=fr;const Or=new Sr({id:"deck"}),Cr={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Cr,"IDENTITY",{get:()=>(Or.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Mr={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Rr={common:0,meters:1,pixels:2};function jr(e){const t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(t.constructor.name)}}function Ir(e){switch(e){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(e)}}function Lr(e,t,n){if(!t||t>4)throw new Error("size ".concat(t));const r=t;let o=jr(e);if("uint8"===o||"sint8"===o){if(1===r||3===r)throw new Error("size: ".concat(t));return n&&(o=o.replace("int","norm")),"".concat(o,"x").concat(r)}if("uint16"===o||"sint16"===o){if(1===r||3===r)throw new Error("size: ".concat(t));return n&&(o=o.replace("int","norm")),"".concat(o,"x").concat(r)}return 1===r?o:"".concat(o,"x").concat(r)}const Nr=jr;function Fr(e,t){return{attribute:e,format:t.size>1?"".concat(t.type,"x").concat(t.size):t.type,byteOffset:t.offset||0}}function Ur(e){return e.stride||e.size*e.bytesPerElement}const Dr=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,n){let{size:r=1,type:o,padding:i=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const u=o||e&&e.constructor||Float32Array,c=t*r+i;if(ArrayBuffer.isView(e)){if(c<=e.length)return e;if(c*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new u(e.buffer,0,c)}let f=1/0;l&&(f=l*r+i);const d=this._allocate(u,c,a,f);return e&&s?d.set(e):a||d.fill(0,0,4),this._release(e),d}release(e){this._release(e)}_allocate(e,t,n,r){let o=Math.max(Math.ceil(t*this.opts.overAlloc),1);o>r&&(o=r);const i=this._pool,s=e.BYTES_PER_ELEMENT*o,a=i.findIndex((e=>e.byteLength>=s));if(a>=0){const t=new e(i.splice(a,1)[0],0,o);return n&&t.fill(0),t}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:n}=e,{byteLength:r}=n,o=t.findIndex((e=>e.byteLength>=r));o<0?t.push(n):(o>0||t.length<this.opts.poolSize)&&t.splice(o,0,n),t.length>this.opts.poolSize&&t.shift()}};Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const zr=globalThis.mathgl.config;function Br(e){let{precision:t=zr.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=function(e){return Math.round(e/zr.EPSILON)*zr.EPSILON}(e),"".concat(parseFloat(e.toPrecision(t)))}function Wr(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qr(e,t,n){return Hr(e,(e=>Math.max(t,Math.min(n,e))))}function Vr(e,t,n){return Wr(e)?e.map(((e,r)=>Vr(e,t[r],n))):n*t+(1-n)*e}function Gr(e,t,n){const r=zr.EPSILON;n&&(zr.EPSILON=n);try{if(e===t)return!0;if(Wr(e)&&Wr(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Gr(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):"number"===typeof e&&"number"===typeof t&&Math.abs(e-t)<=zr.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{zr.EPSILON=r}}function Hr(e,t,n){if(Wr(e)){const r=e;n=n||function(e){return e.clone?e.clone():new Array(e.length)}(r);for(let o=0;o<n.length&&o<r.length;++o){const r="number"===typeof e?e:e[o];n[o]=t(r,o,n)}return n}return t(e)}class $r extends Array{clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Wr(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(zr)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Br(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Gr(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){if(void 0===n)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const o=e[r],i="number"===typeof t?t:t[r];this[r]=o+n*(i-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]+=r[e];return this.check()}subtract(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]-=r[e];return this.check()}scale(e){if("number"===typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(zr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}get elements(){return this}}function Kr(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(JSON.stringify(e)));return e}function Yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(zr.debug&&!function(e,t){if(e.length!==t)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e,t))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}function Qr(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}class Zr extends $r{get x(){return this[0]}set x(e){this[0]=Kr(e)}get y(){return this[1]}set y(e){this[1]=Kr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-e[n];t+=r*r}return Kr(t)}dot(e){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Kr(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=r[e];return this.check()}divide(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=r[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Qr(e>=0&&e<this.ELEMENTS,"index is out of range"),Kr(this[e])}setComponent(e,t){return Qr(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}const Jr=1e-6;let Xr="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function eo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function to(e,t,n){const r=t[0],o=t[1],i=t[2];let s=n[3]*r+n[7]*o+n[11]*i+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/s,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/s,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/s,e}const no=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};!function(){const e=function(){const e=new Xr(3);return Xr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}()}();function ro(e,t,n){const r=t[0],o=t[1],i=t[2],s=n[3]*r+n[7]*o+n[11]*i||1;return e[0]=(n[0]*r+n[4]*o+n[8]*i)/s,e[1]=(n[1]*r+n[5]*o+n[9]*i)/s,e[2]=(n[2]*r+n[6]*o+n[10]*i)/s,e}const oo=[0,0,0];let io;class so extends Zr{static get ZERO(){return io||(io=new so(0,0,0),Object.freeze(io)),io}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&Wr(e)?this.copy(e):(zr.debug&&(Kr(e),Kr(t),Kr(n)),this[0]=e,this[1]=t,this[2]=n)}set(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return zr.debug&&(Kr(e.x),Kr(e.y),Kr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Kr(e)}angle(e){return function(e,t){const n=e[0],r=e[1],o=e[2],i=t[0],s=t[1],a=t[2],l=Math.sqrt((n*n+r*r+o*o)*(i*i+s*s+a*a)),u=l&&eo(e,t)/l;return Math.acos(Math.min(Math.max(u,-1),1))}(this,e)}cross(e){return function(e,t,n){const r=t[0],o=t[1],i=t[2],s=n[0],a=n[1],l=n[2];e[0]=o*l-i*a,e[1]=i*s-r*l,e[2]=r*a-o*s}(this,this,e),this.check()}rotateX(e){let{radians:t,origin:n=oo}=e;return function(e,t,n,r){const o=[],i=[];o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2]}(this,this,n,t),this.check()}rotateY(e){let{radians:t,origin:n=oo}=e;return function(e,t,n,r){const o=[],i=[];o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2]}(this,this,n,t),this.check()}rotateZ(e){let{radians:t,origin:n=oo}=e;return function(e,t,n,r){const o=[],i=[];o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2]}(this,this,n,t),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return to(this,this,e),this.check()}transformAsVector(e){return ro(this,this,e),this.check()}transformByMatrix3(e){return function(e,t,n){const r=t[0],o=t[1],i=t[2];e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8]}(this,this,e),this.check()}transformByMatrix2(e){return function(e,t,n){const r=t[0],o=t[1];e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e[2]=t[2]}(this,this,e),this.check()}transformByQuaternion(e){return function(e,t,n){const r=n[0],o=n[1],i=n[2],s=n[3],a=t[0],l=t[1],u=t[2];let c=o*u-i*l,f=i*a-r*u,d=r*l-o*a,h=o*d-i*f,p=i*c-r*d,g=r*f-o*c;const m=2*s;c*=m,f*=m,d*=m,h*=2,p*=2,g*=2,e[0]=a+c+h,e[1]=l+f+p,e[2]=u+d+g}(this,this,e),this.check()}}const ao=new so;function lo(e,t,n,r){ao.set(e,t,n);const o=ao.len();return{distance:r/o,normal:new so(-e/o,-t/o,-n/o)}}let uo;function co(e,t){const{size:n=1,startIndex:r=0}=t,o=void 0!==t.endIndex?t.endIndex:e.length,i=(o-r)/n;uo=Dr.allocate(uo,i,{type:Float32Array,size:2*n});let s=r,a=0;for(;s<o;){for(let t=0;t<n;t++){const r=e[s++];uo[a+t]=r,uo[a+t+n]=(l=r)-Math.fround(l)}a+=2*n}var l;return uo.subarray(0,i*n*2)}function fo(e){let t=null,n=!1;for(const r of e)r&&(t?(n||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],n=!0),t[0][0]=Math.min(t[0][0],r[0][0]),t[0][1]=Math.min(t[0][1],r[0][1]),t[1][0]=Math.max(t[1][0],r[1][0]),t[1][1]=Math.max(t[1][1],r[1][1])):t=r);return t}function ho(e,t){t.offset&&Or.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Ur(e),r=(void 0!==t.vertexOffset?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:r,stride:n}}class po{constructor(e,t,n){this._buffer=null,this.device=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,o="float64"===r;let i,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),i=o?"float32":!r&&t.isIndexed?"uint32":r||"float32";let a=function(e){switch(e){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return Ir(e)}}(r||i);this.doublePrecision=o,o&&!1===t.fp64&&(a=Float32Array),this.value=null,this.settings={...t,defaultType:a,defaultValue:s,logicalType:r,type:i,normalized:i.includes("norm"),size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Ur(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Dr.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={};if(this.state.constant){const r=this.value;if(t){const o=ho(this.getAccessor(),t),i=o.offset/r.BYTES_PER_ELEMENT,s=o.size||this.size;n[e]=r.subarray(i,i+s)}else n[e]=r}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n["".concat(e,"64Low")]=n[e]:n["".concat(e,"64Low")]=new Float32Array(this.size)),n}_getBufferLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getAccessor(),r=[],o={name:this.id,byteStride:Ur(n),attributes:r};if(this.doublePrecision){const o=function(e,t){const n=ho(e,t);return{high:n,low:{...n,offset:n.offset+4*e.size}}}(n,t||{});r.push(Fr(e,{...n,...o.high}),Fr("".concat(e,"64Low"),{...n,...o.low}))}else if(t){const o=ho(n,t);r.push(Fr(e,{...n,...o}))}else r.push(Fr(e,n));return o}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:n,size:r}=this,o=n*r;if(t&&o&&t.length>=o){const n=new Array(r).fill(1/0),i=new Array(r).fill(-1/0);for(let e=0;e<o;)for(let o=0;o<r;o++){const r=t[e++];r<n[o]&&(n[o]=r),r>i[o]&&(i[o]=r)}e=[n,i]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let n;n=ArrayBuffer.isView(e)?{value:e}:e instanceof ur?{buffer:e}:e;const r={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type){if(this.doublePrecision&&n.value instanceof Float64Array)r.type="float32";else{const e=Nr(n.value);r.type=r.normalized?e.replace("int","norm"):e}}r.bytesPerElement=n.value.BYTES_PER_ELEMENT,r.stride=Ur(r)}if(t.bounds=null,n.constant){let e=n.value;e=this._normalizeValue(e,[],0),this.settings.normalized&&(e=this.normalizeConstant(e));if(!(!t.constant||!this._areValuesEqual(e,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=ArrayBuffer.isView(e)?e:new Float32Array(e)}else if(n.buffer){const e=n.buffer;t.externalBuffer=e,t.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let e=n.value;t.externalBuffer=null,t.constant=!1,this.value=e;let{buffer:o}=this;const i=Ur(r),s=(r.vertexOffset||0)*i;if(this.doublePrecision&&e instanceof Float64Array&&(e=co(e,r)),this.settings.isIndexed){const t=this.settings.defaultType;e.constructor!==t&&(e=new t(e))}const a=e.byteLength+s+2*i;(!o||o.byteLength<a)&&(o=this._createBuffer(a)),o.write(e,s)}return this.setAccessor(r),!0}updateSubBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const t=this.value,{startOffset:n=0,endOffset:r}=e;this.buffer.write(this.doublePrecision&&t instanceof Float64Array?co(t,{size:this.size,startIndex:n,endIndex:r}):t.subarray(n,r),n*t.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,r=n.allocatedValue,o=Dr.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=o;const{byteOffset:i}=this;let{buffer:s}=this;return(!s||s.byteLength<o.byteLength+i)&&(s=this._createBuffer(o.byteLength+i),t&&r&&s.write(r instanceof Float64Array?co(r,this):r,i)),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||Or.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map((e=>(e+128)/255*2-1));case"snorm16":return new Float32Array(e).map((e=>(e+32768)/65535*2-1));case"unorm8":return new Float32Array(e).map((e=>e/255));case"unorm16":return new Float32Array(e).map((e=>e/65535));default:return e}}_normalizeValue(e,t,n){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return t[n]=e,t;if(!e){let e=o;for(;--e>=0;)t[n+e]=r[e];return t}switch(o){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let i=o;for(;--i>=0;)t[n+i]=Number.isFinite(e[i])?e[i]:r[i]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}_createBuffer(e){var t;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:r}=this.settings;return this._buffer=this.device.createBuffer({...null===(t=this._buffer)||void 0===t?void 0:t.props,id:this.id,usage:n?ur.INDEX:ur.VERTEX,indexType:n?r:void 0,byteLength:e}),this._buffer}}function go(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}const mo=[],yo=[];function vo(e){return e&&e[Symbol.asyncIterator]}function bo(e){let{target:t,source:n,start:r=0,count:o=1}=e;const i=n.length,s=o*i;let a=0;for(let l=r;a<i;a++)t[l++]=n[a];for(;a<s;)a<s-a?(t.copyWithin(r+a,r,r+a),a*=2):(t.copyWithin(r+a,r,r+s-a),a=s);return t}const _o=[],wo=[[0,1/0]];const xo={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function ko(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const n=e.type||"interpolation";return{...xo[n],...t,...e,type:n}}class Eo extends po{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:wo}),this.constant=!1,this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var t,n,r;(t=this.state).layoutChanged||(t.layoutChanged=(n=e,r=this.getAccessor(),!(n.type===r.type&&n.size===r.size&&Ur(n)===Ur(r)&&(n.offset||0)===(r.offset||0)))),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!==typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,n=this.settings.transition;return ko(Array.isArray(t)?e[t.find((t=>e[t]))]:e[t],n)}setNeedsUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:e=0,endRow:n=1/0}=t;this.state.updateRanges=function(e,t){if(e===wo)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;const n=[],r=e.length;let o=0;for(let i=0;i<r;i++){const r=e[i];r[1]<t[0]?(n.push(r),o=i+1):r[0]>t[1]?n.push(r):t=[Math.min(r[0],t[0]),Math.max(r[1],t[1])]}return n.splice(o,0,t),n}(this.state.updateRanges,[e,n])}else this.state.updateRanges=wo}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=_o}setNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(e,t.updateRanges!==wo),!0))}updateBuffer(e){let{numInstances:t,data:n,props:r,context:o}=e;if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[e,a]of i)s.call(o,this,{data:n,startRow:e,endRow:a,props:r,numInstances:t});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,n]of i){const r=Number.isFinite(e)?this.getVertexOffset(e):0,o=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:r,endOffset:o})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){if(void 0===e||"function"===typeof e)return!1;return this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:r}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw();if(r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;go(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor));const i=Boolean(o.size)&&o.size!==this.size;return n.binaryAccessor=function(e,t){const{size:n,stride:r,offset:o,startIndices:i,nested:s}=t,a=e.BYTES_PER_ELEMENT,l=r?r/a:n,u=o?o/a:0,c=Math.floor((e.length-u)/l);return(t,r)=>{let{index:o,target:a}=r;if(!i){const t=o*l+u;for(let r=0;r<n;r++)a[r]=e[t+r];return a}const f=i[o],d=i[o+1]||c;let h;if(s){h=new Array(d-f);for(let t=f;t<d;t++){const r=t*l+u;a=new Array(n);for(let t=0;t<n;t++)a[t]=e[r+t];h[t-f]=a}}else if(l===n)h=e.subarray(f*n+u,d*n+u);else{h=new e.constructor((d-f)*n);let t=0;for(let r=f;r<d;r++){const o=r*l+u;for(let r=0;r<n;r++)h[t++]=e[o+r]}}return h}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:t,nested:i}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,t=super.getValue();if(!e)return t;for(const n in e)Object.assign(t,super.getValue(n,e[n]));return t}getBufferLayout(e){this.state.layoutChanged=!1;const t=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:r}=this.settings;if(n.stepMode="dynamic"===r?e?e.isInstanced?"instance":"vertex":"instance":null!==r&&void 0!==r?r:"vertex",!t)return n;for(const o in t){const e=super._getBufferLayout(o,t[o]);n.attributes.push(...e.attributes)}return n}_autoUpdater(e,t){let{data:n,startRow:r,endRow:o,props:i,numInstances:s}=t;if(e.constant)return;const{settings:a,state:l,value:u,size:c,startIndices:f}=e,{accessor:d,transform:h}=a,p=l.binaryAccessor||("function"===typeof d?d:i[d]);go("function"===typeof p,'accessor "'.concat(d,'" is not a function'));let g=e.getVertexOffset(r);const{iterable:m,objectInfo:y}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=mo;const o={index:-1,data:e,target:[]};return e?"function"===typeof e[Symbol.iterator]?r=e:e.length>0&&(yo.length=e.length,r=yo):r=mo,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),o.index=t-1),{iterable:r,objectInfo:o}}(n,r,o);for(const v of m){y.index++;let t=p(v,y);if(h&&(t=h.call(this,t)),f){const n=(y.index<f.length-1?f[y.index+1]:s)-f[y.index];if(t&&Array.isArray(t[0])){let n=g;for(const r of t)e._normalizeValue(r,u,n),n+=c}else t&&t.length>c?u.set(t,g):(e._normalizeValue(t,y.target,0),bo({target:u,source:y.target,start:g,count:n}));g+=n*c}else e._normalizeValue(t,u,g),g+=c}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||"function"===typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}function So(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function To(e){let t,n={};return r=>{for(const o in r)if(!So(r[o],n[o])){t=e(r),n=r;break}return t}}let Po={};function Ao(e,t,n,r){Or.level>0&&Po[e]&&Po[e].call(null,t,n,r)}function Oo(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Co="#version 300 es\n".concat("out vec4 transform_output;\nvoid main() {\ntransform_output = vec4(0);\n}");function Mo(e){const{input:t,inputChannels:n,output:r}=e||{};if(!t)return Co;if(!n)throw new Error("inputChannels");const o=function(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("invalid channels: ".concat(e))}}(n),i=function(e,t){switch(t){case 1:return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case 2:return"vec4(".concat(e,", 0.0, 1.0)");case 3:return"vec4(".concat(e,", 1.0)");case 4:return e;default:throw new Error("invalid channels: ".concat(t))}}(t,n);return"#version 300 es\nin ".concat(o," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(i,";\n}")}class Ro extends lr{get[Symbol.toStringTag](){return"TextureView"}constructor(e,t){super(e,t,Ro.defaultProps)}}or(Ro,"defaultProps",{...lr.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});class jo extends lr{get[Symbol.toStringTag](){return"Texture"}constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:jo.defaultProps),or(this,"dimension",void 0),or(this,"format",void 0),or(this,"width",void 0),or(this,"height",void 0),or(this,"depth",void 0),or(this,"updateTimestamp",void 0),this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=e.incrementTimestamp()}}or(jo,"defaultProps",{...lr.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0}),or(jo,"COPY_SRC",1),or(jo,"COPY_DST",2),or(jo,"TEXTURE_BINDING",4),or(jo,"STORAGE_BINDING",8),or(jo,"RENDER_ATTACHMENT",16);class Io extends lr{get[Symbol.toStringTag](){return"Sampler"}constructor(e,t){super(e,t,Io.defaultProps)}}function Lo(e){return Array.isArray(e)?0===e.length||"number"===typeof e[0]?e:null:function(e){return!ArrayBuffer.isView(e)||e instanceof DataView?null:e}(e)}or(Io,"defaultProps",{...lr.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});class No{constructor(e){if(or(this,"name",void 0),or(this,"uniforms",{}),or(this,"modifiedUniforms",{}),or(this,"modified",!0),or(this,"bindingLayout",{}),or(this,"needsRedraw","initialized"),this.name=null===e||void 0===e?void 0:e.name,null!==e&&void 0!==e&&e.name&&null!==e&&void 0!==e&&e.shaderLayout){var t;const n=null===e||void 0===e||null===(t=e.shaderLayout.bindings)||void 0===t?void 0:t.find((t=>"uniform"===t.type&&t.name===(null===e||void 0===e?void 0:e.name)));if(!n)throw new Error(null===e||void 0===e?void 0:e.name);const r=n;for(const e of r.uniforms||[])this.bindingLayout[e.name]=e}}setUniforms(e){for(const[t,n]of Object.entries(e))this._setUniform(t,n),this.needsRedraw||this.setNeedsRedraw("".concat(this.name,".").concat(t,"=").concat(n))}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,t){(function(e,t){if(e!==t)return!1;const n=Lo(e);if(!n)return!1;const r=Lo(t);if(r&&n.length===r.length)for(let o=0;o<n.length;++o)if(r[o]!==n[o])return!1;return!0})(this.uniforms[e],t)||(this.uniforms[e]=function(e){const t=Lo(e);return t?t.slice():e}(t),this.modifiedUniforms[e]=!0,this.modified=!0)}}const Fo={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function Uo(e){const t=Fo[e];return Oo(e),t}function Do(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}let zo;function Bo(e){return(!zo||zo.byteLength<e)&&(zo=new ArrayBuffer(e)),zo}const Wo=new Sr({id:"luma.gl"});class qo{constructor(e){or(this,"layout",{}),or(this,"byteLength",void 0);let t=0;for(const[r,o]of Object.entries(e)){const e=Uo(o),{type:n,components:i}=e;t=Do(t,i);const s=t;t+=i,this.layout[r]={type:n,size:i,offset:s}}t+=(4-t%4)%4;const n=4*t;this.byteLength=Math.max(n,1024)}getData(e){const t=Bo(Math.max(this.byteLength,1024)),n={i32:new Int32Array(t),u32:new Uint32Array(t),f32:new Float32Array(t),f16:new Uint16Array(t)};for(const[r,o]of Object.entries(e)){const e=this.layout[r];if(!e){Wo.warn("Supplied uniform value ".concat(r," not present in uniform block layout"))();continue}const{type:t,size:i,offset:s}=e,a=n[t];if(1===i){if("number"!==typeof o&&"boolean"!==typeof o){Wo.warn("Supplied value for single component uniform ".concat(r," is not a number: ").concat(o))();continue}a[s]=Number(o)}else{const e=Lo(o);if(!e){Wo.warn("Supplied value for multi component / array uniform ".concat(r," is not a numeric array: ").concat(o))();continue}a.set(e,s)}}return new Uint8Array(t)}has(e){return Boolean(this.layout[e])}get(e){return this.layout[e]}}class Vo{constructor(e){or(this,"uniformBlocks",new Map),or(this,"uniformBufferLayouts",new Map),or(this,"uniformBuffers",new Map);for(const[t,n]of Object.entries(e)){const e=t,r=new qo(n.uniformTypes||{});this.uniformBufferLayouts.set(e,r);const o=new No({name:t});o.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(e,o)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){for(const[t,n]of Object.entries(e))this.uniformBlocks.get(t).setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(e){return this.uniformBufferLayouts.get(e).byteLength}getUniformBufferData(e){const t=this.uniformBlocks.get(e).getAllUniforms();return this.uniformBufferLayouts.get(e).getData(t)}createUniformBuffer(e,t,n){n&&this.setUniforms(n);const r=this.getUniformBufferByteLength(t),o=e.createBuffer({usage:ur.UNIFORM|ur.COPY_DST,byteLength:r}),i=this.getUniformBufferData(t);return o.write(i),o}getManagedUniformBuffer(e,t){if(!this.uniformBuffers.get(t)){const n=this.getUniformBufferByteLength(t),r=e.createBuffer({usage:ur.UNIFORM|ur.COPY_DST,byteLength:n});this.uniformBuffers.set(t,r)}return this.uniformBuffers.get(t)}updateUniformBuffers(){let e=!1;for(const t of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(t);e||(e=n)}return e&&Wo.log(3,"UniformStore.updateUniformBuffers(): ".concat(e))(),e}updateUniformBuffer(e){const t=this.uniformBlocks.get(e);let n=!1;if(this.uniformBuffers.get(e)&&t.needsRedraw){n||(n=t.needsRedraw);const r=this.getUniformBufferData(e);this.uniformBuffers.get(e).write(r);const o=this.uniformBlocks.get(e).getAllUniforms();Wo.log(4,"Writing to uniform buffer ".concat(String(e)),r,o)()}return n}}class Go extends lr{get[Symbol.toStringTag](){return"RenderPipeline"}constructor(e,t){super(e,t,Go.defaultProps),or(this,"shaderLayout",void 0),or(this,"bufferLayout",void 0),or(this,"linkStatus","pending"),or(this,"hash",""),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}setUniformsWebGL(e){throw new Error("Use uniform blocks")}}function Ho(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ho(e[r],t[r],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const i of r){if(!t.hasOwnProperty(i))return!1;if(!Ho(e[i],t[i],n-1))return!1}return!0}return!1}function $o(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach((n=>{const r=e[n];!function(e){return null!==Lo(e)||"number"===typeof e||"boolean"===typeof e}(r)?t.bindings[n]=r:t.uniforms[n]=r})),t}or(Go,"defaultProps",{...lr.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});const Ko={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},Yo={f32:4,f16:2,i32:4,u32:4};function Qo(e){const t=function(e){const t=Jo[e];return t}(Zo[e]),n=e.includes("norm"),r=!n&&!e.startsWith("float"),o=e.startsWith("s");return{dataType:Zo[e],byteLength:t,integer:r,signed:o,normalized:n}}const Zo={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},Jo={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4};function Xo(e){let t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);const[n,r]=e.split("x"),o=n,i=r?parseInt(r):1,s=Qo(o),a={type:o,components:i,byteLength:s.byteLength*i,integer:s.integer,signed:s.signed,normalized:s.normalized};return t&&(a.webglOnly=!0),a}function ei(e,t){const n={};for(const r of e.attributes)n[r.name]=ti(e,t,r.name);return n}function ti(e,t,n){const r=function(e,t){const n=e.attributes.find((e=>e.name===t));n||Wo.warn('shader layout attribute "'.concat(t,'" not present in shader'));return n||null}(e,n),o=function(e,t){ni(e);let n=function(e,t){for(const n of e)if(n.format&&n.name===t)return{attributeName:n.name,bufferName:t,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}(e,t);if(n)return n;if(n=function(e,t){for(const r of e){var n;let e=r.byteStride;if("number"!==typeof r.byteStride)for(const t of r.attributes||[]){e+=Xo(t.format).byteLength}const o=null===(n=r.attributes)||void 0===n?void 0:n.find((e=>e.attribute===t));if(o)return{attributeName:o.attribute,bufferName:r.name,stepMode:r.stepMode,vertexFormat:o.format,byteOffset:o.byteOffset,byteStride:e}}return null}(e,t),n)return n;return Wo.warn('layout for attribute "'.concat(t,'" not present in buffer layout')),null}(t,n);if(!r)return null;const i=function(e){const[t,n]=Ko[e],r="i32"===t||"u32"===t,o="u32"!==t,i=Yo[t]*n,s=function(e,t){let n;switch(e){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return t<=2?"float16x2":"float16x4"}return 1===t?n:"".concat(n,"x").concat(t)}(t,n);return{dataType:t,components:n,defaultVertexFormat:s,byteLength:i,integer:r,signed:o}}(r.type),s=(null===o||void 0===o?void 0:o.vertexFormat)||i.defaultVertexFormat,a=Xo(s);return{attributeName:(null===o||void 0===o?void 0:o.attributeName)||r.name,bufferName:(null===o||void 0===o?void 0:o.bufferName)||r.name,location:r.location,shaderType:r.type,shaderDataType:i.dataType,shaderComponents:i.components,vertexFormat:s,bufferDataType:a.type,bufferComponents:a.components,normalized:a.normalized,integer:i.integer,stepMode:(null===o||void 0===o?void 0:o.stepMode)||r.stepMode,byteOffset:(null===o||void 0===o?void 0:o.byteOffset)||0,byteStride:(null===o||void 0===o?void 0:o.byteStride)||0}}function ni(e){for(const t of e)(t.attributes&&t.format||!t.attributes&&!t.format)&&Wo.warn("BufferLayout ".concat(name," must have either 'attributes' or 'format' field"))}class ri{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class oi{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}}class ii extends oi{constructor(){super()}}class si extends ii{constructor(e,t,n,r){super(),this.name=e,this.args=t,this.returnType=n,this.body=r}get astNodeType(){return"function"}}class ai extends ii{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}}class li extends ii{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"while"}}class ui extends ii{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}}class ci extends ii{constructor(e,t,n,r){super(),this.init=e,this.condition=t,this.increment=n,this.body=r}get astNodeType(){return"for"}}class fi extends ii{constructor(e,t,n,r,o){super(),this.name=e,this.type=t,this.storage=n,this.access=r,this.value=o}get astNodeType(){return"var"}}class di extends ii{constructor(e,t,n){super(),this.name=e,this.type=t,this.value=n}get astNodeType(){return"override"}}class hi extends ii{constructor(e,t,n,r,o){super(),this.name=e,this.type=t,this.storage=n,this.access=r,this.value=o}get astNodeType(){return"let"}}class pi extends ii{constructor(e,t,n,r,o){super(),this.name=e,this.type=t,this.storage=n,this.access=r,this.value=o}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}}var gi,mi,yi,vi,bi;!function(e){e.increment="++",e.decrement="--"}(gi||(gi={})),function(e){e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for IncrementOperator");return e[n]}}(gi||(gi={}));class _i extends ii{constructor(e,t){super(),this.operator=e,this.variable=t}get astNodeType(){return"increment"}}!function(e){e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="}(mi||(mi={})),function(e){e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for AssignOperator");return e[n]}}(mi||(mi={}));class wi extends ii{constructor(e,t,n){super(),this.operator=e,this.variable=t,this.value=n}get astNodeType(){return"assign"}}class xi extends ii{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"call"}}class ki extends ii{constructor(e,t){super(),this.body=e,this.continuing=t}get astNodeType(){return"loop"}}class Ei extends ii{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"body"}}class Si extends ii{constructor(e,t,n,r){super(),this.condition=e,this.body=t,this.elseif=n,this.else=r}get astNodeType(){return"if"}}class Ti extends ii{constructor(e){super(),this.value=e}get astNodeType(){return"return"}}class Pi extends ii{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class Ai extends ii{constructor(e,t){super(),this.name=e,this.type=t}get astNodeType(){return"alias"}}class Oi extends ii{constructor(){super()}get astNodeType(){return"discard"}}class Ci extends ii{constructor(){super()}get astNodeType(){return"break"}}class Mi extends ii{constructor(){super()}get astNodeType(){return"continue"}}class Ri extends ii{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class ji extends Ri{constructor(e,t){super(e),this.members=t}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let t=0;t<this.members.length;t++)if(this.members[t].name==e)return t;return-1}}class Ii extends Ri{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"template"}}class Li extends Ri{constructor(e,t,n,r){super(e),this.storage=t,this.type=n,this.access=r}get astNodeType(){return"pointer"}}class Ni extends Ri{constructor(e,t,n,r){super(e),this.attributes=t,this.format=n,this.count=r}get astNodeType(){return"array"}get isArray(){return!0}}class Fi extends Ri{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"sampler"}}class Ui extends oi{constructor(){super()}}class Di extends Ui{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class zi extends Ui{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"createExpr"}}class Bi extends Ui{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return 180*this.args[0].evaluate(e)/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}}class Wi extends Ui{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}}class qi extends Ui{constructor(e,t){super(),this.name=e,this.initializer=t}get astNodeType(){return"constExpr"}evaluate(e){var t,n;if(this.initializer instanceof zi){const r=null===(t=this.postfix)||void 0===t?void 0:t.evaluateString(e),o=null===(n=this.initializer.type)||void 0===n?void 0:n.name,i=e.structs.get(o),s=null===i||void 0===i?void 0:i.getMemberIndex(r);if(-1!=s){return this.initializer.args[s].evaluate(e)}console.log(s)}return this.initializer.evaluate(e)}}class Vi extends Ui{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class Gi extends Ui{constructor(e,t){super(),this.type=e,this.value=t}get astNodeType(){return"bitcastExpr"}}class Hi extends Ui{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"typecastExpr"}evaluate(e){return this.args[0].evaluate(e)}}class $i extends Ui{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}}class Ki extends Ui{constructor(){super()}}class Yi extends Ki{constructor(e,t){super(),this.operator=e,this.right=t}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}}class Qi extends Ki{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error("Unknown operator ".concat(this.operator))}}}class Zi extends oi{constructor(){super()}}class Ji extends Zi{constructor(e,t){super(),this.selector=e,this.body=t}get astNodeType(){return"case"}}class Xi extends Zi{constructor(e){super(),this.body=e}get astNodeType(){return"default"}}class es extends oi{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"argument"}}class ts extends oi{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"elseif"}}class ns extends oi{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"member"}}class rs extends oi{constructor(e,t){super(),this.name=e,this.value=t}get astNodeType(){return"attribute"}}!function(e){e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"}(vi||(vi={}));class os{constructor(e,t,n){this.name=e,this.type=t,this.rule=n}toString(){return this.name}}class is{}yi=is,is.none=new os("",vi.reserved,""),is.eof=new os("EOF",vi.token,""),is.reserved={asm:new os("asm",vi.reserved,"asm"),bf16:new os("bf16",vi.reserved,"bf16"),do:new os("do",vi.reserved,"do"),enum:new os("enum",vi.reserved,"enum"),f16:new os("f16",vi.reserved,"f16"),f64:new os("f64",vi.reserved,"f64"),handle:new os("handle",vi.reserved,"handle"),i8:new os("i8",vi.reserved,"i8"),i16:new os("i16",vi.reserved,"i16"),i64:new os("i64",vi.reserved,"i64"),mat:new os("mat",vi.reserved,"mat"),premerge:new os("premerge",vi.reserved,"premerge"),regardless:new os("regardless",vi.reserved,"regardless"),typedef:new os("typedef",vi.reserved,"typedef"),u8:new os("u8",vi.reserved,"u8"),u16:new os("u16",vi.reserved,"u16"),u64:new os("u64",vi.reserved,"u64"),unless:new os("unless",vi.reserved,"unless"),using:new os("using",vi.reserved,"using"),vec:new os("vec",vi.reserved,"vec"),void:new os("void",vi.reserved,"void")},is.keywords={array:new os("array",vi.keyword,"array"),atomic:new os("atomic",vi.keyword,"atomic"),bool:new os("bool",vi.keyword,"bool"),f32:new os("f32",vi.keyword,"f32"),i32:new os("i32",vi.keyword,"i32"),mat2x2:new os("mat2x2",vi.keyword,"mat2x2"),mat2x3:new os("mat2x3",vi.keyword,"mat2x3"),mat2x4:new os("mat2x4",vi.keyword,"mat2x4"),mat3x2:new os("mat3x2",vi.keyword,"mat3x2"),mat3x3:new os("mat3x3",vi.keyword,"mat3x3"),mat3x4:new os("mat3x4",vi.keyword,"mat3x4"),mat4x2:new os("mat4x2",vi.keyword,"mat4x2"),mat4x3:new os("mat4x3",vi.keyword,"mat4x3"),mat4x4:new os("mat4x4",vi.keyword,"mat4x4"),ptr:new os("ptr",vi.keyword,"ptr"),sampler:new os("sampler",vi.keyword,"sampler"),sampler_comparison:new os("sampler_comparison",vi.keyword,"sampler_comparison"),struct:new os("struct",vi.keyword,"struct"),texture_1d:new os("texture_1d",vi.keyword,"texture_1d"),texture_2d:new os("texture_2d",vi.keyword,"texture_2d"),texture_2d_array:new os("texture_2d_array",vi.keyword,"texture_2d_array"),texture_3d:new os("texture_3d",vi.keyword,"texture_3d"),texture_cube:new os("texture_cube",vi.keyword,"texture_cube"),texture_cube_array:new os("texture_cube_array",vi.keyword,"texture_cube_array"),texture_multisampled_2d:new os("texture_multisampled_2d",vi.keyword,"texture_multisampled_2d"),texture_storage_1d:new os("texture_storage_1d",vi.keyword,"texture_storage_1d"),texture_storage_2d:new os("texture_storage_2d",vi.keyword,"texture_storage_2d"),texture_storage_2d_array:new os("texture_storage_2d_array",vi.keyword,"texture_storage_2d_array"),texture_storage_3d:new os("texture_storage_3d",vi.keyword,"texture_storage_3d"),texture_depth_2d:new os("texture_depth_2d",vi.keyword,"texture_depth_2d"),texture_depth_2d_array:new os("texture_depth_2d_array",vi.keyword,"texture_depth_2d_array"),texture_depth_cube:new os("texture_depth_cube",vi.keyword,"texture_depth_cube"),texture_depth_cube_array:new os("texture_depth_cube_array",vi.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new os("texture_depth_multisampled_2d",vi.keyword,"texture_depth_multisampled_2d"),texture_external:new os("texture_external",vi.keyword,"texture_external"),u32:new os("u32",vi.keyword,"u32"),vec2:new os("vec2",vi.keyword,"vec2"),vec3:new os("vec3",vi.keyword,"vec3"),vec4:new os("vec4",vi.keyword,"vec4"),bitcast:new os("bitcast",vi.keyword,"bitcast"),block:new os("block",vi.keyword,"block"),break:new os("break",vi.keyword,"break"),case:new os("case",vi.keyword,"case"),continue:new os("continue",vi.keyword,"continue"),continuing:new os("continuing",vi.keyword,"continuing"),default:new os("default",vi.keyword,"default"),discard:new os("discard",vi.keyword,"discard"),else:new os("else",vi.keyword,"else"),enable:new os("enable",vi.keyword,"enable"),fallthrough:new os("fallthrough",vi.keyword,"fallthrough"),false:new os("false",vi.keyword,"false"),fn:new os("fn",vi.keyword,"fn"),for:new os("for",vi.keyword,"for"),function:new os("function",vi.keyword,"function"),if:new os("if",vi.keyword,"if"),let:new os("let",vi.keyword,"let"),const:new os("const",vi.keyword,"const"),loop:new os("loop",vi.keyword,"loop"),while:new os("while",vi.keyword,"while"),private:new os("private",vi.keyword,"private"),read:new os("read",vi.keyword,"read"),read_write:new os("read_write",vi.keyword,"read_write"),return:new os("return",vi.keyword,"return"),storage:new os("storage",vi.keyword,"storage"),switch:new os("switch",vi.keyword,"switch"),true:new os("true",vi.keyword,"true"),alias:new os("alias",vi.keyword,"alias"),type:new os("type",vi.keyword,"type"),uniform:new os("uniform",vi.keyword,"uniform"),var:new os("var",vi.keyword,"var"),override:new os("override",vi.keyword,"override"),workgroup:new os("workgroup",vi.keyword,"workgroup"),write:new os("write",vi.keyword,"write"),r8unorm:new os("r8unorm",vi.keyword,"r8unorm"),r8snorm:new os("r8snorm",vi.keyword,"r8snorm"),r8uint:new os("r8uint",vi.keyword,"r8uint"),r8sint:new os("r8sint",vi.keyword,"r8sint"),r16uint:new os("r16uint",vi.keyword,"r16uint"),r16sint:new os("r16sint",vi.keyword,"r16sint"),r16float:new os("r16float",vi.keyword,"r16float"),rg8unorm:new os("rg8unorm",vi.keyword,"rg8unorm"),rg8snorm:new os("rg8snorm",vi.keyword,"rg8snorm"),rg8uint:new os("rg8uint",vi.keyword,"rg8uint"),rg8sint:new os("rg8sint",vi.keyword,"rg8sint"),r32uint:new os("r32uint",vi.keyword,"r32uint"),r32sint:new os("r32sint",vi.keyword,"r32sint"),r32float:new os("r32float",vi.keyword,"r32float"),rg16uint:new os("rg16uint",vi.keyword,"rg16uint"),rg16sint:new os("rg16sint",vi.keyword,"rg16sint"),rg16float:new os("rg16float",vi.keyword,"rg16float"),rgba8unorm:new os("rgba8unorm",vi.keyword,"rgba8unorm"),rgba8unorm_srgb:new os("rgba8unorm_srgb",vi.keyword,"rgba8unorm_srgb"),rgba8snorm:new os("rgba8snorm",vi.keyword,"rgba8snorm"),rgba8uint:new os("rgba8uint",vi.keyword,"rgba8uint"),rgba8sint:new os("rgba8sint",vi.keyword,"rgba8sint"),bgra8unorm:new os("bgra8unorm",vi.keyword,"bgra8unorm"),bgra8unorm_srgb:new os("bgra8unorm_srgb",vi.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new os("rgb10a2unorm",vi.keyword,"rgb10a2unorm"),rg11b10float:new os("rg11b10float",vi.keyword,"rg11b10float"),rg32uint:new os("rg32uint",vi.keyword,"rg32uint"),rg32sint:new os("rg32sint",vi.keyword,"rg32sint"),rg32float:new os("rg32float",vi.keyword,"rg32float"),rgba16uint:new os("rgba16uint",vi.keyword,"rgba16uint"),rgba16sint:new os("rgba16sint",vi.keyword,"rgba16sint"),rgba16float:new os("rgba16float",vi.keyword,"rgba16float"),rgba32uint:new os("rgba32uint",vi.keyword,"rgba32uint"),rgba32sint:new os("rgba32sint",vi.keyword,"rgba32sint"),rgba32float:new os("rgba32float",vi.keyword,"rgba32float"),static_assert:new os("static_assert",vi.keyword,"static_assert")},is.tokens={decimal_float_literal:new os("decimal_float_literal",vi.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new os("hex_float_literal",vi.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new os("int_literal",vi.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new os("uint_literal",vi.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new os("ident",vi.token,/[a-zA-Z][0-9a-zA-Z_]*/),and:new os("and",vi.token,"&"),and_and:new os("and_and",vi.token,"&&"),arrow:new os("arrow ",vi.token,"->"),attr:new os("attr",vi.token,"@"),attr_left:new os("attr_left",vi.token,"[["),attr_right:new os("attr_right",vi.token,"]]"),forward_slash:new os("forward_slash",vi.token,"/"),bang:new os("bang",vi.token,"!"),bracket_left:new os("bracket_left",vi.token,"["),bracket_right:new os("bracket_right",vi.token,"]"),brace_left:new os("brace_left",vi.token,"{"),brace_right:new os("brace_right",vi.token,"}"),colon:new os("colon",vi.token,":"),comma:new os("comma",vi.token,","),equal:new os("equal",vi.token,"="),equal_equal:new os("equal_equal",vi.token,"=="),not_equal:new os("not_equal",vi.token,"!="),greater_than:new os("greater_than",vi.token,">"),greater_than_equal:new os("greater_than_equal",vi.token,">="),shift_right:new os("shift_right",vi.token,">>"),less_than:new os("less_than",vi.token,"<"),less_than_equal:new os("less_than_equal",vi.token,"<="),shift_left:new os("shift_left",vi.token,"<<"),modulo:new os("modulo",vi.token,"%"),minus:new os("minus",vi.token,"-"),minus_minus:new os("minus_minus",vi.token,"--"),period:new os("period",vi.token,"."),plus:new os("plus",vi.token,"+"),plus_plus:new os("plus_plus",vi.token,"++"),or:new os("or",vi.token,"|"),or_or:new os("or_or",vi.token,"||"),paren_left:new os("paren_left",vi.token,"("),paren_right:new os("paren_right",vi.token,")"),semicolon:new os("semicolon",vi.token,";"),star:new os("star",vi.token,"*"),tilde:new os("tilde",vi.token,"~"),underscore:new os("underscore",vi.token,"_"),xor:new os("xor",vi.token,"^"),plus_equal:new os("plus_equal",vi.token,"+="),minus_equal:new os("minus_equal",vi.token,"-="),times_equal:new os("times_equal",vi.token,"*="),division_equal:new os("division_equal",vi.token,"/="),modulo_equal:new os("modulo_equal",vi.token,"%="),and_equal:new os("and_equal",vi.token,"&="),or_equal:new os("or_equal",vi.token,"|="),xor_equal:new os("xor_equal",vi.token,"^="),shift_right_equal:new os("shift_right_equal",vi.token,">>="),shift_left_equal:new os("shift_left_equal",vi.token,"<<=")},is.storage_class=[yi.keywords.function,yi.keywords.private,yi.keywords.workgroup,yi.keywords.uniform,yi.keywords.storage],is.access_mode=[yi.keywords.read,yi.keywords.write,yi.keywords.read_write],is.sampler_type=[yi.keywords.sampler,yi.keywords.sampler_comparison],is.sampled_texture_type=[yi.keywords.texture_1d,yi.keywords.texture_2d,yi.keywords.texture_2d_array,yi.keywords.texture_3d,yi.keywords.texture_cube,yi.keywords.texture_cube_array],is.multisampled_texture_type=[yi.keywords.texture_multisampled_2d],is.storage_texture_type=[yi.keywords.texture_storage_1d,yi.keywords.texture_storage_2d,yi.keywords.texture_storage_2d_array,yi.keywords.texture_storage_3d],is.depth_texture_type=[yi.keywords.texture_depth_2d,yi.keywords.texture_depth_2d_array,yi.keywords.texture_depth_cube,yi.keywords.texture_depth_cube_array,yi.keywords.texture_depth_multisampled_2d],is.texture_external_type=[yi.keywords.texture_external],is.any_texture_type=[...yi.sampled_texture_type,...yi.multisampled_texture_type,...yi.storage_texture_type,...yi.depth_texture_type,...yi.texture_external_type],is.texel_format=[yi.keywords.r8unorm,yi.keywords.r8snorm,yi.keywords.r8uint,yi.keywords.r8sint,yi.keywords.r16uint,yi.keywords.r16sint,yi.keywords.r16float,yi.keywords.rg8unorm,yi.keywords.rg8snorm,yi.keywords.rg8uint,yi.keywords.rg8sint,yi.keywords.r32uint,yi.keywords.r32sint,yi.keywords.r32float,yi.keywords.rg16uint,yi.keywords.rg16sint,yi.keywords.rg16float,yi.keywords.rgba8unorm,yi.keywords.rgba8unorm_srgb,yi.keywords.rgba8snorm,yi.keywords.rgba8uint,yi.keywords.rgba8sint,yi.keywords.bgra8unorm,yi.keywords.bgra8unorm_srgb,yi.keywords.rgb10a2unorm,yi.keywords.rg11b10float,yi.keywords.rg32uint,yi.keywords.rg32sint,yi.keywords.rg32float,yi.keywords.rgba16uint,yi.keywords.rgba16sint,yi.keywords.rgba16float,yi.keywords.rgba32uint,yi.keywords.rgba32sint,yi.keywords.rgba32float],is.const_literal=[yi.tokens.int_literal,yi.tokens.uint_literal,yi.tokens.decimal_float_literal,yi.tokens.hex_float_literal,yi.keywords.true,yi.keywords.false],is.literal_or_ident=[yi.tokens.ident,yi.tokens.int_literal,yi.tokens.uint_literal,yi.tokens.decimal_float_literal,yi.tokens.hex_float_literal],is.element_count_expression=[yi.tokens.int_literal,yi.tokens.uint_literal,yi.tokens.ident],is.template_types=[yi.keywords.vec2,yi.keywords.vec3,yi.keywords.vec4,yi.keywords.mat2x2,yi.keywords.mat2x3,yi.keywords.mat2x4,yi.keywords.mat3x2,yi.keywords.mat3x3,yi.keywords.mat3x4,yi.keywords.mat4x2,yi.keywords.mat4x3,yi.keywords.mat4x4,yi.keywords.atomic,yi.keywords.bitcast,...yi.any_texture_type],is.attribute_name=[yi.tokens.ident,yi.keywords.block],is.assignment_operators=[yi.tokens.equal,yi.tokens.plus_equal,yi.tokens.minus_equal,yi.tokens.times_equal,yi.tokens.division_equal,yi.tokens.modulo_equal,yi.tokens.and_equal,yi.tokens.or_equal,yi.tokens.xor_equal,yi.tokens.shift_right_equal,yi.tokens.shift_left_equal],is.increment_operators=[yi.tokens.plus_plus,yi.tokens.minus_minus];class ss{constructor(e,t,n){this.type=e,this.lexeme=t,this.line=n}toString(){return this.lexeme}isTemplateType(){return-1!=is.template_types.indexOf(this.type)}isArrayType(){return this.type==is.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class as{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!==e&&void 0!==e?e:""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw"Invalid syntax at line ".concat(this._line);return this._tokens.push(new ss(is.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if("\n"==e)return this._line++,!0;if(this._isWhitespace(e))return!0;if("/"==e){if("/"==this._peekAhead()){for(;"\n"!=e;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let t=1;for(;t>0;){if(this._isAtEnd())return!0;if(e=this._advance(),"\n"==e)this._line++;else if("*"==e){if("/"==this._peekAhead()&&(this._advance(),t--,0==t))return!0}else"/"==e&&"*"==this._peekAhead()&&(this._advance(),t++)}return!0}}let t=is.none;for(;;){let n=this._findType(e);const r=this._peekAhead();if(">"==e&&(">"==r||"="==r)){let e=!1,t=this._tokens.length-1;for(let n=0;n<5&&t>=0;++n,--t)if(this._tokens[t].type===is.tokens.less_than){t>0&&this._tokens[t-1].isArrayOrTemplateType()&&(e=!0);break}if(e)return this._addToken(n),!0}if(n===is.none){let r=e,o=0;const i=2;for(let e=0;e<i;++e)if(r+=this._peekAhead(e),n=this._findType(r),n!==is.none){o=e;break}if(n===is.none)return t!==is.none&&(this._current--,this._addToken(t),!0);e=r,this._current+=o+1}if(t=n,this._isAtEnd())break;e+=this._advance()}return t!==is.none&&(this._addToken(t),!0)}_findType(e){for(const t in is.keywords){const n=is.keywords[t];if(this._match(e,n.rule))return n}for(const t in is.tokens){const n=is.tokens[t];if(this._match(e,n.rule))return n}return is.none}_match(e,t){if("string"===typeof t){if(t==e)return!0}else{const n=t.exec(e);if(n&&0==n.index&&n[0]==e)return!0}return!1}_isAtEnd(){return this._current>=this._source.length}_isWhitespace(e){return" "==e||"\t"==e||"\r"==e}_advance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._source[this._current];return e=e||0,e++,this._current+=e,t}_peekAhead(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const t=this._source.substring(this._start,this._current);this._tokens.push(new ss(e,t,this._line))}}class ls{constructor(){this._tokens=[],this._current=0,this._context=new ri}parse(e){this._initialize(e);let t=[];for(;!this._isAtEnd();){const e=this._global_decl_or_directive();if(!e)break;t.push(e)}return t}_initialize(e){if(e)if("string"==typeof e){const t=new as(e);this._tokens=t.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,t){return console.error(e,t),{token:e,message:t,toString:function(){return"".concat(t)}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==is.eof}_match(e){if(e instanceof os)return!!this._check(e)&&(this._advance(),!0);for(let t=0,n=e.length;t<n;++t){const n=e[t];if(this._check(n))return this._advance(),!0}return!1}_consume(e,t){if(this._check(e))return this._advance();throw this._error(this._peek(),t)}_check(e){if(this._isAtEnd())return!1;const t=this._peek();if(e instanceof Array){let n=t.type;return-1!=e.indexOf(n)}return t.type==e}_advance(){return this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(is.tokens.semicolon)&&!this._isAtEnd(););if(this._match(is.keywords.alias)){const e=this._type_alias();return this._consume(is.tokens.semicolon,"Expected ';'"),e}if(this._match(is.keywords.enable)){const e=this._enable_directive();return this._consume(is.tokens.semicolon,"Expected ';'"),e}const e=this._attribute();if(this._check(is.keywords.var)){const t=this._global_variable_decl();return null!=t&&(t.attributes=e),this._consume(is.tokens.semicolon,"Expected ';'."),t}if(this._check(is.keywords.override)){const t=this._override_variable_decl();return null!=t&&(t.attributes=e),this._consume(is.tokens.semicolon,"Expected ';'."),t}if(this._check(is.keywords.let)){const t=this._global_let_decl();return null!=t&&(t.attributes=e),this._consume(is.tokens.semicolon,"Expected ';'."),t}if(this._check(is.keywords.const)){const t=this._global_const_decl();return null!=t&&(t.attributes=e),this._consume(is.tokens.semicolon,"Expected ';'."),t}if(this._check(is.keywords.struct)){const t=this._struct_decl();return null!=t&&(t.attributes=e),t}if(this._check(is.keywords.fn)){const t=this._function_decl();return null!=t&&(t.attributes=e),t}return null}_function_decl(){if(!this._match(is.keywords.fn))return null;const e=this._consume(is.tokens.ident,"Expected function name.").toString();this._consume(is.tokens.paren_left,"Expected '(' for function arguments.");const t=[];if(!this._check(is.tokens.paren_right))do{if(this._check(is.tokens.paren_right))break;const e=this._attribute(),n=this._consume(is.tokens.ident,"Expected argument name.").toString();this._consume(is.tokens.colon,"Expected ':' for argument type.");const r=this._attribute(),o=this._type_decl();null!=o&&(o.attributes=r,t.push(new es(n,o,e)))}while(this._match(is.tokens.comma));this._consume(is.tokens.paren_right,"Expected ')' after function arguments.");let n=null;if(this._match(is.tokens.arrow)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}const r=this._compound_statement();return new si(e,t,n,r)}_compound_statement(){const e=[];for(this._consume(is.tokens.brace_left,"Expected '{' for block.");!this._check(is.tokens.brace_right);){const t=this._statement();null!==t&&e.push(t)}return this._consume(is.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(is.tokens.semicolon)&&!this._isAtEnd(););if(this._check(is.keywords.if))return this._if_statement();if(this._check(is.keywords.switch))return this._switch_statement();if(this._check(is.keywords.loop))return this._loop_statement();if(this._check(is.keywords.for))return this._for_statement();if(this._check(is.keywords.while))return this._while_statement();if(this._check(is.keywords.continuing))return this._continuing_statement();if(this._check(is.keywords.static_assert))return this._static_assert_statement();if(this._check(is.tokens.brace_left))return this._compound_statement();let e=null;return e=this._check(is.keywords.return)?this._return_statement():this._check([is.keywords.var,is.keywords.let,is.keywords.const])?this._variable_statement():this._match(is.keywords.discard)?new Oi:this._match(is.keywords.break)?new Ci:this._match(is.keywords.continue)?new Mi:this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),null!=e&&this._consume(is.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(is.keywords.static_assert))return null;let e=this._optional_paren_expression();return new ai(e)}_while_statement(){if(!this._match(is.keywords.while))return null;let e=this._optional_paren_expression();const t=this._compound_statement();return new li(e,t)}_continuing_statement(){if(!this._match(is.keywords.continuing))return null;const e=this._compound_statement();return new ui(e)}_for_statement(){if(!this._match(is.keywords.for))return null;this._consume(is.tokens.paren_left,"Expected '('.");const e=this._check(is.tokens.semicolon)?null:this._for_init();this._consume(is.tokens.semicolon,"Expected ';'.");const t=this._check(is.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(is.tokens.semicolon,"Expected ';'.");const n=this._check(is.tokens.paren_right)?null:this._for_increment();this._consume(is.tokens.paren_right,"Expected ')'.");const r=this._compound_statement();return new ci(e,t,n,r)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(is.keywords.var)){const e=this._variable_decl();if(null===e)throw this._error(this._peek(),"Variable declaration expected.");let t=null;return this._match(is.tokens.equal)&&(t=this._short_circuit_or_expression()),new fi(e.name,e.type,e.storage,e.access,t)}if(this._match(is.keywords.let)){const e=this._consume(is.tokens.ident,"Expected name for let.").toString();let t=null;if(this._match(is.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}this._consume(is.tokens.equal,"Expected '=' for let.");const n=this._short_circuit_or_expression();return new hi(e,t,null,null,n)}if(this._match(is.keywords.const)){const e=this._consume(is.tokens.ident,"Expected name for const.").toString();let t=null;if(this._match(is.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}this._consume(is.tokens.equal,"Expected '=' for const.");const n=this._short_circuit_or_expression();return new pi(e,t,null,null,n)}return null}_increment_decrement_statement(){const e=this._current,t=this._unary_expression();if(null==t)return null;if(!this._check(is.increment_operators))return this._current=e,null;const n=this._consume(is.increment_operators,"Expected increment operator");return new _i(n.type===is.tokens.plus_plus?gi.increment:gi.decrement,t)}_assignment_statement(){let e=null;if(this._check(is.tokens.brace_right))return null;let t=this._match(is.tokens.underscore);if(t||(e=this._unary_expression()),!t&&null==e)return null;const n=this._consume(is.assignment_operators,"Expected assignment operator."),r=this._short_circuit_or_expression();return new wi(mi.parse(n.lexeme),e,r)}_func_call_statement(){if(!this._check(is.tokens.ident))return null;const e=this._current,t=this._consume(is.tokens.ident,"Expected function name."),n=this._argument_expression_list();return null===n?(this._current=e,null):new xi(t.lexeme,n)}_loop_statement(){if(!this._match(is.keywords.loop))return null;this._consume(is.tokens.brace_left,"Expected '{' for loop.");const e=[];let t=this._statement();for(;null!==t;){if(Array.isArray(t))for(let n of t)e.push(n);else e.push(t);t=this._statement()}let n=null;return this._match(is.keywords.continuing)&&(n=this._compound_statement()),this._consume(is.tokens.brace_right,"Expected '}' for loop."),new ki(e,n)}_switch_statement(){if(!this._match(is.keywords.switch))return null;const e=this._optional_paren_expression();this._consume(is.tokens.brace_left,"Expected '{' for switch.");const t=this._switch_body();if(null==t||0==t.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(is.tokens.brace_right,"Expected '}' for switch."),new Ei(e,t)}_switch_body(){const e=[];if(this._match(is.keywords.case)){const t=this._case_selectors();this._match(is.tokens.colon),this._consume(is.tokens.brace_left,"Exected '{' for switch case.");const n=this._case_body();this._consume(is.tokens.brace_right,"Exected '}' for switch case."),e.push(new Ji(t,n))}if(this._match(is.keywords.default)){this._match(is.tokens.colon),this._consume(is.tokens.brace_left,"Exected '{' for switch default.");const t=this._case_body();this._consume(is.tokens.brace_right,"Exected '}' for switch default."),e.push(new Xi(t))}if(this._check([is.keywords.default,is.keywords.case])){const t=this._switch_body();e.push(t[0])}return e}_case_selectors(){var e,t,n,r;const o=[null!==(t=null===(e=this._shift_expression())||void 0===e?void 0:e.evaluate(this._context).toString())&&void 0!==t?t:""];for(;this._match(is.tokens.comma);)o.push(null!==(r=null===(n=this._shift_expression())||void 0===n?void 0:n.evaluate(this._context).toString())&&void 0!==r?r:"");return o}_case_body(){if(this._match(is.keywords.fallthrough))return this._consume(is.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(null==e)return[];e instanceof Array||(e=[e]);const t=this._case_body();return 0==t.length?e:[...e,t[0]]}_if_statement(){if(!this._match(is.keywords.if))return null;const e=this._optional_paren_expression(),t=this._compound_statement();let n=[];this._match_elseif()&&(n=this._elseif_statement(n));let r=null;return this._match(is.keywords.else)&&(r=this._compound_statement()),new Si(e,t,n,r)}_match_elseif(){return this._tokens[this._current].type===is.keywords.else&&this._tokens[this._current+1].type===is.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this._optional_paren_expression(),n=this._compound_statement();return e.push(new ts(t,n)),this._match_elseif()&&this._elseif_statement(e),e}_return_statement(){if(!this._match(is.keywords.return))return null;const e=this._short_circuit_or_expression();return new Ti(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(is.tokens.or_or);)e=new Qi(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(is.tokens.and_and);)e=new Qi(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(is.tokens.or);)e=new Qi(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(is.tokens.xor);)e=new Qi(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(is.tokens.and);)e=new Qi(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([is.tokens.equal_equal,is.tokens.not_equal])?new Qi(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([is.tokens.less_than,is.tokens.greater_than,is.tokens.less_than_equal,is.tokens.greater_than_equal]);)e=new Qi(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([is.tokens.shift_left,is.tokens.shift_right]);)e=new Qi(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([is.tokens.plus,is.tokens.minus]);)e=new Qi(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([is.tokens.star,is.tokens.forward_slash,is.tokens.modulo]);)e=new Qi(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([is.tokens.minus,is.tokens.bang,is.tokens.tilde,is.tokens.star,is.tokens.and])?new Yi(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),t=this._postfix_expression();return t&&(e.postfix=t),e}_postfix_expression(){if(this._match(is.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(is.tokens.bracket_right,"Expected ']'.");const t=this._postfix_expression();return t&&(e.postfix=t),e}if(this._match(is.tokens.period)){const e=this._consume(is.tokens.ident,"Expected member name."),t=this._postfix_expression(),n=new Di(e.lexeme);return t&&(n.postfix=t),n}return null}_getStruct(e){if(this._context.aliases.has(e)){return this._context.aliases.get(e).type}if(this._context.structs.has(e)){return this._context.structs.get(e)}return null}_primary_expression(){if(this._match(is.tokens.ident)){const e=this._previous().toString();if(this._check(is.tokens.paren_left)){const t=this._argument_expression_list(),n=this._getStruct(e);return null!=n?new zi(n,t):new Bi(e,t)}if(this._context.constants.has(e)){const t=this._context.constants.get(e);return new qi(e,t.value)}return new Wi(e)}if(this._match(is.const_literal))return new Vi(parseFloat(this._previous().toString()));if(this._check(is.tokens.paren_left))return this._paren_expression();if(this._match(is.keywords.bitcast)){this._consume(is.tokens.less_than,"Expected '<'.");const e=this._type_decl();this._consume(is.tokens.greater_than,"Expected '>'.");const t=this._paren_expression();return new Gi(e,t)}const e=this._type_decl(),t=this._argument_expression_list();return new Hi(e,t)}_argument_expression_list(){if(!this._match(is.tokens.paren_left))return null;const e=[];do{if(this._check(is.tokens.paren_right))break;const t=this._short_circuit_or_expression();e.push(t)}while(this._match(is.tokens.comma));return this._consume(is.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(is.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(is.tokens.paren_right),new $i([e])}_paren_expression(){this._consume(is.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(is.tokens.paren_right,"Expected ')'."),new $i([e])}_struct_decl(){if(!this._match(is.keywords.struct))return null;const e=this._consume(is.tokens.ident,"Expected name for struct.").toString();this._consume(is.tokens.brace_left,"Expected '{' for struct body.");const t=[];for(;!this._check(is.tokens.brace_right);){const e=this._attribute(),n=this._consume(is.tokens.ident,"Expected variable name.").toString();this._consume(is.tokens.colon,"Expected ':' for struct member type.");const r=this._attribute(),o=this._type_decl();null!=o&&(o.attributes=r),this._check(is.tokens.brace_right)?this._match(is.tokens.comma):this._consume(is.tokens.comma,"Expected ',' for struct member."),t.push(new ns(n,o,e))}this._consume(is.tokens.brace_right,"Expected '}' after struct body.");const n=new ji(e,t);return this._context.structs.set(e,n),n}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(is.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(is.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(is.keywords.const))return null;const e=this._consume(is.tokens.ident,"Expected variable name");let t=null;if(this._match(is.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}let n=null;if(this._match(is.tokens.equal)){const e=this._short_circuit_or_expression();if(e instanceof zi)n=e;else if(e instanceof qi&&e.initializer instanceof zi)n=e.initializer;else try{const t=e.evaluate(this._context);n=new Vi(t)}catch(yi){n=e}}const r=new pi(e.toString(),t,"","",n);return this._context.constants.set(r.name,r),r}_global_let_decl(){if(!this._match(is.keywords.let))return null;const e=this._consume(is.tokens.ident,"Expected variable name");let t=null;if(this._match(is.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}let n=null;return this._match(is.tokens.equal)&&(n=this._const_expression()),new hi(e.toString(),t,"","",n)}_const_expression(){if(this._match(is.const_literal))return new Di(this._previous().toString());const e=this._type_decl();this._consume(is.tokens.paren_left,"Expected '('.");let t=[];for(;!this._check(is.tokens.paren_right)&&(t.push(this._const_expression()),this._check(is.tokens.comma));)this._advance();return this._consume(is.tokens.paren_right,"Expected ')'."),new zi(e,t)}_variable_decl(){if(!this._match(is.keywords.var))return null;let e="",t="";this._match(is.tokens.less_than)&&(e=this._consume(is.storage_class,"Expected storage_class.").toString(),this._match(is.tokens.comma)&&(t=this._consume(is.access_mode,"Expected access_mode.").toString()),this._consume(is.tokens.greater_than,"Expected '>'."));const n=this._consume(is.tokens.ident,"Expected variable name");let r=null;if(this._match(is.tokens.colon)){const e=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=e)}return new fi(n.toString(),r,e,t,null)}_override_decl(){if(!this._match(is.keywords.override))return null;const e=this._consume(is.tokens.ident,"Expected variable name");let t=null;if(this._match(is.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}return new di(e.toString(),t,null)}_enable_directive(){const e=this._consume(is.tokens.ident,"identity expected.");return new Pi(e.toString())}_type_alias(){const e=this._consume(is.tokens.ident,"identity expected.");this._consume(is.tokens.equal,"Expected '=' for type alias.");let t=this._type_decl();if(null===t)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);const n=new Ai(e.toString(),t);return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([is.tokens.ident,...is.texel_format,is.keywords.bool,is.keywords.f32,is.keywords.i32,is.keywords.u32])){const e=this._advance(),t=e.toString();return this._context.structs.has(t)?this._context.structs.get(t):this._context.aliases.has(t)?this._context.aliases.get(t).type:new Ri(e.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(is.template_types)){let e=this._advance().toString(),t=null,n=null;return this._match(is.tokens.less_than)&&(t=this._type_decl(),n=null,this._match(is.tokens.comma)&&(n=this._consume(is.access_mode,"Expected access_mode for pointer").toString()),this._consume(is.tokens.greater_than,"Expected '>' for type.")),new Ii(e,t,n)}if(this._match(is.keywords.ptr)){let e=this._previous().toString();this._consume(is.tokens.less_than,"Expected '<' for pointer.");const t=this._consume(is.storage_class,"Expected storage_class for pointer");this._consume(is.tokens.comma,"Expected ',' for pointer.");const n=this._type_decl();let r=null;return this._match(is.tokens.comma)&&(r=this._consume(is.access_mode,"Expected access_mode for pointer").toString()),this._consume(is.tokens.greater_than,"Expected '>' for pointer."),new Li(e,t.toString(),n,r)}const t=this._attribute();if(this._match(is.keywords.array)){let e=null,n=-1;const r=this._previous();if(this._match(is.tokens.less_than)){e=this._type_decl(),this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);let t="";if(this._match(is.tokens.comma)){t=this._shift_expression().evaluate(this._context).toString()}this._consume(is.tokens.greater_than,"Expected '>' for array."),n=t?parseInt(t):0}return new Ni(r.toString(),t,e,n)}return null}_texture_sampler_types(){if(this._match(is.sampler_type))return new Fi(this._previous().toString(),null,null);if(this._match(is.depth_texture_type))return new Fi(this._previous().toString(),null,null);if(this._match(is.sampled_texture_type)||this._match(is.multisampled_texture_type)){const e=this._previous();this._consume(is.tokens.less_than,"Expected '<' for sampler type.");const t=this._type_decl();return this._consume(is.tokens.greater_than,"Expected '>' for sampler type."),new Fi(e.toString(),t,null)}if(this._match(is.storage_texture_type)){const e=this._previous();this._consume(is.tokens.less_than,"Expected '<' for sampler type.");const t=this._consume(is.texel_format,"Invalid texel format.").toString();this._consume(is.tokens.comma,"Expected ',' after texel format.");const n=this._consume(is.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(is.tokens.greater_than,"Expected '>' for sampler type."),new Fi(e.toString(),t,n)}return null}_attribute(){let e=[];for(;this._match(is.tokens.attr);){const t=this._consume(is.attribute_name,"Expected attribute name"),n=new rs(t.toString(),null);if(this._match(is.tokens.paren_left)){if(n.value=this._consume(is.literal_or_ident,"Expected attribute value").toString(),this._check(is.tokens.comma)){this._advance();do{const e=this._consume(is.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(e)}while(this._match(is.tokens.comma))}this._consume(is.tokens.paren_right,"Expected ')'")}e.push(n)}for(;this._match(is.tokens.attr_left);){if(!this._check(is.tokens.attr_right))do{const t=this._consume(is.attribute_name,"Expected attribute name"),n=new rs(t.toString(),null);if(this._match(is.tokens.paren_left)){if(n.value=[this._consume(is.literal_or_ident,"Expected attribute value").toString()],this._check(is.tokens.comma)){this._advance();do{const e=this._consume(is.literal_or_ident,"Expected attribute value").toString();n.value.push(e)}while(this._match(is.tokens.comma))}this._consume(is.tokens.paren_right,"Expected ')'")}e.push(n)}while(this._match(is.tokens.comma));this._consume(is.tokens.attr_right,"Expected ']]' after attribute declarations")}return 0==e.length?null:e}}class us{constructor(e,t){this.name=e,this.attributes=t,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class cs{constructor(e,t,n){this.name=e,this.type=t,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class fs extends us{constructor(e,t){super(e,t),this.members=[],this.align=0}get isStruct(){return!0}}class ds extends us{constructor(e,t){super(e,t),this.count=0,this.stride=0}get isArray(){return!0}}class hs extends us{constructor(e,t,n,r){super(e,n),this.format=t,this.access=r}get isTemplate(){return!0}}!function(e){e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"}(bi||(bi={}));class ps{constructor(e,t,n,r,o,i,s){this.name=e,this.type=t,this.group=n,this.binding=r,this.attributes=o,this.resourceType=i,this.access=s}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class gs{constructor(e,t){this.name=e,this.type=t}}class ms{constructor(e,t){this.align=e,this.size=t}}class ys{constructor(e,t,n,r){this.name=e,this.type=t,this.locationType=n,this.location=r,this.interpolation=null}}class vs{constructor(e,t,n,r){this.name=e,this.type=t,this.locationType=n,this.location=r}}class bs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.stage=null,this.inputs=[],this.outputs=[],this.name=e,this.stage=t}}class _s{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class ws{constructor(e,t,n,r){this.name=e,this.type=t,this.attributes=n,this.id=r}}class xs{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new _s,this._types=new Map,e&&this.update(e)}_isStorageTexture(e){return"texture_storage_1d"==e.name||"texture_storage_2d"==e.name||"texture_storage_2d_array"==e.name||"texture_storage_3d"==e.name}update(e){const t=(new ls).parse(e);for(const n of t)if(n instanceof ji){const e=this._getTypeInfo(n,null);e instanceof fs&&this.structs.push(e)}else if(n instanceof Ai)this.aliases.push(this._getAliasInfo(n));else if(n instanceof di){const e=n,t=this._getAttributeNum(e.attributes,"id",0),r=null!=e.type?this._getTypeInfo(e.type,e.attributes):null;this.overrides.push(new ws(e.name,r,e.attributes,t))}else if(this._isUniformVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),o=this._getTypeInfo(e.type,e.attributes),i=new ps(e.name,o,t,r,e.attributes,bi.Uniform,e.access);this.uniforms.push(i)}else if(this._isStorageVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),o=this._getTypeInfo(e.type,e.attributes),i=this._isStorageTexture(o),s=new ps(e.name,o,t,r,e.attributes,i?bi.StorageTexture:bi.Storage,e.access);this.storage.push(s)}else if(this._isTextureVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),o=this._getTypeInfo(e.type,e.attributes),i=this._isStorageTexture(o),s=new ps(e.name,o,t,r,e.attributes,i?bi.StorageTexture:bi.Texture,e.access);i?this.storage.push(s):this.textures.push(s)}else if(this._isSamplerVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),o=this._getTypeInfo(e.type,e.attributes),i=new ps(e.name,o,t,r,e.attributes,bi.Sampler,e.access);this.samplers.push(i)}else if(n instanceof si){const e=this._getAttribute(n,"vertex"),t=this._getAttribute(n,"fragment"),r=this._getAttribute(n,"compute"),o=e||t||r;if(o){const e=new bs(n.name,o.name);e.inputs=this._getInputs(n.args),e.outputs=this._getOutputs(n.returnType),this.entry[o.name].push(e)}}else;}getBindGroups(){const e=[];function t(t,n){t>=e.length&&(e.length=t+1),void 0===e[t]&&(e[t]=[]),n>=e[t].length&&(e[t].length=n+1)}for(const n of this.uniforms){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.storage){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.textures){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.samplers){t(n.group,n.binding);e[n.group][n.binding]=n}return e}_getOutputs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0===t&&(t=[]),e instanceof ji)this._getStructOutputs(e,t);else{const n=this._getOutputInfo(e);null!==n&&t.push(n)}return t}_getStructOutputs(e,t){for(const n of e.members)if(n.type instanceof ji)this._getStructOutputs(n.type,t);else{const e=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(null!==e){const r=this._getTypeInfo(n.type,n.type.attributes),o=this._parseInt(e.value),i=new vs(n.name,r,e.name,o);t.push(i)}}}_getOutputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getTypeInfo(e,e.attributes),r=this._parseInt(t.value);return new vs("",n,t.name,r)}return null}_getInputs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;void 0===t&&(t=[]);for(const n of e)if(n.type instanceof ji)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}return t}_getStructInputs(e,t){for(const n of e.members)if(n.type instanceof ji)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}}_getInputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getAttribute(e,"interpolation"),r=this._getTypeInfo(e.type,e.attributes),o=this._parseInt(t.value),i=new ys(e.name,r,t.name,o);return null!==n&&(i.interpolation=this._parseString(n.value)),i}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const t=parseInt(e);return isNaN(t)?e:t}_getAlias(e){for(const t of this.aliases)if(t.name==e)return t.type;return null}_getAliasInfo(e){return new gs(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,t){if(this._types.has(e))return this._types.get(e);if(e instanceof Ni){const n=e,r=this._getTypeInfo(n.format,n.attributes),o=new ds(n.name,t);return o.format=r,o.count=n.count,this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof ji){const n=e,r=new fs(n.name,t);for(const e of n.members){const t=this._getTypeInfo(e.type,e.attributes);r.members.push(new cs(e.name,t,e.attributes))}return this._types.set(e,r),this._updateTypeInfo(r),r}if(e instanceof Fi){const n=e,r=n.format instanceof Ri,o=n.format?r?this._getTypeInfo(n.format,null):new us(n.format,null):null,i=new hs(n.name,o,t,n.access);return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof Ii){const n=e,r=n.format?this._getTypeInfo(n.format,null):null,o=new hs(n.name,r,t,n.access);return this._types.set(e,o),this._updateTypeInfo(o),o}const n=new us(e.name,t);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var t,n;const r=this._getTypeSize(e);if(e.size=null!==(t=null===r||void 0===r?void 0:r.size)&&void 0!==t?t:0,e instanceof ds){const t=this._getTypeSize(e.format);e.stride=null!==(n=null===t||void 0===t?void 0:t.size)&&void 0!==n?n:0,this._updateTypeInfo(e.format)}e instanceof fs&&this._updateStructInfo(e)}_updateStructInfo(e){var t;let n=0,r=0,o=0,i=0;for(let s=0,a=e.members.length;s<a;++s){const a=e.members[s],l=this._getTypeSize(a);if(!l)continue;null!==(t=this._getAlias(a.type.name))&&void 0!==t||a.type;const u=l.align,c=l.size;n=this._roundUp(u,n+r),r=c,o=n,i=Math.max(i,u),a.offset=n,a.size=c,this._updateTypeInfo(a.type)}e.size=this._roundUp(i,o+r),e.align=i}_getTypeSize(e){var t;if(null===e||void 0===e)return null;const n=this._getAttributeNum(e.attributes,"size",0),r=this._getAttributeNum(e.attributes,"align",0);if(e instanceof cs&&(e=e.type),e instanceof us){const t=this._getAlias(e.name);null!==t&&(e=t)}{const t=xs._typeInfo[e.name];if(void 0!==t){const o="f16"===e.format?2:1;return new ms(Math.max(r,t.align/o),Math.max(n,t.size/o))}}{const t=xs._typeInfo[e.name.substring(0,e.name.length-1)];if(t){const o="h"===e.name[e.name.length-1]?2:1;return new ms(Math.max(r,t.align/o),Math.max(n,t.size/o))}}if(e instanceof ds){let o=e,i=8,s=8;const a=this._getTypeSize(o.format);null!==a&&(s=a.size,i=a.align);return s=o.count*this._getAttributeNum(null!==(t=null===e||void 0===e?void 0:e.attributes)&&void 0!==t?t:null,"stride",this._roundUp(i,s)),n&&(s=n),new ms(Math.max(r,i),Math.max(n,s))}if(e instanceof fs){let t=0,o=0,i=0,s=0,a=0;for(const n of e.members){const e=this._getTypeSize(n.type);null!==e&&(t=Math.max(e.align,t),i=this._roundUp(e.align,i+s),s=e.size,a=i)}return o=this._roundUp(t,a+s),new ms(Math.max(r,t),Math.max(n,o))}return null}_isUniformVar(e){return e instanceof fi&&"uniform"==e.storage}_isStorageVar(e){return e instanceof fi&&"storage"==e.storage}_isTextureVar(e){return e instanceof fi&&null!==e.type&&-1!=xs._textureTypes.indexOf(e.type.name)}_isSamplerVar(e){return e instanceof fi&&null!==e.type&&-1!=xs._samplerTypes.indexOf(e.type.name)}_getAttribute(e,t){const n=e;if(!n||!n.attributes)return null;const r=n.attributes;for(let o of r)if(o.name==t)return o;return null}_getAttributeNum(e,t,n){if(null===e)return n;for(let r of e)if(r.name==t){let e=null!==r&&null!==r.value?r.value:n;return e instanceof Array&&(e=e[0]),"number"===typeof e?e:"string"===typeof e?parseInt(e):n}return n}_roundUp(e,t){return Math.ceil(t/e)*e}}function ks(e){const t={attributes:[],bindings:[]};let n;try{n=function(e){try{return new xs(e)}catch(t){if(t instanceof Error)throw t;let e="WGSL parse error";throw"object"===typeof t&&null!==t&&void 0!==t&&t.message&&(e+=": ".concat(t.message," ")),"object"===typeof t&&null!==t&&void 0!==t&&t.token&&(e+=t.token.line||""),new Error(e,{cause:t})}}(e)}catch(i){return Wo.error(i.message)(),t}for(const s of n.uniforms){const e=[];for(const t of s.type.members)e.push({name:t.name,type:Es(t.type)});t.bindings.push({type:"uniform",name:s.name,location:s.binding,group:s.group,members:e})}const r=n.entry.vertex[0],o=(null===r||void 0===r?void 0:r.inputs.length)||0;for(let s=0;s<o;s++){const e=r.inputs[s];if("location"===e.locationType){const n=Es(e.type);t.attributes.push({name:e.name,location:e.location,type:n})}}return t}function Es(e){return e.format?"".concat(e.name,"<").concat(e.format.name,">"):e.name}function Ss(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}xs._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},xs._textureTypes=is.any_texture_type.map((e=>e.name)),xs._samplerTypes=is.sampler_type.map((e=>e.name));const Ts={number:{type:"number",validate:(e,t)=>Number.isFinite(e)&&"object"===typeof t&&(void 0===t.max||e<=t.max)&&(void 0===t.min||e>=t.min)},array:{type:"array",validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function Ps(e){let t=As(e);if("object"!==t)return{value:e,...Ts[t],type:t};if("object"===typeof e)return e?void 0!==e.type?{...e,...Ts[e.type],type:e.type}:void 0===e.value?{type:"object",value:e}:(t=As(e.value),{...e,...Ts[t],type:t}):{type:"object",value:null};throw new Error("props")}function As(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const Os={vertex:"#ifdef MODULE_LOGDEPTH\nlogdepth_adjustPosition(gl_Position);\n#endif\n",fragment:"#ifdef MODULE_MATERIAL\ngl_FragColor = material_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_LIGHTING\ngl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_FOG\ngl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_PICKING\ngl_FragColor = picking_filterHighlightColor(gl_FragColor);\ngl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n#ifdef MODULE_LOGDEPTH\nlogdepth_setFragDepth();\n#endif\n"},Cs=/void\s+main\s*\([^)]*\)\s*\{\n?/,Ms=/}\n?[^{}]*$/,Rs=[],js="__LUMA_INJECT_DECLARATIONS__";function Is(e){const t=e.slice(0,2);switch(t){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(t)}}function Ls(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o="vertex"===t;for(const i in n){const t=n[i];t.sort(((e,t)=>e.order-t.order)),Rs.length=t.length;for(let e=0,n=t.length;e<n;++e)Rs[e]=t[e].injection;const r="".concat(Rs.join("\n"),"\n");switch(i){case"vs:#decl":o&&(e=e.replace(js,r));break;case"vs:#main-start":o&&(e=e.replace(Cs,(e=>e+r)));break;case"vs:#main-end":o&&(e=e.replace(Ms,(e=>r+e)));break;case"fs:#decl":o||(e=e.replace(js,r));break;case"fs:#main-start":o||(e=e.replace(Cs,(e=>e+r)));break;case"fs:#main-end":o||(e=e.replace(Ms,(e=>r+e)));break;default:e=e.replace(i,(e=>e+r))}}return e=e.replace(js,""),r&&(e=e.replace(/\}\s*$/,(e=>e+Os[t]))),e}let Ns=1;class Fs{static instantiateModules(e){return e.map((e=>{if(e instanceof Fs)return e;Ss("string"!==typeof e,"Shader module use by name is deprecated. Import shader module '".concat(JSON.stringify(e),"' and use it directly.")),e.name||(console.warn("shader module has no name"),e.name="shader-module-".concat(Ns++));const t=new Fs(e);return t.dependencies=Fs.instantiateModules(e.dependencies||[]),t}))}constructor(e){or(this,"name",void 0),or(this,"vs",void 0),or(this,"fs",void 0),or(this,"getModuleUniforms",void 0),or(this,"dependencies",void 0),or(this,"deprecations",void 0),or(this,"defines",void 0),or(this,"injections",void 0),or(this,"uniforms",{}),or(this,"uniformTypes",{});const{name:t,vs:n,fs:r,dependencies:o=[],uniformTypes:i={},uniformPropTypes:s={},getUniforms:a,deprecations:l=[],defines:u={},inject:c={}}=e;Ss("string"===typeof t),this.name=t,this.vs=n,this.fs=r,this.getModuleUniforms=a,this.dependencies=Fs.instantiateModules(o),this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=function(e){const t={vertex:{},fragment:{}};for(const n in e){let r=e[n];"string"===typeof r&&(r={order:0,injection:r}),t[Is(n)][n]=r}return t}(c),this.uniformTypes=i,s&&(this.uniforms=function(e){const t={};for(const[n,r]of Object.entries(e))t[n]=Ps(r);return t}(s))}getModuleSource(e){let t;switch(e){case"vertex":t=this.vs||"";break;case"fragment":t=this.fs||"";break;default:Ss(!1)}const n=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return"// ----- MODULE ".concat(this.name," ---------------\n\n#define MODULE_").concat(n,"\n").concat(t,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):function(e,t,n){const r={};for(const[o,i]of Object.entries(t))e&&o in e&&!i.private?(i.validate&&Ss(i.validate(e[o],i),"".concat(n,": invalid ").concat(o)),r[o]=e[o]):r[o]=i.value;return r}(e,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach((n=>{var r;null!==(r=n.regex)&&void 0!==r&&r.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(e){return e.forEach((e=>{if("function"===e.type)e.regex=new RegExp("\\b".concat(e.old,"\\("));else e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))})),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},n=this.uniforms;for(const r in n){const o=n[r];r in e&&!o.private?(o.validate&&Ss(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=o.value}return t}}function Us(e){if(e.source&&"webgpu"===e.platformInfo.type){return{...e,vs:void 0,fs:void 0}}if(!e.vs)throw new Error("no vertex shader");const t=Ds(e.platformInfo,e.vs);let n;return e.fs&&(n=Ds(e.platformInfo,e.fs)),{...e,vs:t,fs:n}}function Ds(e,t){if("string"===typeof t)return t;if("webgpu"===e.type){if(null!==t&&void 0!==t&&t.wgsl)return t.wgsl;throw new Error("WebGPU does not support GLSL shaders")}if(null!==t&&void 0!==t&&t.glsl)return t.glsl;throw new Error("WebGL does not support WGSL shaders")}function zs(e){return Bs(Fs.instantiateModules(e))}function Bs(e){const t={},n={};return Ws({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(((e,t)=>n[t]-n[e])).map((e=>t[e]))}function Ws(e){const{modules:t,level:n,moduleMap:r,moduleDepth:o}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const i of t)r[i.name]=i,(void 0===o[i.name]||o[i.name]<n)&&(o[i.name]=n);for(const i of t)i.dependencies&&Ws({modules:i.dependencies,level:n+1,moduleMap:r,moduleDepth:o})}const qs=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Vs=[...qs,[$s("attribute"),"in $1"],[$s("varying"),"out $1"]],Gs=[...qs,[$s("varying"),"in $1"]];function Hs(e,t){for(const[n,r]of t)e=e.replace(n,r);return e}function $s(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}function Ks(e,t){let n="";for(const r in e){const o=e[r];if(n+="void ".concat(o.signature," {\n"),o.header&&(n+="  ".concat(o.header)),t[r]){const e=t[r];e.sort(((e,t)=>e.order-t.order));for(const t of e)n+="  ".concat(t.injection,"\n")}o.footer&&(n+="  ".concat(o.footer)),n+="}\n"}return n}function Ys(e){const t={vertex:{},fragment:{}};for(const n of e){let e,r;"string"!==typeof n?(e=n,r=e.hook):(e={},r=n),r=r.trim();const[o,i]=r.split(":"),s=r.replace(/\(.+/,""),a=Object.assign(e,{signature:i});switch(o){case"vs":t.vertex[s]=a;break;case"fs":t.fragment[s]=a;break;default:throw new Error(o)}}return t}function Qs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(e);return n?n[1]:t}function Zs(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}if(100!==t&&300!==t)throw new Error("Invalid GLSL version ".concat(t));return t}const Js="\n\n".concat(js,"\n"),Xs="precision highp float;\n";function ea(e,t){const{source:n,stage:r,modules:o,hookFunctions:i=[],inject:s={},log:a}=t;Ss("string"===typeof n,"shader source must be a string");const l=n;let u="";const c=Ys(i),f={},d={},h={};for(const g in s){const e="string"===typeof s[g]?{injection:s[g],order:0}:s[g],t=/^(v|f)s:(#)?([\w-]+)$/.exec(g);if(t){const n=t[2],r=t[3];n?"decl"===r?d[g]=[e]:h[g]=[e]:f[g]=[e]}else h[g]=[e]}const p="webgpu"!==e.type?o:[];for(const g of p){a&&g.checkDeprecations(l,a);u+=g.getModuleSource(r,"wgsl");const e=g.injections[r];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const r="decl"===n[2]?d:h;r[t]=r[t]||[],r[t].push(e[t])}else f[t]=f[t]||[],f[t].push(e[t])}}return u+=Js,u=Ls(u,r,d),u+=Ks(c[r],f),u+=l,u=Ls(u,r,h),u}function ta(e,t){const{id:n,source:r,stage:o,language:i="glsl",modules:s,defines:a={},hookFunctions:l=[],inject:u={},prologue:c=!0,log:f}=t;Ss("string"===typeof r,"shader source must be a string");const d="glsl"===i?function(e,t){return{name:Qs(e,t),language:"glsl",version:Zs(e)}}(r).version:-1,h=e.shaderLanguageVersion,p=100===d?"#version 100":"#version 300 es",g=r.split("\n").slice(1).join("\n"),m={};s.forEach((e=>{Object.assign(m,e.getDefines())})),Object.assign(m,a);let y="";switch(i){case"wgsl":break;case"glsl":y=c?"".concat(p,"\n\n// ----- PROLOGUE -------------------------\n").concat(function(e){const{id:t,source:n,stage:r}=e,o=t&&-1===n.indexOf("SHADER_NAME");return o?"\n#define SHADER_NAME ".concat(t,"_").concat(r,"\n\n"):""}({id:n,source:r,stage:o}),"\n","#define SHADER_TYPE_".concat(o.toUpperCase()),"\n").concat(function(e){switch(null===e||void 0===e?void 0:e.gpu.toLowerCase()){case"apple":return"#define APPLE_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"nvidia":return"#define NVIDIA_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat("fragment"===o?Xs:"","\n\n// ----- APPLICATION DEFINES -------------------------\n\n").concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(const n in e){const r=e[n];(r||Number.isFinite(r))&&(t+="#define ".concat(n.toUpperCase()," ").concat(e[n],"\n"))}return t}(m),"\n\n"):"".concat(p,"\n")}const v=Ys(l),b={},_={},w={};for(const x in u){const e="string"===typeof u[x]?{injection:u[x],order:0}:u[x],t=/^(v|f)s:(#)?([\w-]+)$/.exec(x);if(t){const n=t[2],r=t[3];n?"decl"===r?_[x]=[e]:w[x]=[e]:b[x]=[e]}else w[x]=[e]}for(const x of s){f&&x.checkDeprecations(g,f);y+=x.getModuleSource(o);const e=x.injections[o];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const r="decl"===n[2]?_:w;r[t]=r[t]||[],r[t].push(e[t])}else b[t]=b[t]||[],b[t].push(e[t])}}return y+="// ----- MAIN SHADER SOURCE -------------------------",y+=Js,y=Ls(y,o,_),y+=Ks(v[o],b),y+=g,y=Ls(y,o,w),"glsl"===i&&d!==h&&(y=function(e,t){var n;if(300!==Number((null===(n=e.match(/^#version[ \t]+(\d+)/m))||void 0===n?void 0:n[1])||100))throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(t){case"vertex":return Hs(e,Vs);case"fragment":return Hs(e,Gs);default:throw new Error(t)}}(y,o)),y.trim()}function na(e){return function(t){const n={};for(const r of e){const e=r.getUniforms(t,n);Object.assign(n,e)}return n}}class ra{constructor(){or(this,"_hookFunctions",[]),or(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return ra.defaultShaderAssembler=ra.defaultShaderAssembler||new ra,ra.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find((t=>t.name===("string"===typeof e?e:e.name)))||this._defaultModules.push(e)}removeDefaultModule(e){const t="string"===typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((e=>e.name!==t))}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e)}assembleShader(e){const t=this._getModuleList(e.modules),n=this._hookFunctions,r=Us(e),o=function(e){const t=zs(e.modules||[]);return{source:ea(e.platformInfo,{...e,source:e.source,stage:"vertex",modules:t}),getUniforms:na(t)}}({platformInfo:e.platformInfo,...r,modules:t,hookFunctions:n});return{...o,modules:t}}assembleShaderPair(e){const t=Us(e),n=this._getModuleList(e.modules),r=this._hookFunctions,{platformInfo:o}=e,i="wgsl"===e.platformInfo.shaderLanguage?function(e){const t=zs(e.modules||[]);return{vs:ea(e.platformInfo,{...e,source:e.vs,stage:"vertex",modules:t}),fs:ea(e.platformInfo,{...e,source:e.fs,stage:"fragment",modules:t}),getUniforms:na(t)}}({platformInfo:o,...t,modules:n,hookFunctions:r}):function(e){const{vs:t,fs:n}=e,r=zs(e.modules||[]);return{vs:ta(e.platformInfo,{...e,source:t,stage:"vertex",modules:r}),fs:ta(e.platformInfo,{...e,source:n,stage:"fragment",modules:r}),getUniforms:na(r)}}({platformInfo:o,...t,modules:n,hookFunctions:r});return{...i,modules:n}}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),n={};let r=0;for(let o=0,i=this._defaultModules.length;o<i;++o){const e=this._defaultModules[o],i=e.name;t[r++]=e,n[i]=!0}for(let o=0,i=e.length;o<i;++o){const i=e[o],s=i.name;n[s]||(t[r++]=i,n[s]=!0)}return t.length=r,Fs.instantiateModules(t)}}or(ra,"defaultShaderAssembler",void 0);class oa{constructor(e){or(this,"id",void 0),or(this,"userData",{}),or(this,"topology",void 0),or(this,"bufferLayout",[]),or(this,"vertexCount",void 0),or(this,"indices",void 0),or(this,"attributes",void 0),this.id=e.id||sr("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&Oo(this.indices.usage===ur.INDEX)}destroy(){var e;null===(e=this.indices)||void 0===e||e.destroy();for(const t of Object.values(this.attributes))t.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(e){return e.byteLength/12}}function ia(e,t){if(t instanceof oa)return t;const n=function(e,t){if(!t.indices)return;const n=t.indices.value;return e.createBuffer({usage:ur.INDEX,data:n})}(e,t),{attributes:r,bufferLayout:o}=function(e,t){const n=[],r={};for(const[i,s]of Object.entries(t.attributes)){let t=i;switch(i){case"POSITION":t="positions";break;case"NORMAL":t="normals";break;case"TEXCOORD_0":t="texCoords";break;case"COLOR_0":t="colors"}r[t]=e.createBuffer({data:s.value,id:"".concat(i,"-buffer")});const{value:o,size:a,normalized:l}=s;n.push({name:t,format:Lr(o,a,l)})}const o=t._calculateVertexCount(t.attributes,t.indices);return{attributes:r,bufferLayout:n,vertexCount:o}}(e,t);return new oa({topology:t.topology||"triangle-list",bufferLayout:o,vertexCount:t.vertexCount,indices:n,attributes:r})}class sa{constructor(e){or(this,"modules",void 0),or(this,"moduleUniforms",void 0),or(this,"moduleBindings",void 0),or(this,"moduleUniformsChanged",void 0);const t=zs(Object.values(e).filter((e=>e.dependencies)));for(const n of t)e[n.name]=n;Wo.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[n,r]of Object.entries(e)){const e=n;this.moduleUniforms[e]=r.defaultUniforms||{},this.moduleBindings[e]={}}}destroy(){}setProps(e){for(const n of Object.keys(e)){var t;const r=n,o=e[r],i=this.modules[r];if(!i){Wo.warn("Module ".concat(n," not found"))();continue}const s=this.moduleUniforms[r],a=this.moduleBindings[r],l=(null===(t=i.getUniforms)||void 0===t?void 0:t.call(i,o,this.moduleUniforms[r]))||o,{uniforms:u,bindings:c}=$o(l);this.moduleUniforms[r]={...s,...u},this.moduleBindings[r]={...a,...c}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const e={};for(const t of Object.values(this.moduleBindings))Object.assign(e,t);return e}getDebugTable(){const e={};for(const[n,r]of Object.entries(this.moduleUniforms))for(const[o,i]of Object.entries(r)){var t;e["".concat(n,".").concat(o)]={type:null===(t=this.modules[n].uniformTypes)||void 0===t?void 0:t[o],value:String(i)}}return e}}class aa extends lr{get[Symbol.toStringTag](){return"ComputePipeline"}constructor(e,t){super(e,t,aa.defaultProps),or(this,"hash","")}}or(aa,"defaultProps",{...lr.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});class la{static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new la(e),e._lumaData.defaultPipelineFactory}constructor(e){or(this,"device",void 0),or(this,"_hashCounter",0),or(this,"_hashes",{}),or(this,"_renderPipelineCache",{}),or(this,"_computePipelineCache",{}),this.device=e}createRenderPipeline(e){const t={...Go.defaultProps,...e},n=this._hashRenderPipeline(t);if(!this._renderPipelineCache[n]){const e=this.device.createRenderPipeline({...t,id:t.id?"".concat(t.id,"-cached"):void 0});e.hash=n,this._renderPipelineCache[n]={pipeline:e,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){const t={...aa.defaultProps,...e},n=this._hashComputePipeline(t);if(!this._computePipelineCache[n]){const e=this.device.createComputePipeline({...t,id:t.id?"".concat(t.id,"-cached"):void 0});e.hash=n,this._computePipelineCache[n]={pipeline:e,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){const t=e.hash,n=e instanceof aa?this._computePipelineCache:this._renderPipelineCache;n[t].useCount--,0===n[t].useCount&&(n[t].pipeline.destroy(),delete n[t])}_hashComputePipeline(e){const t=this._getHash(e.shader.source);return"".concat(t)}_hashRenderPipeline(e){const t=this._getHash(e.vs.source),n=e.fs?this._getHash(e.fs.source):0,r=this._getHash(JSON.stringify(e.bufferLayout));if("webgl"===this.device.type)return"".concat(t,"/").concat(n,"V").concat("-","BL").concat(r);{const o=this._getHash(JSON.stringify(e.parameters));return"".concat(t,"/").concat(n,"V").concat("-","T").concat(e.topology,"P").concat(o,"BL").concat(r)}}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}}function ua(e,t,n,r){if(null!==r&&void 0!==r&&r.inlineSource){const r=function(e,t,n){let r="";for(let o=t-2;o<=t;o++){const i=e[o-1];void 0!==i&&(r+=ca(i,t,n))}return r}(t,n),o=e.linePos>0?"".concat(" ".repeat(e.linePos+5),"^^^\n"):"";return"\n".concat(r).concat(o).concat(e.type.toUpperCase(),": ").concat(e.message,"\n\n")}return null!==r&&void 0!==r&&r.html?"<div class='luma-compiler-log-error' style=\"color:red;\"><b> ".concat(e.type.toUpperCase(),": ").concat(e.message,"</b></div>"):"".concat(e.type.toUpperCase(),": ").concat(e.message)}function ca(e,t,n){const r=null!==n&&void 0!==n&&n.html?e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):e;return"".concat(function(e,t){let n="";for(let r=e.length;r<t;++r)n+=" ";return n+e}(String(t),4),": ").concat(r).concat(null!==n&&void 0!==n&&n.html?"<br/>":"\n")}function fa(e,t){return{name:da(e,t),language:"glsl",version:ha(e)}}function da(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return n?n[1]:t}function ha(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}return t}or(la,"defaultProps",{...Go.defaultProps});class pa extends lr{get[Symbol.toStringTag](){return"Shader"}constructor(e,t){super(e,{id:ga(t),...t},pa.defaultProps),or(this,"stage",void 0),or(this,"source",void 0),or(this,"compilationStatus","pending"),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.debug){case"never":return;case"errors":if("success"===this.compilationStatus)return}const e=await this.getCompilationInfo();"warnings"===this.props.debug&&0===(null===e||void 0===e?void 0:e.length)||this._displayShaderLog(e)}_displayShaderLog(e){var t,n;if("undefined"===typeof document||null===(t=document)||void 0===t||!t.createElement)return;const r=fa(this.source).name,o="".concat(this.stage," ").concat(r);let i=function(e,t,n){let r="";const o=t.split(/\r?\n/),i=e.slice().sort(((e,t)=>e.lineNum-t.lineNum));switch((null===n||void 0===n?void 0:n.showSourceCode)||"no"){case"all":let t=0;for(let e=1;e<=o.length;e++)for(r+=ca(o[e-1],e,n);i.length>t&&i[t].lineNum===e;){const e=i[t++];r+=ua(e,o,e.lineNum,{...n,inlineSource:!1})}return r;case"issues":case"no":for(const i of e)r+=ua(i,o,i.lineNum,{inlineSource:"no"!==(null===n||void 0===n?void 0:n.showSourceCode)});return r}}(e,this.source,{showSourceCode:"all",html:!0});const s=this.getTranslatedSource();s&&(i+='<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>'.concat(s,"</pre></code>"));const a=document.createElement("Button");a.innerHTML="\n<h1>Shader Compilation Error in ".concat(o,'</h1><br /><br />\n<code style="user-select:text;"><pre>\n').concat(i,"\n</pre></code>"),a.style.top="10px",a.style.left="10px",a.style.position="absolute",a.style.zIndex="9999",a.style.width="100%",a.style.textAlign="left",document.body.appendChild(a);const l=document.getElementsByClassName("luma-compiler-log-error");null!==(n=l[0])&&void 0!==n&&n.scrollIntoView&&l[0].scrollIntoView(),a.onclick=()=>{const e="data:text/plain,".concat(encodeURIComponent(this.source));navigator.clipboard.writeText(e)}}}function ga(e){return fa(e.source).name||e.id||sr("unnamed ".concat(e.stage,"-shader"))}or(pa,"defaultProps",{...lr.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"});class ma{static getDefaultShaderFactory(e){var t;return(t=e._lumaData).defaultShaderFactory||(t.defaultShaderFactory=new ma(e)),e._lumaData.defaultShaderFactory}constructor(e){or(this,"device",void 0),or(this,"_cache",{}),this.device=e}createShader(e){const t=this._hashShader(e);let n=this._cache[t];if(!n){const r=this.device.createShader({...e,id:e.id?"".concat(e.id,"-cached"):void 0});this._cache[t]=n={shader:r,useCount:0}}return n.useCount++,n.shader}release(e){const t=this._hashShader(e),n=this._cache[t];n&&(n.useCount--,0===n.useCount&&(delete this._cache[t],n.shader.destroy()))}_hashShader(e){return"".concat(e.stage,":").concat(e.source)}}or(ma,"defaultProps",{...pa.defaultProps});let ya=null,va=null;class ba{constructor(e,t){var n,r,o;or(this,"device",void 0),or(this,"id",void 0),or(this,"source",void 0),or(this,"vs",void 0),or(this,"fs",void 0),or(this,"pipelineFactory",void 0),or(this,"shaderFactory",void 0),or(this,"userData",{}),or(this,"parameters",void 0),or(this,"topology",void 0),or(this,"bufferLayout",void 0),or(this,"isInstanced",void 0),or(this,"instanceCount",0),or(this,"vertexCount",void 0),or(this,"indexBuffer",null),or(this,"bufferAttributes",{}),or(this,"constantAttributes",{}),or(this,"bindings",{}),or(this,"uniforms",{}),or(this,"vertexArray",void 0),or(this,"transformFeedback",null),or(this,"pipeline",void 0),or(this,"shaderInputs",void 0),or(this,"_uniformStore",void 0),or(this,"_attributeInfos",{}),or(this,"_gpuGeometry",null),or(this,"_getModuleUniforms",void 0),or(this,"props",void 0),or(this,"_pipelineNeedsUpdate","newly created"),or(this,"_needsRedraw","initializing"),or(this,"_destroyed",!1),or(this,"_lastDrawTimestamp",-1),or(this,"_lastLogTime",0),or(this,"_logOpen",!1),or(this,"_drawCount",0),this.props={...ba.defaultProps,...t},t=this.props,this.id=t.id||sr("model"),this.device=e,Object.assign(this.userData,t.userData);const i=Object.fromEntries((null===(n=this.props.modules)||void 0===n?void 0:n.map((e=>[e.name,e])))||[]);this.setShaderInputs(t.shaderInputs||new sa(i));const s=function(e){return{type:e.type,shaderLanguage:e.info.shadingLanguage,shaderLanguageVersion:e.info.shadingLanguageVersion,gpu:e.info.gpu,features:e.features}}(e),a=((null===(r=this.props.modules)||void 0===r?void 0:r.length)>0?this.props.modules:null===(o=this.shaderInputs)||void 0===o?void 0:o.getModules())||[];if("webgpu"===this.device.type&&this.props.source){var l;(l=this.props).shaderLayout||(l.shaderLayout=ks(this.props.source));const{source:e,getUniforms:t}=this.props.shaderAssembler.assembleShader({platformInfo:s,...this.props,modules:a});this.source=e,this._getModuleUniforms=t}else{const{vs:e,fs:t,getUniforms:n}=this.props.shaderAssembler.assembleShaderPair({platformInfo:s,...this.props,modules:a});this.vs=e,this.fs=t,this._getModuleUniforms=n}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,t.geometry&&this.setGeometry(t.geometry),this.pipelineFactory=t.pipelineFactory||la.getDefaultPipelineFactory(this.device),this.shaderFactory=t.shaderFactory||ma.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in t&&(this.isInstanced=t.isInstanced),t.instanceCount&&this.setInstanceCount(t.instanceCount),t.vertexCount&&this.setVertexCount(t.vertexCount),t.indexBuffer&&this.setIndexBuffer(t.indexBuffer),t.attributes&&this.setAttributes(t.attributes),t.constantAttributes&&this.setConstantAttributes(t.constantAttributes),t.bindings&&this.setBindings(t.bindings),t.uniforms&&this.setUniforms(t.uniforms),t.moduleSettings&&this.updateModuleSettings(t.moduleSettings),t.transformFeedback&&(this.transformFeedback=t.transformFeedback),Object.seal(this)}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),null===(e=this._gpuGeometry)||void 0===e||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){let t;this.predraw();try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),ar(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:n}=this.vertexArray,r=n?n.byteLength/("uint32"===n.indexType?4:2):void 0;t=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:r,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(e),t?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",t}setGeometry(e){var t;null===(t=this._gpuGeometry)||void 0===t||t.destroy();const n=e&&ia(this.device,e);n&&(this.setTopology(n.topology||"triangle-list"),this.bufferLayout=_a(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)),this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){this.bufferLayout=this._gpuGeometry?_a(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){Ho(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,void 0===this.isInstanced&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new Vo(this.shaderInputs.modules);for(const t of Object.keys(this.shaderInputs.modules)){const e=this._uniformStore.getManagedUniformBuffer(this.device,t);this.bindings["".concat(t,"Uniforms")]=e}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindings()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,t){e.indices&&Wo.warn("Model:".concat(this.id," setAttributes() - indexBuffer should be set using setIndexBuffer()"))();for(const[r,o]of Object.entries(e)){var n;const e=this.bufferLayout.find((e=>wa(e).includes(r)));if(!e){Wo.warn("Model(".concat(this.id,'): Missing layout for buffer "').concat(r,'".'))();continue}const i=wa(e);let s=!1;for(const t of i){const e=this._attributeInfos[t];e&&(this.vertexArray.setBuffer(e.location,o),s=!0)}s||(null!==(n=null===t||void 0===t?void 0:t.disableWarnings)&&void 0!==n?n:this.props.disableWarnings)||Wo.warn("Model(".concat(this.id,'): Ignoring buffer "').concat(o.id,'" for unknown attribute "').concat(r,'"'))()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,t){for(const[r,o]of Object.entries(e)){var n;const e=this._attributeInfos[r];e?this.vertexArray.setConstantWebGL(e.location,o):(null!==(n=null===t||void 0===t?void 0:t.disableWarnings)&&void 0!==n?n:this.props.disableWarnings)||Wo.warn('Model "'.concat(this.id,': Ignoring constant supplied for unknown attribute "').concat(r,'"'))()}this.setNeedsRedraw("constants")}setUniforms(e){ar(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettings(e){const{bindings:t,uniforms:n}=$o(this._getModuleUniforms(e));Object.assign(this.bindings,t),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let e=0;for(const t of Object.values(this.bindings))t instanceof Ro?e=Math.max(e,t.texture.updateTimestamp):t instanceof ur||t instanceof jo?e=Math.max(e,t.updateTimestamp):t instanceof Io||(e=Math.max(e,t.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const t={...e.attributes};for(const[n]of Object.entries(t))this.pipeline.shaderLayout.attributes.find((e=>e.name===n))||"positions"===n||delete t[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(t,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,t=null;this.pipeline&&(Wo.log(1,"Model ".concat(this.id,': Recreating pipeline because "').concat(this._pipelineNeedsUpdate,'".'))(),e=this.pipeline.vs,t=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:"".concat(this.id,"-vertex"),stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let r=null;this.source?r=n:this.fs&&(r=this.shaderFactory.createShader({id:"".concat(this.id,"-fragment"),stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:n,fs:r}),this._attributeInfos=ei(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),t&&this.shaderFactory.release(t)}return this.pipeline}_logDrawCallStart(){const e=Wo.level>3?0:1e4;Wo.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,Wo.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Wo.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=function(e,t){var n;const r={},o="Values";if(0===e.attributes.length&&(null===(n=e.varyings)||void 0===n||!n.length))return{"No attributes or varyings":{[o]:"N/A"}};for(const i of e.attributes)if(i){const e="".concat(i.location," ").concat(i.name,": ").concat(i.type);r["in ".concat(e)]={[o]:i.stepMode||"vertex"}}for(const i of e.varyings||[]){const e="".concat(i.location," ").concat(i.name);r["out ".concat(e)]={[o]:JSON.stringify(i.accessor)}}return r}(this.pipeline.shaderLayout,this.id);Wo.table(2,e)();const t=this.shaderInputs.getDebugTable();for(const[r,o]of Object.entries(this.uniforms))t[r]={value:o};Wo.table(2,t)();const n=this._getAttributeDebugTable();Wo.table(2,this._attributeInfos)(),Wo.table(2,n)(),Wo.groupEnd(2)(),this._logOpen=!1}}_logFramebuffer(e){const t=Wo.get("framebuffer");if(this._drawCount++,!t||this._drawCount++>3&&this._drawCount%60)return;const n=e.props.framebuffer;n&&function(e,t){let{id:n,minimap:r,opaque:o,top:i="0",left:s="0",rgbaScale:a=1}=t;ya||(ya=document.createElement("canvas"),ya.id=n,ya.title=n,ya.style.zIndex="100",ya.style.position="absolute",ya.style.top=i,ya.style.left=s,ya.style.border="blue 1px solid",ya.style.transform="scaleY(-1)",document.body.appendChild(ya),va=ya.getContext("2d")),ya.width===e.width&&ya.height===e.height||(ya.width=e.width/2,ya.height=e.height/2,ya.style.width="400px",ya.style.height="400px");const l=e.device.readPixelsToArrayWebGL(e),u=va.createImageData(e.width,e.height);for(let c=0;c<l.length;c+=4)u.data[0+c+0]=l[c+0]*a,u.data[0+c+1]=l[c+1]*a,u.data[0+c+2]=l[c+2]*a,u.data[0+c+3]=o?255:l[c+3]*a;va.putImageData(u,0,0)}(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[t,n]of Object.entries(this._attributeInfos))e[n.location]={name:t,type:n.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[n.location],n.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:t}=this.vertexArray,n="uint32"===t.indexType?new Uint32Array(t.debugData):new Uint16Array(t.debugData);e.indices={name:"indices",type:t.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,t){const n=Ir(t);return(e instanceof ur?new n(e.debugData):e).toString()}}function _a(e,t){const n=[...e];for(const r of t){const e=n.findIndex((e=>e.name===r.name));e<0?n.push(r):n[e]=r}return n}function wa(e){var t;return e.attributes?null===(t=e.attributes)||void 0===t?void 0:t.map((e=>e.attribute)):[e.name]}or(ba,"defaultProps",{...Go.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:ra.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});class xa{static isSupported(e){var t;return"webgl"===(null===e||void 0===e||null===(t=e.info)||void 0===t?void 0:t.type)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ba.defaultProps;or(this,"device",void 0),or(this,"model",void 0),or(this,"transformFeedback",void 0),Oo(xa.isSupported(e),"BufferTransform not yet implemented on WebGPU"),this.device=e,this.model=new ba(this.device,{id:t.id||"buffer-transform-model",fs:t.fs||Mo(),topology:t.topology||"point-list",...t}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:t.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){const t=this.device.beginRenderPass(e);this.model.draw(t),t.end()}update(){console.warn("TextureTransform#update() not implemented")}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const t=this.getBuffer(e);if(t instanceof ur)return t.readAsync();const{buffer:n,byteOffset:r=0,byteLength:o=n.byteLength}=t;return n.readAsync(r,o)}}function ka(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.fround(e),o=e-r;return t[n]=r,t[n+1]=o,t}function Ea(e){return e-Math.fround(e)}function Sa(e){const t=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const o=4*n+r;ka(e[4*r+n],t,2*o)}return t}const Ta={ONE:1};const Pa={name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\nconst float SPLIT = 4097.0;\nfloat t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat a_hi = t * ONE - (t - a);\nfloat a_lo = a * ONE - a_hi;\n#else\nfloat a_hi = t - (t - a);\nfloat a_lo = a - a_hi;\n#endif\nreturn vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\nvec2 b = split(a.x);\nb.y += a.y;\nreturn b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat sum = (a + b) * ONE;\nfloat err = b - (sum - a) * ONE;\n#else\nfloat sum = a + b;\nfloat err = b - (sum - a);\n#endif\nreturn vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\nfloat s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) + (b - v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSub(float a, float b) {\nfloat s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) - (b + v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSqr(float a) {\nfloat prod = a * a;\nvec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\na_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\nfloat err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\nreturn vec2(prod, err);\n}\nvec2 twoProd(float a, float b) {\nfloat prod = a * b;\nvec2 a_fp64 = split(a);\nvec2 b_fp64 = split(b);\nfloat err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\na_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\nreturn vec2(prod, err);\n}\nvec2 sum_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSum(a.x, b.x);\nt = twoSum(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 sub_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSub(a.x, b.x);\nt = twoSub(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 mul_fp64(vec2 a, vec2 b) {\nvec2 prod = twoProd(a.x, b.x);\nprod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nprod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nreturn prod;\n}\nvec2 div_fp64(vec2 a, vec2 b) {\nfloat xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nvec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\nvec2 yn = a * xn;\n#endif\nfloat diff = (sub_fp64(a, mul_fp64(b, yn))).x;\nvec2 prod = twoProd(xn, diff);\nreturn sum_fp64(yn, prod);\n}\nvec2 sqrt_fp64(vec2 a) {\nif (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\nif (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\nfloat x = 1.0 / sqrt(a.x);\nfloat yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nvec2 yn_sqr = twoSqr(yn) * ONE;\n#else\nvec2 yn_sqr = twoSqr(yn);\n#endif\nfloat diff = sub_fp64(a, yn_sqr).x;\nvec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nreturn sum_fp64(split(yn), prod);\n#else\nreturn sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",getUniforms:function(){return Ta},fp64ify:ka,fp64LowPart:Ea,fp64ifyMatrix4:Sa};function Aa(e){const{source:t,target:n,start:r=0,size:o,getData:i}=e,s=e.end||n.length,a=t.length,l=s-r;if(a>l)return void n.set(t.subarray(0,l),r);if(n.set(t,r),!i)return;let u=a;for(;u<l;){const e=i(u,t);for(let t=0;t<o;t++)n[r+u]=e[t]||0,u++}}function Oa(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function Ca(e){switch(e){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function Ma(e){e.push(e.shift())}function Ra(e){let{device:t,source:n,target:r}=e;var o;(!r||r.byteLength<n.byteLength)&&(null===(o=r)||void 0===o||o.destroy(),r=t.createBuffer({byteLength:n.byteLength,usage:n.usage}));return r}function ja(e){let{device:t,buffer:n,attribute:r,fromLength:o,toLength:i,fromStartIndices:s,getData:a=(e=>e)}=e;const l=r.doublePrecision&&r.value instanceof Float64Array?2:1,u=r.size*l,c=r.byteOffset,f=r.settings.bytesPerElement<4?c/r.settings.bytesPerElement*4:c,d=r.startIndices,h=s&&d,p=r.isConstant;if(!h&&n&&o>=i)return n;const g=r.value instanceof Float64Array?Float32Array:r.value.constructor,m=p?r.value:new g(r.getBuffer().readSyncWebGL(c,i*g.BYTES_PER_ELEMENT).buffer);if(r.settings.normalized&&!p){const e=a;a=(t,n)=>r.normalizeConstant(e(t,n))}const y=p?(e,t)=>a(m,t):(e,t)=>a(m.subarray(e+c,e+c+u),t),v=n?new Float32Array(n.readSyncWebGL(f,4*o).buffer):new Float32Array(0),b=new Float32Array(i);var _;(function(e){let{source:t,target:n,size:r,getData:o,sourceStartIndices:i,targetStartIndices:s}=e;if(!i||!s)return Aa({source:t,target:n,size:r,getData:o}),n;let a=0,l=0;const u=o&&((e,t)=>o(e+l,t)),c=Math.min(i.length,s.length);for(let f=1;f<c;f++){const e=i[f]*r,o=s[f]*r;Aa({source:t.subarray(a,e),target:n,start:l,end:o,size:r,getData:u}),a=e,l=o}l<n.length&&Aa({source:[],target:n,start:l,size:r,getData:u})}({source:v,target:b,sourceStartIndices:s,targetStartIndices:d,size:u,getData:y}),!n||n.byteLength<b.byteLength+f)&&(null===(_=n)||void 0===_||_.destroy(),n=t.createBuffer({byteLength:b.byteLength+f,usage:35050}));return n.write(b,f),n}class Ia{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var t,n;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(n=this.settings).onStart)||void 0===t||t.call(n,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}class La{constructor(e){let{device:t,attribute:n,timeline:r}=e;this.buffers=[],this.currentLength=0,this.device=t,this.transition=new Ia(r),this.attribute=n,this.attributeInTransition=function(e){const{device:t,settings:n,value:r}=e,o=new Eo(t,n);return o.setData({value:r instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),o}(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=function(e,t){const{doublePrecision:n,settings:r,value:o,size:i}=e,s=n&&o instanceof Float64Array?2:1;let a=0;const{shaderAttributes:l}=e.settings;if(l)for(const c of Object.values(l)){var u;a=Math.max(a,null!==(u=c.vertexOffset)&&void 0!==u?u:0)}return(r.noAlloc?o.length:(t+a)*i)*s}(this.attribute,t),this.transition.start({...e,duration:n})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}const Na="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",Fa="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aFrom64Low;\nin ATTRIBUTE_TYPE aTo;\nin ATTRIBUTE_TYPE aTo64Low;\nout ATTRIBUTE_TYPE vCurrent;\nout ATTRIBUTE_TYPE vCurrent64Low;\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid main(void) {\n  for (int i=0; i<ATTRIBUTE_SIZE; i++) {\n    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);\n    vCurrent[i] = value.x;\n    vCurrent64Low[i] = value.y;\n  }\n  gl_Position = vec4(0.0);\n}\n";function Ua(e){return e.doublePrecision&&e.value instanceof Float64Array}const Da="#version 300 es\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nin ATTRIBUTE_TYPE aPrev;\nin ATTRIBUTE_TYPE aCur;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vNext;\nout float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",za="#version 300 es\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nin float vIsTransitioningFlag;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  fragColor = vec4(1.0);\n}";const Ba={interpolation:class extends La{constructor(e){let{device:t,attribute:n,timeline:r}=e;super({device:t,attribute:n,timeline:r}),this.type="interpolation",this.transform=function(e,t){const n=t.size,r=Oa(n),o=Ca(n),i=t.getBufferLayout();if(Ua(t))return new xa(e,{vs:Fa,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:o,byteOffset:0},{attribute:"aFrom64Low",format:o,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:o,byteOffset:0},{attribute:"aTo64Low",format:o,byteOffset:4*n}]}],modules:[Pa],defines:{ATTRIBUTE_TYPE:r,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0});return new xa(e,{vs:Na,bufferLayout:[{name:"aFrom",format:o},{name:"aTo",format:i.attributes[0].format}],defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"],disableWarnings:!0})}(t,n)}start(e,t){const n=this.currentLength,r=this.currentStartIndices;if(super.start(e,t,e.duration),e.duration<=0)return void this.transition.cancel();const{buffers:o,attribute:i}=this;Ma(o),o[0]=ja({device:this.device,buffer:o[0],attribute:i,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter}),o[1]=Ra({device:this.device,source:o[0],target:o[1]}),this.setBuffer(o[1]);const{transform:s}=this,a=s.model;let l=Math.floor(this.currentLength/i.size);Ua(i)&&(l/=2),a.setVertexCount(l),i.isConstant?(a.setAttributes({aFrom:o[0]}),a.setConstantAttributes({aTo:i.value})):a.setAttributes({aFrom:o[0],aTo:i.getBuffer()}),s.transformFeedback.setBuffers({vCurrent:o[1]})}onUpdate(){const{duration:e,easing:t}=this.settings,{time:n}=this.transition;let r=n/e;t&&(r=t(r));const{model:o}=this.transform;o.setUniforms({time:r}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}},spring:class extends La{constructor(e){let{device:t,attribute:n,timeline:r}=e;super({device:t,attribute:n,timeline:r}),this.type="spring",this.texture=function(e){return e.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}(t),this.framebuffer=function(e,t){return e.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[t]})}(t,this.texture),this.transform=function(e,t){const n=Oa(t.size),r=Ca(t.size);return new xa(e,{vs:Da,fs:za,bufferLayout:[{name:"aPrev",format:r},{name:"aCur",format:r},{name:"aTo",format:t.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}(t,n)}start(e,t){const n=this.currentLength,r=this.currentStartIndices;super.start(e,t);const{buffers:o,attribute:i}=this;for(let a=0;a<2;a++)o[a]=ja({device:this.device,buffer:o[a],attribute:i,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter});o[2]=Ra({device:this.device,source:o[0],target:o[2]}),this.setBuffer(o[1]);const{model:s}=this.transform;s.setVertexCount(Math.floor(this.currentLength/i.size)),i.isConstant?s.setConstantAttributes({aTo:i.value}):s.setAttributes({aTo:i.getBuffer()})}onUpdate(){const{buffers:e,transform:t,framebuffer:n,transition:r}=this,o=this.settings;t.model.setAttributes({aPrev:e[0],aCur:e[1]}),t.transformFeedback.setBuffers({vNext:e[2]}),t.model.setUniforms({stiffness:o.stiffness,damping:o.damping}),t.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),Ma(e),this.setBuffer(e[1]);this.device.readPixelsToArrayWebGL(n)[0]>0||r.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}};class Wa{constructor(e,t){let{id:n,timeline:r}=t;if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update(e){let{attributes:t,transitions:n,numInstances:r}=e;this.numInstances=r||1;for(const o in t){const e=t[o],r=e.getTransitionSetting(n);r&&this._updateAttribute(o,e,r)}for(const o in this.transitions){const e=t[o];e&&e.getTransitionSetting(n)||this._removeTransition(o)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}run(){if(0===this.numInstances)return!1;for(const t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,t,n){const r=this.transitions[e];let o=!r||r.type!==n.type;if(o){r&&this._removeTransition(e);const i=Ba[n.type];i?this.transitions[e]=new i({attribute:t,timeline:this.timeline,device:this.device}):(Or.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const qa="attributeManager.invalidate";class Va{constructor(e){let{id:t="attribute-manager",stats:n,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mergeBoundsMemoized=To(fo),this.id=t,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Wa(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const n=this._invalidateTrigger(e,t);Ao(qa,this,e,n)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Ao(qa,this,"all")}update(e){let{data:t,numInstances:n,startIndices:r=null,transitions:o,props:i={},buffers:s={},context:a={}}=e,l=!1;Ao("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const e=this.attributes[u],o=e.settings.accessor;e.startIndices=r,e.numInstances=n,i[u]&&Or.removed("props.".concat(u),"data.attributes.".concat(u))(),e.setExternalBuffer(s[u])||e.setBinaryValue("string"===typeof o?s[o]:void 0,t.startIndices)||"string"===typeof o&&!s[o]&&e.setConstantValue(i[o])||e.needsUpdate()&&(l=!0,this._updateAttribute({attribute:e,numInstances:n,data:t,props:i,context:a})),this.needsRedraw=this.needsRedraw||e.needsRedraw()}l&&Ao("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:o})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const t=e.map((e=>{var t;return null===(t=this.attributes[e])||void 0===t?void 0:t.getBounds()}));return this.mergeBoundsMemoized(t)}getChangedAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:t,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const o in t){const i=t[o];i.needsRedraw(e)&&!n.hasAttribute(o)&&(r[o]=i)}return r}getBufferLayouts(e){return Object.values(this.getAttributes()).map((t=>t.getBufferLayout(e)))}_add(e,t){for(const n in e){const r=e[n],o={...r,id:n,size:(r.isIndexed?1:r.size)||1,...t};this.attributes[n]=new Eo(this.device,o)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes){this.attributes[t].getUpdateTriggers().forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)}))}this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:n,updateTriggers:r}=this,o=r[e];return o&&o.forEach((e=>{const r=n[e];r&&r.setNeedsUpdate(r.id,t)})),o}_updateAttribute(e){const{attribute:t,numInstances:n}=e;if(Ao("attribute.updateStart",t),t.constant)return void t.setConstantValue(t.value);t.allocate(n)&&Ao("attribute.allocate",t,n);t.updateBuffer(e)&&(this.needsRedraw=!0,Ao("attribute.updateEnd",t,n))}}const Ga=1e-5;function Ha(e,t,n,r,o){const i=t-e;return(n-t)*o+-i*r+i+t}function $a(e,t){if(Array.isArray(e)){let n=0;for(let r=0;r<e.length;r++){const o=e[r]-t[r];n+=o*o}return Math.sqrt(n)}return Math.abs(e-t)}const Ka={interpolation:class extends Ia{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:n,duration:r,easing:o}}=this,i=o(e/r);this._value=Vr(t,n,i)}},spring:class extends Ia{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:n,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:i=e}=this;let s=function(e,t,n,r,o){if(Array.isArray(n)){const i=[];for(let s=0;s<n.length;s++)i[s]=Ha(e[s],t[s],n[s],r,o);return i}return Ha(e,t,n,r,o)}(o,i,t,n,r);const a=$a(s,t),l=$a(s,i);a<Ga&&l<Ga&&(s=t,this.end()),this._prevValue=i,this._currValue=s}}};class Ya{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,n,r){const{transitions:o}=this;if(o.has(e)){const n=o.get(e),{value:r=n.settings.fromValue}=n;t=r,this.remove(e)}if(!(r=ko(r)))return;const i=Ka[r.type];if(!i)return void Or.error("unsupported transition type '".concat(r.type,"'"))();const s=new i(this.timeline);s.start({...r,fromValue:t,toValue:n}),o.set(e,s)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,n]of this.transitions)n.update(),e[t]=n.value,n.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const Qa="Awaiting state",Za=Symbol.for("component"),Ja=Symbol.for("propTypes"),Xa=Symbol.for("deprecatedProps"),el=Symbol.for("asyncPropDefaults"),tl=Symbol.for("asyncPropOriginal"),nl=Symbol.for("asyncPropResolved");function rl(e,t){const n=il({newProps:e,oldProps:t,propTypes:e[Ja],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:o}=e;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&o&&(n=o(e.data,t.data)||n);return n}(e,t);let o=!1;return r||(o=function(e,t){if(null===t)return{all:!0};if("all"in e.updateTriggers){if(ll(e,t,"all"))return{all:!0}}const n={};let r=!1;for(const o in e.updateTriggers)if("all"!==o){ll(e,t,o)&&(n[o]=!0,r=!0)}return!!r&&n}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:o,extensionsChanged:al(e,t),transitionsChanged:ol(e,t)}}function ol(e,t){if(!e.transitions)return!1;const n={},r=e[Ja];let o=!1;for(const i in e.transitions){const s=r[i],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&sl(e[i],t[i],s)&&(n[i]=!0,o=!0)}return!!o&&n}function il(e){let{newProps:t,oldProps:n,ignoreProps:r={},propTypes:o={},triggerName:i="props"}=e;if(n===t)return!1;if("object"!==typeof t||null===t)return"".concat(i," changed shallowly");if("object"!==typeof n||null===n)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in r)){if(!(s in n))return"".concat(i,".").concat(s," added");const e=sl(t[s],n[s],o[s]);if(e)return"".concat(i,".").concat(s," ").concat(e)}for(const s of Object.keys(n))if(!(s in r)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const e=sl(t[s],n[s],o[s]);if(e)return"".concat(i,".").concat(s," ").concat(e)}}return!1}function sl(e,t,n){let r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||(r=e&&t&&e.equals,!r||r.call(e,t))?r||t===e?null:"changed shallowly":"changed deeply"}function al(e,t){if(null===t)return!0;const n=t.extensions,{extensions:r}=e;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let o=0;o<r.length;o++)if(!r[o].equals(n[o]))return!0;return!1}function ll(e,t,n){let r=e.updateTriggers[n];r=void 0===r||null===r?{}:r;let o=t.updateTriggers[n];o=void 0===o||null===o?{}:o;return il({oldProps:o,newProps:r,triggerName:n})}function ul(e){if(!function(e){return null!==e&&"object"===typeof e}(e))throw new Error("count(): argument not an object");if("function"===typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===typeof e&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function cl(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((e=>"project64"===e.name)))){const e=n.modules.findIndex((e=>"project32"===e.name));e>=0&&n.modules.splice(e,1)}if("inject"in t)if(e.inject){const r={...e.inject};for(const e in t.inject)r[e]=(r[e]||"")+t.inject[e];n.inject=r}else n.inject=t.inject;return n}function fl(e,t,n){const r=t[0],o=t[1],i=t[2],s=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*s,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*s,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*s,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*s,e}!function(){const e=function(){const e=new Xr(4);return Xr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();function dl(e,t){const n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],g=t[13],m=t[14],y=t[15],v=n*a-r*s,b=n*l-o*s,_=n*u-i*s,w=r*l-o*a,x=r*u-i*a,k=o*u-i*l,E=c*g-f*p,S=c*m-d*p,T=c*y-h*p,P=f*m-d*g,A=f*y-h*g,O=d*y-h*m;let C=v*O-b*A+_*P+w*T-x*S+k*E;return C?(C=1/C,e[0]=(a*O-l*A+u*P)*C,e[1]=(o*A-r*O-i*P)*C,e[2]=(g*k-m*x+y*w)*C,e[3]=(d*x-f*k-h*w)*C,e[4]=(l*T-s*O-u*S)*C,e[5]=(n*O-o*T+i*S)*C,e[6]=(m*_-p*k-y*b)*C,e[7]=(c*k-d*_+h*b)*C,e[8]=(s*A-a*T+u*E)*C,e[9]=(r*T-n*A-i*E)*C,e[10]=(p*x-g*_+y*v)*C,e[11]=(f*_-c*x-h*v)*C,e[12]=(a*S-s*P-l*E)*C,e[13]=(n*P-r*S+o*E)*C,e[14]=(g*b-p*w-m*v)*C,e[15]=(c*w-f*b+d*v)*C,e):null}function hl(e,t,n){const r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],g=t[12],m=t[13],y=t[14],v=t[15];let b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*r+_*a+w*f+x*g,e[1]=b*o+_*l+w*d+x*m,e[2]=b*i+_*u+w*h+x*y,e[3]=b*s+_*c+w*p+x*v,b=n[4],_=n[5],w=n[6],x=n[7],e[4]=b*r+_*a+w*f+x*g,e[5]=b*o+_*l+w*d+x*m,e[6]=b*i+_*u+w*h+x*y,e[7]=b*s+_*c+w*p+x*v,b=n[8],_=n[9],w=n[10],x=n[11],e[8]=b*r+_*a+w*f+x*g,e[9]=b*o+_*l+w*d+x*m,e[10]=b*i+_*u+w*h+x*y,e[11]=b*s+_*c+w*p+x*v,b=n[12],_=n[13],w=n[14],x=n[15],e[12]=b*r+_*a+w*f+x*g,e[13]=b*o+_*l+w*d+x*m,e[14]=b*i+_*u+w*h+x*y,e[15]=b*s+_*c+w*p+x*v,e}function pl(e,t,n){const r=n[0],o=n[1],i=n[2];let s,a,l,u,c,f,d,h,p,g,m,y;return t===e?(e[12]=t[0]*r+t[4]*o+t[8]*i+t[12],e[13]=t[1]*r+t[5]*o+t[9]*i+t[13],e[14]=t[2]*r+t[6]*o+t[10]*i+t[14],e[15]=t[3]*r+t[7]*o+t[11]*i+t[15]):(s=t[0],a=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],h=t[7],p=t[8],g=t[9],m=t[10],y=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=d,e[7]=h,e[8]=p,e[9]=g,e[10]=m,e[11]=y,e[12]=s*r+c*o+p*i+t[12],e[13]=a*r+f*o+g*i+t[13],e[14]=l*r+d*o+m*i+t[14],e[15]=u*r+h*o+y*i+t[15]),e}function gl(e,t,n){const r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ml(e,t,n){const r=Math.sin(n),o=Math.cos(n),i=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+u*r,e[5]=s*o+c*r,e[6]=a*o+f*r,e[7]=l*o+d*r,e[8]=u*o-i*r,e[9]=c*o-s*r,e[10]=f*o-a*r,e[11]=d*o-l*r,e}function yl(e,t,n){const r=Math.sin(n),o=Math.cos(n),i=t[0],s=t[1],a=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+u*r,e[1]=s*o+c*r,e[2]=a*o+f*r,e[3]=l*o+d*r,e[4]=u*o-i*r,e[5]=c*o-s*r,e[6]=f*o-a*r,e[7]=d*o-l*r,e}const vl=function(e,t,n,r,o){const i=1/Math.tan(t/2);if(e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0){const t=1/(r-o);e[10]=(o+r)*t,e[14]=2*o*r*t}else e[10]=-1,e[14]=-2*r;return e};const bl=function(e,t,n,r,o,i,s){const a=1/(t-n),l=1/(r-o),u=1/(i-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*a,e[13]=(o+r)*l,e[14]=(s+i)*u,e[15]=1,e};const _l=[0,0,0,0],wl=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],xl=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],kl=[0,0,0],El=[0,0,0],Sl=To((function(e){let{viewport:t,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:o}=e;const{projectionCenter:i,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:u,geospatialOrigin:c}=function(e,t,n){const{viewMatrixUncentered:r,projectionMatrix:o}=e;let{viewMatrix:i,viewProjectionMatrix:s}=e,a=_l,l=_l,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:d}=Tl(e,t,n);d&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,a=fl([],l,s),i=r||i,s=hl([],o,i),s=hl([],s,wl));return{viewMatrix:i,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}(t,r,o),f=t.getDistanceScales(),d=[t.width*n,t.height*n],h=fl([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,p={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:u,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:d,project_uDevicePixelRatio:n,project_uFocalDistance:h,project_uCommonUnitsPerMeter:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:kl,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:xl,project_uCameraPosition:l};if(c){const e=t.getDistanceScales(c);switch(r){case Cr.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case Cr.LNGLAT:case Cr.LNGLAT_OFFSETS:t._pseudoMeters||(p.project_uCommonUnitsPerMeter=e.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case Cr.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return p}));function Tl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:El;n.length<3&&(n=[n[0],n[1],0]);let r,o=n,i=!0;switch(r=t===Cr.LNGLAT_OFFSETS||t===Cr.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Mr.WEB_MERCATOR:t!==Cr.LNGLAT&&t!==Cr.CARTESIAN||(r=[0,0,0],i=!1);break;case Mr.WEB_MERCATOR_AUTO_OFFSET:t===Cr.LNGLAT?o=r:t===Cr.CARTESIAN&&(o=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],r=e.unprojectPosition(o),o[0]-=n[0],o[1]-=n[1],o[2]-=n[2]);break;case Mr.IDENTITY:o=e.position.map(Math.fround),o[2]=o[2]||0;break;case Mr.GLOBE:i=!1,r=null;break;default:i=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:o,offsetMode:i}}class Pl extends $r{toString(){let e="[";if(zr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=Kr(n),this}getColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[n+r];return t}setColumn(e,t){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}function Al(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Ol(e,t,n,r){const o=t[0],i=t[1];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e}!function(){const e=function(){const e=new Xr(2);return Xr!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var Cl;!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"}(Cl||(Cl={}));const Ml=45*Math.PI/180,Rl=1,jl=.1,Il=500,Ll=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Nl extends Pl{static get IDENTITY(){return function(){Ul||(Ul=new Nl,Object.freeze(Ul));return Ul}()}static get ZERO(){return function(){Fl||(Fl=new Nl([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Fl));return Fl}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Cl}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,r,o,i,s,a,l,u,c,f,d,h,p,g){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=o,this[5]=i,this[6]=s,this[7]=a,this[8]=l,this[9]=u,this[10]=c,this[11]=f,this[12]=d,this[13]=h,this[14]=p,this[15]=g,this.check()}setRowMajor(e,t,n,r,o,i,s,a,l,u,c,f,d,h,p,g){return this[0]=e,this[1]=o,this[2]=l,this[3]=d,this[4]=t,this[5]=i,this[6]=u,this[7]=h,this[8]=n,this[9]=s,this[10]=c,this[11]=p,this[12]=r,this[13]=a,this[14]=f,this[15]=g,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Ll)}fromObject(e){return this.check()}fromQuaternion(e){return function(e,t){const n=t[0],r=t[1],o=t[2],i=t[3],s=n+n,a=r+r,l=o+o,u=n*s,c=r*s,f=r*a,d=o*s,h=o*a,p=o*l,g=i*s,m=i*a,y=i*l;e[0]=1-f-p,e[1]=c+y,e[2]=d-m,e[3]=0,e[4]=c-y,e[5]=1-u-p,e[6]=h+g,e[7]=0,e[8]=d+m,e[9]=h-g,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:n,bottom:r,top:o,near:i=jl,far:s=Il}=e;return s===1/0?function(e,t,n,r,o,i){const s=2*i/(n-t),a=2*i/(o-r),l=(n+t)/(n-t),u=(o+r)/(o-r),c=-1,f=-1,d=-2*i;e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=d,e[15]=0}(this,t,n,r,o,i):function(e,t,n,r,o,i,s){const a=1/(n-t),l=1/(o-r),u=1/(i-s);e[0]=2*i*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(o+r)*l,e[10]=(s+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i*2*u,e[15]=0}(this,t,n,r,o,i,s),this.check()}lookAt(e){const{eye:t,center:n=[0,0,0],up:r=[0,1,0]}=e;return function(e,t,n,r){let o,i,s,a,l,u,c,f,d,h;const p=t[0],g=t[1],m=t[2],y=r[0],v=r[1],b=r[2],_=n[0],w=n[1],x=n[2];Math.abs(p-_)<Jr&&Math.abs(g-w)<Jr&&Math.abs(m-x)<Jr?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(f=p-_,d=g-w,h=m-x,o=1/Math.sqrt(f*f+d*d+h*h),f*=o,d*=o,h*=o,i=v*h-b*d,s=b*f-y*h,a=y*d-v*f,o=Math.sqrt(i*i+s*s+a*a),o?(o=1/o,i*=o,s*=o,a*=o):(i=0,s=0,a=0),l=d*a-h*s,u=h*i-f*a,c=f*s-d*i,o=Math.sqrt(l*l+u*u+c*c),o?(o=1/o,l*=o,u*=o,c*=o):(l=0,u=0,c=0),e[0]=i,e[1]=l,e[2]=f,e[3]=0,e[4]=s,e[5]=u,e[6]=d,e[7]=0,e[8]=a,e[9]=c,e[10]=h,e[11]=0,e[12]=-(i*p+s*g+a*m),e[13]=-(l*p+u*g+c*m),e[14]=-(f*p+d*g+h*m),e[15]=1)}(this,t,n,r),this.check()}ortho(e){const{left:t,right:n,bottom:r,top:o,near:i=jl,far:s=Il}=e;return bl(this,t,n,r,o,i,s),this.check()}orthographic(e){const{fovy:t=Ml,aspect:n=Rl,focalDistance:r=1,near:o=jl,far:i=Il}=e;Dl(t);const s=t/2,a=r*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:o,far:i})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:n=1,near:r=.1,far:o=500}=e;return Dl(t),vl(this,t,n,r,o),this.check()}determinant(){return function(e){const t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],g=e[14],m=t*s-n*i,y=t*a-r*i,v=n*a-r*s,b=u*p-c*h,_=u*g-f*h,w=c*g-f*p;return l*(t*w-n*_+r*b)-o*(i*w-s*_+a*b)+e[15]*(u*v-c*y+f*m)-d*(h*v-p*y+g*m)}(this)}getScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],o=1/n[1],i=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*i,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*i,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],o=1/n[1],i=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*i,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*i,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*i,e}transpose(){return function(e,t){if(e===t){const n=t[1],r=t[2],o=t[3],i=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}invert(){return dl(this,this),this.check()}multiplyLeft(e){return hl(this,e,this),this.check()}multiplyRight(e){return hl(this,this,e),this.check()}rotateX(e){return ml(this,this,e),this.check()}rotateY(e){return function(e,t,n){const r=Math.sin(n),o=Math.cos(n),i=t[0],s=t[1],a=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-u*r,e[1]=s*o-c*r,e[2]=a*o-f*r,e[3]=l*o-d*r,e[8]=i*r+u*o,e[9]=s*r+c*o,e[10]=a*r+f*o,e[11]=l*r+d*o}(this,this,e),this.check()}rotateZ(e){return yl(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function(e,t,n,r){let o,i,s,a,l,u,c,f,d,h,p,g,m,y,v,b,_,w,x,k,E,S,T,P,A=r[0],O=r[1],C=r[2],M=Math.sqrt(A*A+O*O+C*C);M<Jr||(M=1/M,A*=M,O*=M,C*=M,i=Math.sin(n),o=Math.cos(n),s=1-o,a=t[0],l=t[1],u=t[2],c=t[3],f=t[4],d=t[5],h=t[6],p=t[7],g=t[8],m=t[9],y=t[10],v=t[11],b=A*A*s+o,_=O*A*s+C*i,w=C*A*s-O*i,x=A*O*s-C*i,k=O*O*s+o,E=C*O*s+A*i,S=A*C*s+O*i,T=O*C*s-A*i,P=C*C*s+o,e[0]=a*b+f*_+g*w,e[1]=l*b+d*_+m*w,e[2]=u*b+h*_+y*w,e[3]=c*b+p*_+v*w,e[4]=a*x+f*k+g*E,e[5]=l*x+d*k+m*E,e[6]=u*x+h*k+y*E,e[7]=c*x+p*k+v*E,e[8]=a*S+f*T+g*P,e[9]=l*S+d*T+m*P,e[10]=u*S+h*T+y*P,e[11]=c*S+p*T+v*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}scale(e){return gl(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return pl(this,this,e),this.check()}transform(e,t){return 4===e.length?(Yr(t=fl(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;let r;switch(n){case 2:r=function(e,t,n){const r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e}(t||[-0,-0],e,this);break;case 3:r=to(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Yr(r,e.length),r}transformAsVector(e,t){let n;switch(e.length){case 2:n=function(e,t,n){const r=t[0],o=t[1],i=n[3]*r+n[7]*o||1;return e[0]=(n[0]*r+n[4]*o)/i,e[1]=(n[1]*r+n[5]*o)/i,e}(t||[-0,-0],e,this);break;case 3:n=ro(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Yr(n,e.length),n}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}}let Fl,Ul;function Dl(e){if(e>2*Math.PI)throw Error("expected radians")}function zl(e,t){const n=fl([],t,e);var r,o,i;return r=n,o=n,i=1/n[3],r[0]=o[0]*i,r[1]=o[1]*i,r[2]=o[2]*i,r[3]=o[3]*i,n}function Bl(e,t,n){return e<t?t:e>n?n:e}const Wl=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function ql(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Vl=Math.PI,Gl=Vl/4,Hl=Vl/180,$l=180/Vl,Kl=512,Yl=4003e4,Ql=85.051129,Zl=1.5;function Jl(e){const[t,n]=e;ql(Number.isFinite(t)),ql(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*Hl;return[Kl*(t*Hl+Vl)/(2*Vl),Kl*(Vl+Math.log(Math.tan(Gl+.5*r)))/(2*Vl)]}function Xl(e){const[t,n]=e,r=t/Kl*(2*Vl)-Vl,o=2*(Math.atan(Math.exp(n/Kl*(2*Vl)-Vl))-Gl);return[r*$l,o*$l]}function eu(e){const{latitude:t}=e;ql(Number.isFinite(t));const n=Math.cos(t*Hl);return function(e){return Wl(e)}(Yl*n)-9}function tu(e){const t=Math.cos(e*Hl);return Kl/Yl/t}function nu(e){const{latitude:t,longitude:n,highPrecision:r=!1}=e;ql(Number.isFinite(t)&&Number.isFinite(n));const o=Kl,i=Math.cos(t*Hl),s=o/360,a=s/i,l=o/Yl/i,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(r){const e=Hl*Math.tan(t*Hl)/i,n=s*e/2,r=o/Yl*e,c=r/a*l;u.unitsPerDegree2=[0,n,r],u.unitsPerMeter2=[c,0,c]}return u}function ru(e,t){const[n,r,o]=e,[i,s,a]=t,{unitsPerMeter:l,unitsPerMeter2:u}=nu({longitude:n,latitude:r,highPrecision:!0}),c=Jl(e);c[0]+=i*(l[0]+u[0]*s),c[1]+=s*(l[1]+u[1]*s);const f=Xl(c),d=(o||0)+(a||0);return Number.isFinite(o)||Number.isFinite(a)?[f[0],f[1],d]:f}function ou(e){const{width:t,height:n,altitude:r,pitch:o=0,offset:i,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=iu(Zl)}=e;void 0!==r&&(c=iu(r));const f=c*Hl,d=o*Hl,h=su(c);let p=h;s&&(p+=s[2]*a/Math.cos(d)/n);const g=f*(.5+(i?i[1]:0)/n),m=Math.sin(g)*p/Math.sin(Bl(Math.PI/2-d-g,.01,Math.PI-.01)),y=Math.sin(d)*m+p,v=10*p;return{fov:f,aspect:t/n,focalDistance:h,near:l,far:Math.min(y*u,v)}}function iu(e){return 2*Math.atan(.5/e)*$l}function su(e){return.5/Math.tan(.5*e*Hl)}function au(e,t){const[n,r,o=0]=e;return ql(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o)),zl(t,[n,r,o,1])}function lu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[r,o,i]=e;if(ql(Number.isFinite(r)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(i)){return zl(t,[r,o,i,1])}const s=zl(t,[r,o,0,1]),a=zl(t,[r,o,1,1]),l=s[2],u=a[2];return Ol([],s,a,l===u?0:((n||0)-l)/(u-l))}function uu(e){const{width:t,height:n,bounds:r,minExtent:o=0,maxZoom:i=24,offset:s=[0,0]}=e,[[a,l],[u,c]]=r,f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof e)return{top:e,bottom:e,left:e,right:e};return ql(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e}(e.padding),d=Jl([a,Bl(c,-85.051129,Ql)]),h=Jl([u,Bl(l,-85.051129,Ql)]),p=[Math.max(Math.abs(h[0]-d[0]),o),Math.max(Math.abs(h[1]-d[1]),o)],g=[t-f.left-f.right-2*Math.abs(s[0]),n-f.top-f.bottom-2*Math.abs(s[1])];ql(g[0]>0&&g[1]>0);const m=g[0]/p[0],y=g[1]/p[1],v=(f.right-f.left)/2/m,b=(f.top-f.bottom)/2/y,_=Xl([(h[0]+d[0])/2+v,(h[1]+d[1])/2+b]),w=Math.min(i,Wl(Math.abs(Math.min(m,y))));return ql(Number.isFinite(w)),{longitude:_[0],latitude:_[1],zoom:w}}const cu=Math.PI/180;function fu(e,t,n){const{pixelUnprojectionMatrix:r}=e,o=zl(r,[t,0,1,1]),i=zl(r,[t,e.height,1,1]),s=Xl(Ol([],o,i,(n*e.distanceScales.unitsPerMeter[2]-o[2])/(i[2]-o[2])));return s.push(n),s}const du=Math.PI/180,hu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],pu=[0,0,0],gu={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class mu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||gu,this.focalDistance=e.focalDistance||1,this.position=e.position||pu,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Mr.WEB_MERCATOR:Mr.WEB_MERCATOR_AUTO_OFFSET:Mr.IDENTITY}equals(e){return e instanceof mu&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Gr(e.projectionMatrix,this.projectionMatrix)&&Gr(e.viewMatrix,this.viewMatrix))}project(e){let{topLeft:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=au(this.projectPosition(e),this.pixelProjectionMatrix),[r,o]=n,i=t?o:this.height-o;return 2===e.length?[r,i]:[r,i,n[2]]}unproject(e){let{topLeft:t=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,o,i]=e,s=t?o:this.height-o,a=n&&n*this.distanceScales.unitsPerMeter[2],l=lu([r,s,i],this.pixelUnprojectionMatrix,a),[u,c,f]=this.unprojectPosition(l);return Number.isFinite(i)?[u,c,f]:Number.isFinite(n)?[u,c,n]:[u,c]}projectPosition(e){const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=Jl(e);return t[1]=qr(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Xl(e):e}getBounds(){const e={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},t=this.unproject([0,0],e),n=this.unproject([this.width,0],e),r=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(t[0],n[0],r[0],o[0]),Math.min(t[1],n[1],r[1],o[1]),Math.max(t[0],n[0],r[0],o[0]),Math.max(t[1],n[1],r[1],o[1])]}getDistanceScales(e){return e?nu({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel(e){let{x:t,y:n,width:r=1,height:o=1}=e;return t<this.x+this.width&&this.x<t+r&&n<this.y+this.height&&this.y<n+o}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:lo((e=this.viewProjectionMatrix)[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:lo(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:lo(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:lo(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:lo(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:lo(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}),this._frustumPlanes;var e}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=eu({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||nu({latitude:n,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:i}=e;let s=pu;if(o&&(s=i?new Nl(i).transformAsVector(o,[]):o),this.isGeospatial){const e=this.projectPosition([t,n,0]);this.center=new so(s).scale(this.distanceScales.unitsPerMeter).add(e)}else this.center=this.projectPosition(s)}_initMatrices(e){const{viewMatrix:t=hu,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:o,fovy:i=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:u=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Nl).multiplyRight(t).translate(new so(this.center).negate()),this.projectionMatrix=n||function(e){let{width:t,height:n,orthographic:r,fovyRadians:o,focalDistance:i,padding:s,near:a,far:l}=e;const u=t/n,c=r?(new Nl).orthographic({fovy:o,aspect:u,focalDistance:i,near:a,far:l}):(new Nl).perspective({fovy:o,aspect:u,near:a,far:l});if(s){const{left:e=0,right:r=0,top:o=0,bottom:i=0}=s,a=qr((e+t-r)/2,0,t)-t/2,l=qr((o+n-i)/2,0,n)-n/2;c[8]-=2*a/t,c[9]+=2*l/n}return c}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||i*du,focalDistance:u,padding:l,near:s,far:a});const c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var f;hl(c,c,this.projectionMatrix),hl(c,c,this.viewMatrix),this.viewProjectionMatrix=c,this.viewMatrixInverse=dl([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(f=this.viewMatrixInverse)[12],f[13],f[14]];const d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];gl(d,d,[this.width/2,-this.height/2,1]),pl(d,d,[1,-1,0]),hl(h,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=dl([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Or.warn("Pixel project matrix not invertible")()}}mu.displayName="Viewport";class yu extends mu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:t=0,longitude:n=0,zoom:r=0,pitch:o=0,bearing:i=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,nearZ:l,farZ:u,orthographic:c=!1,projectionMatrix:f,repeat:d=!1,worldOffset:h=0,position:p,padding:g,legacyMeterSizes:m=!1}=e;let{width:y,height:v,altitude:b=1.5}=e;const _=Math.pow(2,r);let w;y=y||1,v=v||1;let x=null;if(f)b=f[5]/2,w=iu(b);else{let n;if(e.fovy?(w=e.fovy,b=su(w)):w=iu(b),g){const{top:e=0,bottom:t=0}=g;n=[0,qr((e+v-t)/2,0,v)-v/2]}x=ou({width:y,height:v,scale:_,center:p&&[0,0,p[2]*tu(t)],offset:n,pitch:o,fovy:w,nearZMultiplier:s,farZMultiplier:a}),Number.isFinite(l)&&(x.near=l),Number.isFinite(u)&&(x.far=u)}let k=function(e){const{height:t,pitch:n,bearing:r,altitude:o,scale:i,center:s}=e,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];pl(a,a,[0,0,-o]),ml(a,a,-n*Hl),yl(a,a,r*Hl);const l=i/t;var u,c;return gl(a,a,[l,l,l]),s&&pl(a,a,((u=[])[0]=-(c=s)[0],u[1]=-c[1],u[2]=-c[2],u)),a}({height:v,pitch:o,bearing:i,scale:_,altitude:b});if(h){k=(new Nl).translate([512*h,0,0]).multiplyLeft(k)}super({...e,width:y,height:v,viewMatrix:k,longitude:n,latitude:t,zoom:r,...x,fovy:w,focalDistance:b}),this.latitude=t,this.longitude=n,this.zoom=r,this.pitch=o,this.bearing=i,this.altitude=b,this.fovy=w,this.orthographic=c,this._subViewports=d?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let r=t;r<=n;r++){const e=r?new yu({...this,worldOffset:r}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*tu(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)/tu(n)]}addMetersToLngLat(e,t){return ru(e,t)}panByPosition(e,t){const n=lu(t,this.pixelUnprojectionMatrix),r=Al([],this.projectFlat(e),((o=[])[0]=-(i=n)[0],o[1]=-i[1],o));var o,i;const s=Al([],this.center,r),[a,l]=this.unprojectFlat(s);return{longitude:a,latitude:l}}getBounds(){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:r,unproject:o}=e,i={targetZ:t},s=o([0,r],i),a=o([n,r],i);let l,u;return(e.fovy?.5*e.fovy*cu:Math.atan(.5/e.altitude))>(90-e.pitch)*cu-.01?(l=fu(e,0,t),u=fu(e,n,t)):(l=o([0,0],i),u=o([n,0],i)),[s,a,u,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:r}=this,{longitude:o,latitude:i,zoom:s}=uu({width:n,height:r,bounds:e,...t});return new yu({width:n,height:r,longitude:o,latitude:i,zoom:s})}}yu.displayName="WebMercatorViewport";const vu=[0,0,0];function bu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.projectPosition(e);if(n&&t instanceof yu){const[n,o,i=0]=e,s=t.getDistanceScales([n,o]);r[2]=i*s.unitsPerMeter[2]}return r}function _u(e,t){let{viewport:n,modelMatrix:r,coordinateSystem:o,coordinateOrigin:i,offsetMode:s}=t,[a,l,u=0]=e;switch(r&&([a,l,u]=fl([],[a,l,u,1],r)),o){case Cr.LNGLAT:return bu([a,l,u],n,s);case Cr.LNGLAT_OFFSETS:return bu([a+i[0],l+i[1],u+(i[2]||0)],n,s);case Cr.METER_OFFSETS:return bu(ru(i,[a,l,u]),n,s);case Cr.CARTESIAN:default:return n.isGeospatial?[a+i[0],l+i[1],u+i[2]]:n.projectPosition([a,l,u])}}function wu(e,t){const{viewport:n,coordinateSystem:r,coordinateOrigin:o,modelMatrix:i,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(e){const{viewport:t,modelMatrix:n,coordinateOrigin:r}=e;let{coordinateSystem:o,fromCoordinateSystem:i,fromCoordinateOrigin:s}=e;return o===Cr.DEFAULT&&(o=t.isGeospatial?Cr.LNGLAT:Cr.CARTESIAN),void 0===i&&(i=o),void 0===s&&(s=r),{viewport:t,coordinateSystem:o,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:i,fromCoordinateOrigin:s}}(t),{autoOffset:l=!0}=t,{geospatialOrigin:u=vu,shaderCoordinateOrigin:c=vu,offsetMode:f=!1}=l?Tl(n,r,o):{},d=_u(e,{viewport:n,modelMatrix:i,coordinateSystem:s,coordinateOrigin:a,offsetMode:f});if(f){const e=n.projectPosition(u||c);no(d,d,e)}return d}const xu={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},ku={};function Eu(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Eu(e[r],t[r],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const i of r){if(!t.hasOwnProperty(i))return!1;if(!Eu(e[i],t[i],n-1))return!1}return!0}return!1}const Su={boolean:{validate:(e,t)=>!0,equal:(e,t,n)=>Boolean(e)===Boolean(t)},number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},color:{validate:(e,t)=>t.optional&&!e||Au(e)&&(3===e.length||4===e.length),equal:(e,t,n)=>Eu(e,t,1)},accessor:{validate(e,t){const n=Ou(e);return"function"===n||n===Ou(t.value)},equal:(e,t,n)=>"function"===typeof t||Eu(e,t,1)},array:{validate:(e,t)=>t.optional&&!e||Au(e),equal(e,t,n){const{compare:r}=n,o=Number.isInteger(r)?r:r?1:0;return r?Eu(e,t,o):e===t}},object:{equal(e,t,n){if(n.ignore)return!0;const{compare:r}=n,o=Number.isInteger(r)?r:r?1:0;return r?Eu(e,t,o):e===t}},function:{validate:(e,t)=>t.optional&&!e||"function"===typeof e,equal:(e,t,n)=>!n.compare&&!1!==n.ignore||e===t},data:{transform:(e,t,n)=>{if(!e)return e;const{dataTransform:r}=n.props;return r?r(e):"string"===typeof e.shape&&e.shape.endsWith("-table")&&Array.isArray(e.data)?e.data:e}},image:{transform:(e,t,n)=>{const r=n.context;return r&&r.device?function(e,t,n,r){if(n instanceof jo)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let o=null;n.compressed&&(o={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const i=t.createTexture({...n,sampler:{...xu,...o,...r}});return ku[i.id]=e,i}(n.id,r.device,e,{...t.parameters,...n.props.textureParameters}):null},release:(e,t,n)=>{var r,o;r=n.id,(o=e)&&o instanceof jo&&ku[o.id]===r&&(o.delete(),delete ku[o.id])}}};function Tu(e,t){switch(Ou(t)){case"object":return Pu(e,t);case"array":return Pu(e,{type:"array",value:t,compare:!1});case"boolean":return Pu(e,{type:"boolean",value:t});case"number":return Pu(e,{type:"number",value:t});case"function":return Pu(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Pu(e,t){return"type"in t?{name:e,...Su[t.type],...t}:"value"in t?{name:e,type:Ou(t.value),...t}:{name:e,type:"object",value:t}}function Au(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Ou(e){return Au(e)?"array":null===e?"null":typeof e}const Cu="_mergedDefaultProps";function Mu(e,t){let n=Cu;if(t)for(const o of t){const e=o.constructor;e&&(n+=":".concat(e.extensionName||e.name))}const r=Iu(e,n);return r||(e[n]=function(e,t){const n=e.prototype;if(!n)return null;const r=Object.getPrototypeOf(e),o=Mu(r),i=Iu(e,"defaultProps")||{},s=function(e){const t={},n={},r={};for(const[o,i]of Object.entries(e)){const e=null===i||void 0===i?void 0:i.deprecatedFor;if(e)r[o]=Array.isArray(e)?e:[e];else{const e=Tu(o,i);t[o]=e,n[o]=e.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(i),a=Object.assign(Object.create(null),o,s.defaultProps),l=Object.assign(Object.create(null),null===o||void 0===o?void 0:o[Ja],s.propTypes),u=Object.assign(Object.create(null),null===o||void 0===o?void 0:o[Xa],s.deprecatedProps);for(const c of t){const e=Mu(c.constructor);e&&(Object.assign(a,e),Object.assign(l,e[Ja]),Object.assign(u,e[Xa]))}(function(e,t){const n=function(e){const t=e.componentName;t||Or.warn("".concat(e.name,".componentName not specified"))();return t||e.name}(t);Object.defineProperties(e,{id:{writable:!0,value:n}})})(a,e),function(e,t){const n={},r={};for(const o in t){const e=t[o],{name:i,value:s}=e;e.async&&(n[i]=s,r[i]=Ru(i))}e[el]=n,e[tl]={},Object.defineProperties(e,r)}(a,l),function(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(e){const r="".concat(this.id,": ").concat(n);for(const o of t[n])ju(this,o)||(this[o]=e);Or.deprecated(r,t[n].join("/"))()}})}(a,u),a[Ja]=l,a[Xa]=u,0!==t.length||ju(e,"_propTypes")||(e._propTypes=l);return a}(e,t||[]))}function Ru(e){return{enumerable:!0,set(t){"string"===typeof t||t instanceof Promise||vo(t)?this[tl][e]=t:this[nl][e]=t},get(){if(this[nl]){if(e in this[nl]){return this[nl][e]||this[el][e]}if(e in this[tl]){const t=this[Za]&&this[Za].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[el][e]}}return this[el][e]}}}function ju(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Iu(e,t){return ju(e,t)&&e[t]}var Lu;let Nu=0;class Fu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props=function(e,t){let n;for(let i=t.length-1;i>=0;i--){const e=t[i];"extensions"in e&&(n=e.extensions)}const r=Mu(e.constructor,n),o=Object.create(r);o[Za]=e,o[tl]={},o[nl]={};for(let i=0;i<t.length;++i){const e=t[i];for(const t in e)o[t]=e[t]}return Object.freeze(o),o}(this,t),this.id=this.props.id,this.count=Nu++}clone(e){const{props:t}=this,n={};for(const r in t[el])r in t[nl]?n[r]=t[nl][r]:r in t[tl]&&(n[r]=t[tl][r]);return new this.constructor({...t,...n,...e})}}(Lu=Fu).componentName="Component",Lu.defaultProps={};const Uu=Object.freeze({});class Du{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Uu}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[Za]||this.component;const t=e[nl]||{},n=e[tl]||e,r=e[el]||{};for(const o in t){const e=t[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,e),t[o]=this.getAsyncProp(o)}for(const o in n){const e=n[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,e)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){this._didAsyncInputValueChange(e,t)&&("string"===typeof t&&(t=this._fetch(e,t)),t instanceof Promise?this._watchPromise(e,t):vo(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,t,n){const r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;t.then((t=>{this.component&&(t=this._postProcessValue(n,t),this._setAsyncPropValue(e,t,r),this._onResolve(e,t))})).catch((t=>{this._onError(e,t)}))}}async _resolveAsyncIterable(e,t){if("data"!==e)return void this._setPropValue(e,t);const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let o=[],i=0;for await(const s of t){if(!this.component)return;const{dataTransform:t}=this.component.props;o=t?t(s,o):o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:i,endRow:o.length}]}),i=o.length,this._setAsyncPropValue(e,o,r)}this._onResolve(e,o)}_postProcessValue(e,t){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const n=this.component&&this.component.props[Ja];this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class zu extends Du{constructor(e){let{attributeManager:t,layer:n}=e;super(n),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const n=this.layer,r=null===n||void 0===n?void 0:n.props.fetch;return r?r(t,{propName:e,layer:n}):super._fetch(e,t)}_onResolve(e,t){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===e&&r&&r(t,{propName:e,layer:n})}}_onError(e,t){const n=this.layer;n&&n.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const Bu=e=>"boolean"===typeof e,Wu=e=>"function"===typeof e,qu=e=>null!==e&&"object"===typeof e,Vu=e=>qu(e)&&e.constructor==={}.constructor,Gu=e=>Boolean(e)&&"function"===typeof e[Symbol.iterator],Hu=e=>e&&"function"===typeof e[Symbol.asyncIterator],$u=e=>"undefined"!==typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Ku=e=>"undefined"!==typeof Blob&&e instanceof Blob,Yu=e=>e&&"object"===typeof e&&e.isBuffer,Qu=e=>(e=>"undefined"!==typeof ReadableStream&&e instanceof ReadableStream||qu(e)&&Wu(e.tee)&&Wu(e.cancel)&&Wu(e.getReader))(e)||(e=>qu(e)&&Wu(e.read)&&Wu(e.pipe)&&Bu(e.readable))(e);function Zu(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function Ju(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function Xu(e){var t,n;let r;return Zu(e,"null loader"),Zu(Ju(e),"invalid loader"),Array.isArray(e)&&(r=e[1],e=e[0],e={...e,options:{...e.options,...r}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(n=e)&&void 0!==n&&n.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}let ec="";const tc={};class nc extends Error{constructor(e,t){super(e),or(this,"reason",void 0),or(this,"url",void 0),or(this,"response",void 0),this.reason=t.reason,this.url=t.url,this.response=t.response}}const rc=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,oc=/^([-\w.]+\/[-\w.+]+)/;function ic(e,t){return e.toLowerCase()===t.toLowerCase()}function sc(e){const t=rc.exec(e);return t?t[1]:""}const ac=/\?.*/;function lc(e){return e.replace(ac,"")}function uc(e){if($u(e)){return e.url}if(Ku(e)){return e.name||""}return"string"===typeof e?e:""}function cc(e){if($u(e)){const t=e,n=t.headers.get("content-type")||"",r=lc(t.url);return function(e){const t=oc.exec(e);return t?t[1]:e}(n)||sc(r)}if(Ku(e)){return e.type||""}return"string"===typeof e?sc(e):""}async function fc(e){if($u(e))return e;const t={},n=function(e){if($u(e))return e.headers["content-length"]||-1;if(Ku(e))return e.size;return"string"===typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const r=uc(e),o=cc(e);o&&(t["content-type"]=o);const i=await async function(e){const t=5;if("string"===typeof e)return"data:,".concat(e.slice(0,t));if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const n=new FileReader;n.onload=t=>{var n;return e(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.result)},n.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){const n=function(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}(e.slice(0,t));return"data:base64,".concat(n)}return null}(e);i&&(t["x-first-bytes"]=i),"string"===typeof e&&(e=(new TextEncoder).encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function dc(e){if(!e.ok){const t=await async function(e){const n=function(e){if(e.length<50)return e;const t=e.slice(e.length-15),n=e.substr(0,32);return"".concat(n,"...").concat(t)}(e.url);let r="Failed to fetch resource (".concat(e.status,") ").concat(e.statusText,": ").concat(n);r=r.length>100?"".concat(r.slice(0,100),"..."):r;const o={reason:e.statusText,url:e.url,response:e};try{const t=e.headers.get("Content-Type");o.reason=null!==t&&void 0!==t&&t.includes("application/json")?await e.json():e.text()}catch(t){}return new nc(r,o)}(e);throw t}}async function hc(e,t){if("string"===typeof e){const o=function(e){for(const t in tc)if(e.startsWith(t)){const n=tc[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(ec).concat(e)),e}(e);var n,r;if(function(e){return!function(e){return e.startsWith("http:")||e.startsWith("https:")}(e)&&!function(e){return e.startsWith("data:")}(e)}(o))if(null!==(n=globalThis.loaders)&&void 0!==n&&n.fetchNode)return null===(r=globalThis.loaders)||void 0===r?void 0:r.fetchNode(o,t);return await fetch(o,t)}return await fc(e)}const pc=new Sr({id:"loaders.gl"});class gc{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const mc=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),yc="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),vc=(yc&&parseFloat(yc[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){or(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:mc,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),bc={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function _c(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function wc(){const e=_c();return e.globalOptions=e.globalOptions||{...vc},e.globalOptions}function xc(e,t,n,r){return n=n||[],function(e,t){kc(e,null,vc,bc,t);for(const n of t){const r=e&&e[n.id]||{},o=n.options&&n.options[n.id]||{},i=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};kc(r,n.id,o,i,t)}}(e,n=Array.isArray(n)?n:[n]),Sc(t,e,r)}function kc(e,t,n,r,o){const i=t||"Top level",s=t?"".concat(t,"."):"";for(const a in e){const l=!t&&qu(e[a]);if(!(a in n)&&!("baseUri"===a&&!t)&&!("workerUrl"===a&&t))if(a in r)pc.warn("".concat(i," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const e=Ec(a,o);pc.warn("".concat(i," loader option '").concat(s).concat(a,"' not recognized. ").concat(e))()}}}function Ec(e,t){const n=e.toLowerCase();let r="";for(const o of t)for(const t in o.options){if(e===t)return"Did you mean '".concat(o.id,".").concat(t,"'?");const i=t.toLowerCase();(n.startsWith(i)||i.startsWith(n))&&(r=r||"Did you mean '".concat(o.id,".").concat(t,"'?"))}return r}function Sc(e,t,n){const r={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(r,n),null===r.log&&(r.log=new gc),Tc(r,wc()),Tc(r,t),r}function Tc(e,t){for(const n in t)if(n in t){const r=t[n];Vu(r)&&Vu(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function Pc(e,t){const n=wc(),r=e||n;return"function"===typeof r.fetch?r.fetch:qu(r.fetch)?e=>hc(e,r.fetch):null!==t&&void 0!==t&&t.fetch?null===t||void 0===t?void 0:t.fetch:hc}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof global&&global,"undefined"!==typeof document&&document;const Ac="object"!==typeof process||"[object process]"!==String(process)||process.browser,Oc="undefined"!==typeof window&&"undefined"!==typeof window.orientation,Cc="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);Cc&&parseFloat(Cc[1]);class Mc{terminate(){}}function Rc(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const jc=new Map;function Ic(e){Rc(e.source&&!e.url||!e.source&&e.url);let t=jc.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return Lc((t=e,"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var t}(e.url),jc.set(e.url,t)),e.source&&(t=Lc(e.source),jc.set(e.source,t))),Rc(t),t}function Lc(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Nc(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(e){if(Fc(e))r.add(e);else if(Fc(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===typeof e)for(const o in e)Nc(e[o],t,r)}else;return void 0===n?Array.from(r):[]}function Fc(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&e instanceof MessagePort||("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const Uc=()=>{};class Dc{static isSupported(){return"undefined"!==typeof Worker&&Ac||"undefined"!==typeof Mc&&!Ac}constructor(e){or(this,"name",void 0),or(this,"source",void 0),or(this,"url",void 0),or(this,"terminated",!1),or(this,"worker",void 0),or(this,"onMessage",void 0),or(this,"onError",void 0),or(this,"_loadableURL","");const{name:t,source:n,url:r}=e;Rc(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=Uc,this.onError=e=>console.log(e),this.worker=Ac?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Uc,this.onError=Uc,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||Nc(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=Ic({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Mc(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new Mc(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class zc{constructor(e,t){or(this,"name",void 0),or(this,"workerThread",void 0),or(this,"isRunning",!0),or(this,"result",void 0),or(this,"_resolve",(()=>{})),or(this,"_reject",(()=>{})),this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Rc(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Rc(this.isRunning),this.isRunning=!1,this._reject(e)}}class Bc{static isSupported(){return Dc.isSupported()}constructor(e){or(this,"name","unnamed"),or(this,"source",void 0),or(this,"url",void 0),or(this,"maxConcurrency",1),or(this,"maxMobileConcurrency",1),or(this,"onDebug",(()=>{})),or(this,"reuseWorkers",!0),or(this,"props",{}),or(this,"jobQueue",[]),or(this,"idleQueue",[]),or(this,"count",0),or(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t,n)=>e.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e.error(t);const r=new Promise((r=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const r=new zc(t.name,e);e.onMessage=e=>t.onMessage(r,e.type,e.payload),e.onError=e=>t.onError(r,e),t.onStart(r);try{await r.result}catch(n){console.error("Worker exception: ".concat(n))}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Ac||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Dc({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Oc?this.maxMobileConcurrency:this.maxConcurrency}}const Wc={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class qc{static isSupported(){return Dc.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return qc._workerFarm=qc._workerFarm||new qc({}),qc._workerFarm.setProps(e),qc._workerFarm}constructor(e){or(this,"props",void 0),or(this,"workerPools",new Map),this.props={...Wc},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:r}=e;let o=this.workerPools.get(t);return o||(o=new Bc({name:t,source:n,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}or(qc,"_workerFarm",void 0);const Vc="latest";const Gc=function(){var e;return null!==(e=globalThis._loadersgl_)&&void 0!==e&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}();async function Hc(e,t,n,r,o){const i=e.id,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t[e.id]||{},r="".concat(e.id,Ac?"-worker.js":"-worker-node.js");let o=n.workerUrl;if(o||"compression"!==e.id||(o=t.workerUrl),"test"===t._workerType&&(o=Ac?"modules/".concat(e.module,"/dist/").concat(r):"modules/".concat(e.module,"/src/workers/").concat(e.id,"-worker-node.ts")),!o){let t=e.version;"latest"===t&&(t=Vc);const n=t?"@".concat(t):"";o="https://unpkg.com/@loaders.gl/".concat(e.module).concat(n,"/dist/").concat(r)}return Rc(o),o}(e,n),a=qc.getWorkerFarm(n).getWorkerPool({name:i,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await a.startJob("process-on-worker",$c.bind(null,o));l.postMessage("process",{input:t,options:n,context:r});const u=await l.result;return await u.result}async function $c(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:i,input:s,options:a}=r;try{const n=await e(s,a);t.postMessage("done",{id:i,result:n})}catch(o){const e=o instanceof Error?o.message:"unknown error";t.postMessage("error",{id:i,error:e})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function Kc(e,t){return Yc(e||{},t)}function Yc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>3)return t;const r={...e};for(const[o,i]of Object.entries(t))i&&"object"===typeof i&&!Array.isArray(i)?r[o]=Yc(r[o]||{},t[o],n+1):r[o]=t[o];return r}function Qc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),n=t.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(n);let o=0;for(const i of t)r.set(i,o),o+=i.byteLength;return r.buffer}(t)}const Zc=262144;const Jc=262144;const Xc=1048576;function ef(e){if(function(e){return e&&"object"===typeof e&&e.isBuffer}(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"===typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"===typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function tf(e,t){return mc?async function*(e,t){const n=e.getReader();let r;try{for(;;){const e=r||n.read();null!==t&&void 0!==t&&t._streamReadAhead&&(r=n.read());const{done:o,value:i}=await e;if(o)return;yield ef(i)}}catch(o){n.releaseLock()}}(e,t):async function*(e,t){for await(const n of e)yield ef(n)}(e)}function nf(e,t){if("string"===typeof e)return function*(e,t){const n=(null===t||void 0===t?void 0:t.chunkSize)||Zc;let r=0;const o=new TextEncoder;for(;r<e.length;){const t=Math.min(e.length-r,n),i=e.slice(r,r+t);r+=t,yield o.encode(i)}}(e,t);if(e instanceof ArrayBuffer)return function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chunkSize:n=Jc}=t;let r=0;for(;r<e.byteLength;){const t=Math.min(e.byteLength-r,n),o=new ArrayBuffer(t),i=new Uint8Array(e,r,t);new Uint8Array(o).set(i),r+=t,yield o}}(e,t);if(Ku(e))return async function*(e,t){const n=(null===t||void 0===t?void 0:t.chunkSize)||Xc;let r=0;for(;r<e.size;){const t=r+n,o=await e.slice(r,t).arrayBuffer();r=t,yield o}}(e,t);if(Qu(e))return tf(e,t);if($u(e)){return tf(e.body,t)}throw new Error("makeIterator")}const rf="Cannot convert supplied data type";async function of(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"===typeof e||r)return function(e,t,n){if(t.text&&"string"===typeof e)return e;if(Yu(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const r=e.byteLength||e.length;return 0===e.byteOffset&&r===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+r)),n}throw new Error(rf)}(e,t);if(Ku(e)&&(e=await fc(e)),$u(e)){const n=e;return await dc(n),t.binary?await n.arrayBuffer():await n.text()}if(Qu(e)&&(e=nf(e,n)),Gu(e)||Hu(e))return async function(e){const t=[];for await(const n of e)t.push(n);return Qc(...t)}(e);throw new Error(rf)}function sf(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function af(e,t,n){if(n)return n;const r={fetch:Pc(t,e),...e};if(r.url){const e=lc(r.url);r.baseUrl=e,r.queryString=function(e){const t=e.match(ac);return t&&t[0]}(r.url),r.filename=sf(e),r.baseUrl=function(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}(e)}return Array.isArray(r.loaders)||(r.loaders=null),r}const lf=new Sr({id:"loaders.gl"}),uf=()=>{const e=_c();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};const cf=/\.([^.]+)$/;function ff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!df(e))return null;if(t&&!Array.isArray(t))return Xu(t);let o=[];t&&(o=o.concat(t)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||o.push(...uf()),function(e){for(const t of e)Xu(t)}(o);const i=function(e,t,n,r){const o=uc(e),i=cc(e),s=lc(o)||(null===r||void 0===r?void 0:r.url);let a=null,l="";null!==n&&void 0!==n&&n.mimeType&&(a=pf(t,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType));a=a||function(e,t){const n=t&&cf.exec(t),r=n&&n[1];return r?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,r):null}(t,s),l=l||(a?"matched url ".concat(s):""),a=a||pf(t,i),l=l||(a?"matched MIME type ".concat(i):""),a=a||function(e,t){if(!t)return null;for(const n of e)if("string"===typeof t){if(gf(t,n))return n}else if(ArrayBuffer.isView(t)){if(mf(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer){if(mf(t,0,n))return n}return null}(t,e),l=l||(a?"matched initial data ".concat(yf(e)):""),null!==n&&void 0!==n&&n.fallbackMimeType&&(a=a||pf(t,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(i):""));var u;l&&lf.log(1,"selectLoader selected ".concat(null===(u=a)||void 0===u?void 0:u.name,": ").concat(l,"."));return a}(e,o,n,r);if(!i&&(null===n||void 0===n||!n.nothrow))throw new Error(hf(e));return i}function df(e){return!(e instanceof Response&&204===e.status)}function hf(e){const t=uc(e),n=cc(e);let r="No valid loader found (";r+=t?"".concat(sf(t),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const o=e?yf(e):"";return r+=o?' first bytes: "'.concat(o,'"'):"first bytes: not available",r+=")",r}function pf(e,t){for(const r of e){var n;if(null!==(n=r.mimeTypes)&&void 0!==n&&n.some((e=>ic(t,e))))return r;if(ic(t,"application/x.".concat(r.id)))return r}return null}function gf(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function mf(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((n=>function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),o=new Uint8Array(t);for(let i=0;i<r.length;++i)if(r[i]!==o[i])return!1;return!0}(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":return r===vf(e,t,r.length);default:return!1}}(e,t,0,n)))}function yf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return vf(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return vf(e,0,t)}return""}function vf(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let o="";for(let i=0;i<n;i++)o+=String.fromCharCode(r.getUint8(t+i));return o}async function bf(e,t,n,r){!t||Array.isArray(t)||Ju(t)||(r=void 0,n=t,t=void 0),n=n||{};const o=uc(e=await e),i=function(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:void 0}(t,r),s=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!df(e))return null;let o=ff(e,t,{...n,nothrow:!0},r);if(o)return o;if(Ku(e)&&(o=ff(e=await e.slice(0,10).arrayBuffer(),t,n,r)),!o&&(null===n||void 0===n||!n.nothrow))throw new Error(hf(e));return o}(e,i,n);return s?(r=af({url:o,_parse:bf,loaders:i},n=xc(n,s,i,o),r||null),await async function(e,t,n,r){if(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gc;Rc(e,"no worker provided");const n=e.version}(e),n=Kc(e.options,n),$u(t)){const e=t,{ok:n,redirected:o,status:i,statusText:s,type:a,url:l}=e,u=Object.fromEntries(e.headers.entries());r.response={headers:u,ok:n,redirected:o,status:i,statusText:s,type:a,url:l}}t=await of(t,e,n);const o=e;if(o.parseTextSync&&"string"===typeof t)return o.parseTextSync(t,n,r);if(function(e,t){return!!qc.isSupported()&&!!(Ac||null!==t&&void 0!==t&&t._nodeWorkers)&&e.worker&&(null===t||void 0===t?void 0:t.worker)}(e,n))return await Hc(e,t,n,r,bf);if(o.parseText&&"string"===typeof t)return await o.parseText(t,n,r);if(o.parse)return await o.parse(t,n,r);throw Rc(!o.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(s,e,n,r)):null}async function _f(e,t,n,r){let o,i;Array.isArray(t)||Ju(t)?(o=t,i=n):(o=[],i=t);const s=Pc(i);let a=e;return"string"===typeof e&&(a=await s(e)),Ku(e)&&(a=await s(e)),Array.isArray(o),await bf(a,o,i)}var wf;const xf=2**24-1,kf=Object.freeze([]),Ef=To((e=>{let{oldViewport:t,viewport:n}=e;return t.equals(n)}));let Sf=new Uint8ClampedArray(0);const Tf={data:{type:"data",value:kf,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,t)=>{let{propName:n,layer:r,loaders:o,loadOptions:i,signal:s}=t;const{resourceManager:a}=r.context;var l;(i=i||r.getLoadOptions(),o=o||r.props.loaders,s)&&(i={...i,fetch:{...null===(l=i)||void 0===l?void 0:l.fetch,signal:s}});let u=a.contains(e);return u||i||(a.add({resourceId:e,data:_f(e,o),persistent:!1}),u=!0),u?a.subscribe({resourceId:e,onChange:e=>{var t;return null===(t=r.internalState)||void 0===t?void 0:t.reloadAsyncProp(n,e)},consumerId:r.id,requestId:n}):_f(e,o,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Cr.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:e=>{let{layerIndex:t}=e;return[0,100*-t]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Pf extends Fu{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Qa,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){go(this.internalState);const t=this.internalState.viewport||this.context.viewport,n=_u(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,i]=au(n,t.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,i]}unproject(e){go(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){go(this.internalState);return wu(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}setShaderModuleProps(){for(const e of this.getModels())e.shaderInputs.setProps(...arguments)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Cr.DEFAULT||e===Cr.LNGLAT||e===Cr.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){go(e instanceof Uint8Array);const[t,n,r]=e;return t+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:ul(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=cl(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const t of this.props.extensions)e=cl(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&t)if(Array.isArray(n))for(const r of n)t.invalidateAll(r);else t.invalidateAll();if(t){const{props:n}=e,r=this.internalState.hasPickingBuffer,o=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((e=>e.getNeedsPickingBuffer.call(this,e)));if(r!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:e,instancePickingColors:n}=t.attributes,r=e||n;r&&(o&&r.constant&&(r.constant=!1,t.invalidate(r.id)),r.value||o||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.destroy();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo(e){let{info:t,mode:n,sourceLayer:r}=e;const{index:o}=t;return o>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[o]),t}raiseError(e,t){var n,r,o,i;(t&&(e=new Error("".concat(t,": ").concat(e.message),{cause:e})),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,e))||(null===(o=this.context)||void 0===o||null===(i=o.onError)||void 0===i||i.call(o,e,this))}getNeedsRedraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,t&&Ef({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){let t=!1;for(const n in e)e[n].layoutChanged()&&(t=!0);for(const n of this.getModels())this._setModelAttributes(n,e,t)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,n=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),n=Object.create(this.props);for(const e in t)Object.defineProperty(n,e,{value:t[e]});return n}return this.props}calculateInstancePickingColors(e,t){let{numInstances:n}=t;if(e.constant)return;const r=Math.floor(Sf.length/4);if(this.internalState.usesPickingColorCache=!0,r<n){n>xf&&Or.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Sf=Dr.allocate(Sf,n,{size:4,copy:!0,maxCount:Math.max(n,xf)});const e=Math.floor(Sf.length/4),t=[];for(let n=r;n<e;n++)this.encodePickingColor(n,t),Sf[4*n+0]=t[0],Sf[4*n+1]=t[1],Sf[4*n+2]=t[2]}e.value=Sf.subarray(0,4*n)}_setModelAttributes(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Object.keys(t).length)return;if(r){const n=this.getAttributeManager();e.setBufferLayout(n.getBufferLayouts(e)),t=n.getAttributes()}const o=(null===(n=e.userData)||void 0===n?void 0:n.excludeAttributes)||{},i={},s={};for(const a in t){if(o[a])continue;const n=t[a].getValue();for(const r in n){const o=n[r];o instanceof ur?t[a].settings.isIndexed?e.setIndexBuffer(o):i[r]=o:o&&(s[r]=o)}}e.setAttributes(i),e.setConstantAttributes(s)}disablePickingIndex(e){const t=this.props.data;if(!("attributes"in t))return void this._disablePickingIndex(e);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,o=n||r,i=o&&t.attributes&&t.attributes[o.id];if(i&&i.value){const n=i.value,r=this.encodePickingColor(e);for(let e=0;e<t.length;e++){const t=o.getVertexOffset(e);n[t]===r[0]&&n[t+1]===r[1]&&n[t+2]===r[2]&&this._disablePickingIndex(e)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,r=t||n;if(!r)return;const o=r.getVertexOffset(e),i=r.getVertexOffset(e+1);r.buffer.write(new Uint8Array(i-o),o)}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,n=e||t;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Sf.buffer&&(n.value=Sf.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){go(!this.internalState),go(Number.isFinite(this.props.coordinateSystem)),Ao("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new zu({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Or.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Ya(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Ao("layer.matched",this,this===e);const{state:t,internalState:n}=e;this!==e&&(this.internalState=n,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Ao("layer.update",this,e),!e)return;const t=this.props,n=this.context,r=this.internalState,o=n.viewport,i=this._updateUniformTransition();r.propsInTransition=i,n.viewport=r.viewport||o,this.props=i;try{const e=this._getUpdateParams(),t=this.getModels();if(n.device)this.updateState(e);else try{this.updateState(e)}catch(s){}for(const n of this.props.extensions)n.updateState.call(this,e,n);const r=this.getModels()[0]!==t[0];this._postUpdate(e,r)}finally{n.viewport=o,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Ao("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer(e){let{renderPass:t,moduleParameters:n=null,uniforms:r={},parameters:o={}}=e;this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{if(n){const{isActive:e,isAttribute:t}=n.picking;this.setModuleParameters(n),this.setShaderModuleProps({picking:{isActive:e,isAttribute:t}})}const{getPolygonOffset:e}=this.props,i=e&&e(r)||[0,0];s.device.setParametersWebGL({polygonOffset:i});for(const t of this.getModels())t.setParameters(o);s.device.withParametersWebGL(o,(()=>{const e={renderPass:t,moduleParameters:n,uniforms:r,parameters:o,context:s};for(const t of this.props.extensions)t.draw.call(this,e,t);this.draw(e)}))}finally{this.props=i}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let n=!1;if("dataChanged"===r){const o=e[r],i=t[r];o&&Array.isArray(i)&&(t.dataChanged=Array.isArray(o)?i.concat(o):o,n=!0)}t[r]||(t[r]=e[r],n=!0),n&&Ao("layer.changeFlag",this,r,e)}const n=Boolean(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=n,t.somethingChanged=n||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const n=rl(e,t);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,t[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(n)}validateProps(){!function(e){const t=e[Ja];for(const n in t){const r=t[n],{validate:o}=r;if(o&&!o(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&"function"===typeof n&&(t.highlightColor=n(e)),this.setShaderModuleProps({picking:t}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Va(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:n,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const o=this.state.model;null!==o&&void 0!==o&&o.isInstanced&&o.setInstanceCount(this.getNumInstances());const{autoHighlight:i,highlightedObjectIndex:s,highlightColor:a}=n;if(t||r.autoHighlight!==i||r.highlightedObjectIndex!==s||r.highlightColor!==a){const e={};Array.isArray(a)&&(e.highlightColor=a),(t||r.autoHighlight!==i||s!==r.highlightedObjectIndex)&&(e.highlightedObjectColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setShaderModuleProps({picking:e})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(e);if(t=t||r,t)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}(wf=Pf).defaultProps=Tf,wf.layerName="Layer";const Af={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\nfloat sin_taylor_fp32(float a) {\nfloat r, s, t, x;\nif (a == 0.0) {\nreturn 0.0;\n}\nx = -a * a;\ns = a;\nr = a;\nr = r * x;\nt = r * INVERSE_FACTORIAL_3;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_5;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_7;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_9;\ns = s + t;\nreturn s;\n}\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\nif (a == 0.0) {\nsin_t = 0.0;\ncos_t = 1.0;\n}\nsin_t = sin_taylor_fp32(a);\ncos_t = sqrt(1.0 - sin_t * sin_t);\n}\nfloat tan_taylor_fp32(float a) {\nfloat sin_a;\nfloat cos_a;\nif (a == 0.0) {\nreturn 0.0;\n}\nfloat z = floor(a / TWO_PI);\nfloat r = a - TWO_PI * z;\nfloat t;\nfloat q = floor(r / PI_2 + 0.5);\nint j = int(q);\nif (j < -2 || j > 2) {\nreturn 1.0 / 0.0;\n}\nt = r - PI_2 * q;\nq = floor(t / PI_16 + 0.5);\nint k = int(q);\nint abs_k = int(abs(float(k)));\nif (abs_k > 4) {\nreturn 1.0 / 0.0;\n} else {\nt = t - PI_16 * q;\n}\nfloat u = 0.0;\nfloat v = 0.0;\nfloat sin_t, cos_t;\nfloat s, c;\nsincos_taylor_fp32(t, sin_t, cos_t);\nif (k == 0) {\ns = sin_t;\nc = cos_t;\n} else {\nif (abs(float(abs_k) - 1.0) < 0.5) {\nu = COS_TABLE_0;\nv = SIN_TABLE_0;\n} else if (abs(float(abs_k) - 2.0) < 0.5) {\nu = COS_TABLE_1;\nv = SIN_TABLE_1;\n} else if (abs(float(abs_k) - 3.0) < 0.5) {\nu = COS_TABLE_2;\nv = SIN_TABLE_2;\n} else if (abs(float(abs_k) - 4.0) < 0.5) {\nu = COS_TABLE_3;\nv = SIN_TABLE_3;\n}\nif (k > 0) {\ns = u * sin_t + v * cos_t;\nc = u * cos_t - v * sin_t;\n} else {\ns = u * sin_t - v * cos_t;\nc = u * cos_t + v * sin_t;\n}\n}\nif (j == 0) {\nsin_a = s;\ncos_a = c;\n} else if (j == 1) {\nsin_a = c;\ncos_a = -s;\n} else if (j == -1) {\nsin_a = -c;\ncos_a = s;\n} else {\nsin_a = -s;\ncos_a = -c;\n}\nreturn sin_a / cos_a;\n}\n#endif\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nreturn tan_taylor_fp32(a);\n#else\nreturn tan(a);\n#endif\n}\n"},Of="#define SMOOTH_EDGE_RADIUS 0.5",Cf={name:"geometry",vs:"\n".concat(Of,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(Of,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Mf=Object.keys(Cr).map((e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(Cr[e],";"))).join(""),Rf=Object.keys(Mr).map((e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Mr[e],";"))).join(""),jf=Object.keys(Rr).map((e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Rr[e],";"))).join(""),If="".concat(Mf,"\n").concat(Rf,"\n").concat(jf,"\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject_uPseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project_uCommonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project_uWrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project_uModelMatrix * position;\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project_uCoordinateOrigin;\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project_uCommonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project_uCoordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\nreturn offset * project_uFocalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project_uScale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project_uScale;\n}\n"),Lf={};const Nf={name:"project32",dependencies:[{name:"project",dependencies:[Af,Cf],vs:If,getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lf;return"viewport"in e?function(e){let{viewport:t,devicePixelRatio:n=1,modelMatrix:r=null,coordinateSystem:o=Cr.DEFAULT,coordinateOrigin:i=El,autoWrapLongitude:s=!1}=e;o===Cr.DEFAULT&&(o=t.isGeospatial?Cr.LNGLAT:Cr.CARTESIAN);const a=Sl({viewport:t,devicePixelRatio:n,coordinateSystem:o,coordinateOrigin:i});return a.project_uWrapLongitude=s,a.project_uModelMatrix=r||xl,a}(e):{}}}],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Ff=new Float32Array([0,1,1,1]),Uf={name:"picking",vs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nout vec4 picking_vRGBcolor_Avalid;\nvec3 picking_normalizeColor(vec3 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nvec4 picking_normalizeColor(vec4 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nbool picking_isColorZero(vec3 color) {\nreturn dot(color, vec3(1.0)) < 0.00001;\n}\nbool picking_isColorValid(vec3 color) {\nreturn dot(color, vec3(1.0)) > 0.00001;\n}\nbool isVertexHighlighted(vec3 vertexColor) {\nvec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);\nreturn\nbool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));\n}\nvoid picking_setPickingColor(vec3 pickingColor) {\npickingColor = picking_normalizeColor(pickingColor);\nif (bool(picking.isActive)) {\npicking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\nif (!bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = pickingColor;\n}\n} else {\npicking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));\n}\n}\nvoid picking_setPickingAttribute(float value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.r = value;\n}\n}\nvoid picking_setPickingAttribute(vec2 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rg = value;\n}\n}\nvoid picking_setPickingAttribute(vec3 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = value;\n}\n}\n",fs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\nif (picking.isActive > 0.5) {\nreturn color;\n}\nbool selected = bool(picking_vRGBcolor_Avalid.a);\nif (selected) {\nfloat highLightAlpha = picking.highlightColor.a;\nfloat blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\nfloat highLightRatio = highLightAlpha / blendedAlpha;\nvec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);\nreturn vec4(blendedRGB, blendedAlpha);\n} else {\nreturn color;\n}\n}\nvec4 picking_filterPickingColor(vec4 color) {\nif (bool(picking.isActive)) {\nif (picking_vRGBcolor_Avalid.a == 0.0) {\ndiscard;\n}\nreturn picking_vRGBcolor_Avalid;\n}\nreturn color;\n}\nvec4 picking_filterColor(vec4 color) {\nvec4 highlightColor = picking_filterHighlightColor(color);\nreturn picking_filterPickingColor(highlightColor);\n}\n",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:new Float32Array([0,0,0]),highlightColor:Ff},getUniforms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};if(void 0===e.highlightedObjectColor);else if(null===e.highlightedObjectColor)t.isHighlightActive=!1;else{t.isHighlightActive=!0;const n=e.highlightedObjectColor.slice(0,3);t.highlightedObjectColor=n}if(e.highlightColor){const n=Array.from(e.highlightColor,(e=>e/255));Number.isFinite(n[3])||(n[3]=1),t.highlightColor=n}void 0!==e.isActive&&(t.isActive=Boolean(e.isActive),t.isAttribute=Boolean(e.isAttribute));void 0!==e.useFloatColors&&(t.useFloatColors=Boolean(e.useFloatColors));return t}};const Df={...Uf,defaultUniforms:{...Uf.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}};class zf{constructor(e){or(this,"id",void 0),or(this,"topology",void 0),or(this,"vertexCount",void 0),or(this,"indices",void 0),or(this,"attributes",void 0),or(this,"userData",{});const{attributes:t={},indices:n=null,vertexCount:r=null}=e;this.id=e.id||sr("geometry"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[o,i]of Object.entries(t)){const e=ArrayBuffer.isView(i)?{value:i}:i;Oo(ArrayBuffer.isView(e.value),"".concat(this._print(o),": must be typed array or object with value as typed array")),"POSITION"!==o&&"positions"!==o||e.size||(e.size=3),"indices"===o?(Oo(!this.indices),this.indices=e):this.attributes[o]=e}this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=r||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){return this}_calculateVertexCount(e,t){if(t)return t.value.length;let n=1/0;for(const r of Object.values(e)){const{value:e,size:t,constant:o}=r;!o&&e&&t>=1&&(n=Math.min(n,e.length/t))}return Oo(Number.isFinite(n)),n}}var Bf;const Wf=[0,0,0,255],qf={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getSourceColor:{type:"accessor",value:Wf},getTargetColor:{type:"accessor",value:Wf},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class Vf extends Pf{getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME arc-layer-vertex-shader\nin vec3 positions;\nin vec4 instanceSourceColors;\nin vec4 instanceTargetColors;\nin vec3 instanceSourcePositions;\nin vec3 instanceSourcePositions64Low;\nin vec3 instanceTargetPositions;\nin vec3 instanceTargetPositions64Low;\nin vec3 instancePickingColors;\nin float instanceWidths;\nin float instanceHeights;\nin float instanceTilts;\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int widthUnits;\nout vec4 vColor;\nout vec2 uv;\nout float isValid;\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\nfloat deltaZ = targetZ - sourceZ;\nfloat dh = distance * instanceHeights;\nif (dh == 0.0) {\nreturn sourceZ + deltaZ * ratio;\n}\nfloat unitZ = deltaZ / dh;\nfloat p2 = unitZ * unitZ + 1.0;\nfloat dir = step(deltaZ, 0.0);\nfloat z0 = mix(sourceZ, targetZ, dir);\nfloat r = mix(ratio, 1.0 - ratio, dir);\nreturn sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\nvec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\ndir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\nreturn dir_screenspace * offset_direction * width / 2.0;\n}\nfloat getSegmentRatio(float index) {\nreturn smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\nfloat distance = length(source.xy - target.xy);\nfloat z = paraboloid(distance, source.z, target.z, segmentRatio);\nfloat tiltAngle = radians(instanceTilts);\nvec2 tiltDirection = normalize(target.xy - source.xy);\nvec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\nreturn vec3(\nmix(source.xy, target.xy, segmentRatio) + tilt,\nz * cos(tiltAngle)\n);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\nvec2 sourceRadians = radians(source);\nvec2 targetRadians = radians(target);\nvec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\nvec2 shd_sq = sin_half_delta * sin_half_delta;\nfloat a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\nreturn 2.0 * asin(sqrt(a));\n}\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\nvec2 lngLat;\nif(abs(angularDist - PI) < 0.001) {\nlngLat = (1.0 - t) * source.xy + t * target.xy;\n} else {\nfloat a = sin((1.0 - t) * angularDist);\nfloat b = sin(t * angularDist);\nvec3 p = source3D.yxz * a + target3D.yxz * b;\nlngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n}\nfloat z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\nreturn vec3(lngLat, z);\n}\nvoid main(void) {\ngeometry.worldPosition = instanceSourcePositions;\ngeometry.worldPositionAlt = instanceTargetPositions;\nfloat segmentIndex = positions.x;\nfloat segmentRatio = getSegmentRatio(segmentIndex);\nfloat prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\nfloat nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\nfloat indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\nisValid = 1.0;\nuv = vec2(segmentRatio, positions.y);\ngeometry.uv = uv;\ngeometry.pickingColor = instancePickingColors;\nvec4 curr;\nvec4 next;\nvec3 source;\nvec3 target;\nif ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nsource = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\ntarget = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\nfloat angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\nvec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\nvec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\nvec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\nif (abs(currPos.x - prevPos.x) > 180.0) {\nindexDir = -1.0;\nisValid = 0.0;\n} else if (abs(currPos.x - nextPos.x) > 180.0) {\nindexDir = 1.0;\nisValid = 0.0;\n}\nnextPos = indexDir < 0.0 ? prevPos : nextPos;\nnextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\nif (isValid == 0.0) {\nnextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\nfloat t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\ncurrPos = mix(currPos, nextPos, t);\nsegmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n}\nvec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\nvec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\ncurr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\nnext = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n} else {\nvec3 source_world = instanceSourcePositions;\nvec3 target_world = instanceTargetPositions;\nif (useShortestPath) {\nsource_world.x = mod(source_world.x + 180., 360.0) - 180.;\ntarget_world.x = mod(target_world.x + 180., 360.0) - 180.;\nfloat deltaLng = target_world.x - source_world.x;\nif (deltaLng > 180.) target_world.x -= 360.;\nif (deltaLng < -180.) source_world.x -= 360.;\n}\nsource = project_position(source_world, instanceSourcePositions64Low);\ntarget = project_position(target_world, instanceTargetPositions64Low);\nfloat antiMeridianX = 0.0;\nif (useShortestPath) {\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nantiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n}\nfloat thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\nif (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\nisValid = 0.0;\nindexDir = sign(segmentRatio - thresholdRatio);\nsegmentRatio = thresholdRatio;\n}\n}\nnextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\nvec3 currPos = interpolateFlat(source, target, segmentRatio);\nvec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\nif (useShortestPath) {\nif (nextPos.x < antiMeridianX) {\ncurrPos.x += TILE_SIZE;\nnextPos.x += TILE_SIZE;\n}\n}\ncurr = project_common_position_to_clipspace(vec4(currPos, 1.0));\nnext = project_common_position_to_clipspace(vec4(nextPos, 1.0));\ngeometry.position = vec4(currPos, 1.0);\n}\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceWidths * widthScale, widthUnits),\nwidthMinPixels, widthMaxPixels\n);\nvec3 offset = vec3(\ngetExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\nDECKGL_FILTER_GL_POSITION(curr, geometry);\ngl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\nvec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\nvColor = vec4(color.rgb, color.a * opacity);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME arc-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 uv;\nin float isValid;\nout vec4 fragColor;\nvoid main(void) {\nif (isValid == 0.0) {\ndiscard;\n}\nfragColor = vColor;\ngeometry.uv = uv;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[Nf,Df]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getSourceColor",defaultValue:Wf},instanceTargetColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getTargetColor",defaultValue:Wf},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:r}=e;var o;(r.extensionsChanged||t.numSegments!==n.numSegments)&&(null===(o=this.state.model)||void 0===o||o.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw(e){let{uniforms:t}=e;const{widthUnits:n,widthScale:r,widthMinPixels:o,widthMaxPixels:i,greatCircle:s,wrapLongitude:a}=this.props,l=this.state.model;l.setUniforms(t),l.setUniforms({greatCircle:s,widthUnits:Rr[n],widthScale:r,widthMinPixels:o,widthMaxPixels:i,useShortestPath:a}),l.draw(this.context.renderPass)}_getModel(){const{numSegments:e}=this.props;let t=[];for(let r=0;r<e;r++)t=t.concat([r,1,0,r,-1,0]);const n=new ba(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new zf({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(t)}}}),isInstanced:!0});return n.setUniforms({numSegments:e}),n}}(Bf=Vf).layerName="ArcLayer",Bf.defaultProps=qf;var Gf=n(2995),Hf=n.n(Gf);class $f{constructor(e){var t,n,r,o,i;this.color=void 0,this.uik=void 0,this.building=void 0;const s=Hf()((null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.color)||"#000000").rgb().array();let a=(null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.lon)||0,l=(null===e||void 0===e||null===(r=e.properties)||void 0===r?void 0:r.lat)||0,u=(null===e||void 0===e||null===(o=e.properties)||void 0===o?void 0:o.uik_lon)||0,c=(null===e||void 0===e||null===(i=e.properties)||void 0===i?void 0:i.uik_lat)||0;this.color=s,this.uik={coordinates:[u,c]},this.building={coordinates:[a,l]}}}const Kf="pk.eyJ1Ijoia2xuNCIsImEiOiJjaW9sNjZlbWMwMDEwdzVtNmxxYjA2ZGozIn0.BytaphQwtjCVMGEaLlfb3Q",Yf=new(n(7050))({accessToken:Kf}),Qf=Ve()(Yf),Zf={longitude:37.805,latitude:55.8104,zoom:12.5,pitch:50,bearing:260},Jf="cl65cx61a000c15ljmv271d6d",Xf="clzmpz9gw0ngb1ul9kk3pwc20",ed="clzmw28s40ov61mmuhsgflrx9",td="".concat("/golyanovo2024-agit-map","/dataset/golyanovo2024_buildings.geojson"),nd="clya1iza4qop51mp8z6rjg6l9",rd="clyne7akr02l71omhcye06huh";function od(e){const[n,r]=(0,t.useState)(ne([])),[o,i]=(0,t.useState)(ne([])),[s,a]=(0,t.useState)(ne([])),[l,u]=(0,t.useState)(ne([])),[c,f]=(0,t.useState)([]),[d,h]=(0,t.useState)(ne([])),[p,g]=(0,t.useState)(null),[m,y]=(0,t.useState)(null),[v,b]=(0,t.useState)(null),[_,w]=(0,t.useState)(null),[x,k]=(0,t.useState)(!1);(0,t.useEffect)((()=>{Qf.listFeatures({datasetId:Xf}).send().then((e=>{let t=e.body;r(t)}),(e=>console.log(e))),Qf.listFeatures({datasetId:ed}).send().then((e=>{let t=e.body;i(t)}),(e=>console.log(e))),rr.get(td).then((e=>{let t=e.data;t.features.map((e=>we(e)));a(t)}),(e=>console.log(e))),Qf.listFeatures({datasetId:nd}).send().then((e=>{let t=e.body;u(t)}),(e=>console.log(e))),Qf.listFeatures({datasetId:rd}).send().then((e=>{let t=e.body;h(t)}),(e=>console.log(e)))}),[]);const E=(0,t.createRef)();We({mapRef:E,name:"star",url:"".concat("/golyanovo2024-agit-map","/img/star.png")}),We({mapRef:E,name:"star-stroked",url:"".concat("/golyanovo2024-agit-map","/img/star-stroked.png")});return(0,Ue.jsxs)(W,{mapboxAccessToken:Kf,style:{position:"absolute",height:"100%",width:"100%"},initialViewState:Zf,mapStyle:"mapbox://styles/kln4/".concat(Jf),interactiveLayerIds:["buildings","electionCommissions"],onClick:t=>{var n,r;let o=(null===t||void 0===t||null===(n=t.features)||void 0===n?void 0:n.find((e=>"buildings"===e.layer.id)))||null,i=(null===t||void 0===t||null===(r=t.features)||void 0===r?void 0:r.find((e=>"electionCommissions"===e.layer.id)))||null,a=[];o?a=[new $f(o)]:i&&(a=s.features.filter((e=>{var t,n;return(null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.uik_number)===(null===i||void 0===i||null===(n=i.properties)||void 0===n?void 0:n.uik)})).map((e=>new $f(e)))),e.onClick(o||i),g(o),b(i),f(a),y(null),w(null)},onMouseEnter:e=>{var t,n;let r=(null===e||void 0===e||null===(t=e.features)||void 0===t?void 0:t.find((e=>"buildings"===e.layer.id)))||null,o=(null===e||void 0===e||null===(n=e.features)||void 0===n?void 0:n.find((e=>"electionCommissions"===e.layer.id)))||null;y(r),w(o)},onMouseLeave:()=>{y(null),w(null)},ref:E,children:[(0,Ue.jsx)(U,{}),(0,Ue.jsx)(D,{}),(0,Ue.jsx)(De,{featureCollection:n}),(0,Ue.jsx)(ze,{featureCollection:o}),(0,Ue.jsx)(Be,{featureCollection:s,clicked:p,hovered:m})]})}function id(e){var n,r;let o,i;if("buildings"===(null===(n=e.feature)||void 0===n?void 0:n.layer.id)){var s,a,l,u,c,f,d,h;const n=(null===e||void 0===e||null===(s=e.feature)||void 0===s||null===(a=s.properties)||void 0===a?void 0:a.uik)||"",r=(null===e||void 0===e||null===(l=e.feature)||void 0===l||null===(u=l.properties)||void 0===u?void 0:u["building:flats"])||"";null===e||void 0===e||null===(c=e.feature)||void 0===c||null===(f=c.properties)||void 0===f||f["building:halls"];o=(null===e||void 0===e||null===(d=e.feature)||void 0===d||null===(h=d.properties)||void 0===h?void 0:h.address)||"",i=(0,Ue.jsxs)(t.Fragment,{children:[(0,Ue.jsx)("b",{children:"\u0423\u0418\u041a:"})," ",(0,Ue.jsxs)("span",{children:["\u2116 ",n]})," ",(0,Ue.jsx)("br",{}),(0,Ue.jsx)("b",{children:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440:"})," ",(0,Ue.jsx)("span",{children:r})," ",(0,Ue.jsx)("br",{})]})}else if("electionCommissions"===(null===(r=e.feature)||void 0===r?void 0:r.layer.id)){var p,g,m,y,v,b,_,w;const n=(null===e||void 0===e||null===(p=e.feature)||void 0===p||null===(g=p.properties)||void 0===g?void 0:g.description)||"",r=(null===e||void 0===e||null===(m=e.feature)||void 0===m||null===(y=m.properties)||void 0===y?void 0:y.address)||"",s=(null===e||void 0===e||null===(v=e.feature)||void 0===v||null===(b=v.properties)||void 0===b?void 0:b.phone)||"";o=(null===e||void 0===e||null===(_=e.feature)||void 0===_||null===(w=_.properties)||void 0===w?void 0:w.name)||"",i=(0,Ue.jsxs)(t.Fragment,{children:[(0,Ue.jsx)("b",{children:"\u0423\u0447\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435:"})," ",(0,Ue.jsx)("span",{children:n})," ",(0,Ue.jsx)("br",{}),(0,Ue.jsx)("b",{children:"\u0410\u0434\u0440\u0435\u0441:"})," ",(0,Ue.jsx)("span",{children:r})," ",(0,Ue.jsx)("br",{}),(0,Ue.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"})," ",(0,Ue.jsx)("span",{children:s}),(0,Ue.jsx)("br",{})]})}return(0,Ue.jsx)("div",{style:{position:"absolute",left:"5px",right:"5px",bottom:"5px",height:"110px",backgroundColor:"white",borderRadius:"10px",opacity:.9,textAlign:"center",padding:"15px"},children:(0,Ue.jsxs)("table",{style:{width:"100%",height:"100%",display:"flex",flexFlow:"column"},children:[(0,Ue.jsx)("thead",{children:(0,Ue.jsx)("tr",{children:(0,Ue.jsx)("th",{colSpan:2,children:(0,Ue.jsx)("h4",{style:{margin:"0px"},children:o})})})}),(0,Ue.jsx)("tbody",{style:{flex:"1 1 auto",display:"block",overflowY:"scroll"},children:(0,Ue.jsxs)("tr",{style:{textAlign:"left"},children:[(0,Ue.jsx)("td",{style:{padding:"5px",verticalAlign:"top"},children:i}),(0,Ue.jsx)("td",{style:{padding:"5px",verticalAlign:"top"}})]})})]})})}function sd(){const[e,n]=(0,t.useState)(null);return(0,Ue.jsxs)("div",{style:{backgroundColor:"#D7DADB",height:"100%"},children:[(0,Ue.jsx)(od,{onClick:e=>n(e)}),(0,Ue.jsx)(id,{feature:e})]})}const ad=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:s}=t;n(e),r(e),o(e),i(e),s(e)}))};r.render((0,Ue.jsx)(t.StrictMode,{children:(0,Ue.jsx)(sd,{})}),document.getElementById("root")),ad()})()})();
//# sourceMappingURL=main.3e8cfd94.js.map